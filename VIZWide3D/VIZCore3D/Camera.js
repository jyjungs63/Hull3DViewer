class Camera{constructor(a,b){let c=this;this['CameraIndex']=0x0,this['projectionMatrixSrc']=undefined,this['projectionMatrix']=undefined,this['viewMatrix']=undefined,this['cameraMatrix']=undefined,this['cameraPosition']=undefined,this['cameraTarget']=undefined,this['cameraUp']=undefined,this['perspectiveView']=!![],this['cameraZoomRatio']=undefined,this['cameraZoom']=undefined,this['fieldOfView']=undefined,this['viewDistance']=undefined,this['near']=undefined,this['nearZoom']=undefined,this['far']=undefined,this['clientWidth']=0x0,this['clientHeight']=0x0,this['AutoNearFarPlane']=!![],this['CustomNearPlaneDist']=0xa,this['CustomFarPlaneDist']=0x186a0,this['AutoZoomNearPlane']=![],this['ZoomNearPlaneDist']=0xa,this['FixWorldAxis']=![],this['WorldAxis']=new b['Vector3'](0x0,0x0,0x1),this['useYUp']=![],this['useUpVectorFixRotateVAngleRange']=!![];let d=0.000001,e=0x5a;this['useCameraUpVectorMinPosition']=![];let f=0xa;this['matModel']=undefined,this['matMV']=undefined,this['matMVP']=undefined,this['matShadowMV']=undefined,this['matShadowProjection']=undefined,this['matShadowMV1']=undefined,this['matShadowProjection1']=undefined,this['matShadowMV2']=undefined,this['matShadowProjection2']=undefined,this['matShadowMV3']=undefined,this['matShadowProjection3']=undefined,this['matShadowMV4']=undefined,this['matShadowProjection3']=undefined,this['matShadowMV5']=undefined,this['matShadowProjection3']=undefined,this['viewDistanceFactor']=1.5,this['pivot']=undefined,this['lockPivot']=![],this['ctrlTranslatePivot']=!![],this['RenderPivot']=![];let g=new Map(),h=b['Enum']['VIEW_MODES']['PlusISO'],i=new b['Matrix4'](),j=undefined;this['screenProjectionMatrix']=undefined;let k=0.1,l=0.5;this['cameraAnimation']=![];let m=!![];this['LockCamera']=![],n();function n(){c['cameraZoom']=0x1,c['near']=0.1,c['nearZoom']=0.1,c['far']=0x64,c['cameraZoomRatio']=0.3,c['fieldOfView']=0x3c,c['cameraMatrix']=new b['Matrix4'](),c['viewMatrix']=new b['Matrix4'](),c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']=new b['Matrix4'](),c['matModel']=new b['Matrix4'](),c['matMV']=new b['Matrix4'](),c['matMVP']=new b['Matrix4'](),i['set2'](0.707106,0.353553,-0.6123724,0x0,-0.707106,0.353553,-0.6123724,0x0,0x0,0.866025,0.5,0x0,0x0,0x0,0x0,0x1);}this['Init']=function(v){c['CameraIndex']=v;};function o(){let v=a['Data']['GetBBox'](),w=v['center'],x=v['radius'];c['cameraMatrix']=new b['Matrix4']();let y=new b['Vector3']()['copy'](w)['multiplyScalar'](-0x1);c['cameraMatrix']['setPosition'](y),c['cameraPosition']=new b['Vector3'](),c['cameraTarget']=new b['Vector3'](),c['cameraUp']=new b['Vector3'](),c['viewDistance']=x*c['viewDistanceFactor'],c['cameraTarget']['set'](0x0,0x0,-0x1),c['cameraUp']['set'](0x0,0x1,0x0),c['cameraPosition']=new b['Vector3']()['copy'](y);let z=new b['Vector3']()['copy'](c['cameraTarget']);c['cameraPosition']['add'](z['multiplyScalar'](x)),c['cameraZoom']=0x1;if(!c['lockPivot'])c['pivot']=w;}this['ResetGLWindow']=function(){o();},this['ClearGLWindow']=function(){n();};function p(v){if(!c['clientWidth']||!c['clientHeight']||c['clientWidth']===0x0||c['clientHeight']===0x0)return;let w=!![],x=new b['Matrix4']()['copy'](c['projectionMatrixSrc']),y=a['Data']['GetBBox']();if(a['Grid']['ShowCustomLevelGrid']){let D=a['Grid']['GetFrameBBox']();D!==undefined&&(y['min']['min'](D['min']),y['max']['max'](D['max']),y['update']());}v!==undefined&&(y=new b['BBox']()['copy'](v));let z=y['center'],A=y['radius'],B=y['radius'];a['DemoType']===0x6&&(B*=0x5);if(A<=0x0)return![];const C=c['clientWidth']/c['clientHeight'];if(c['perspectiveView']){const E=a['Util']['DegToRad'](c['fieldOfView']);c['near']=c['CustomNearPlaneDist'],c['far']=c['CustomFarPlaneDist'],c['cameraPosition']['set'](0x0,0x0,c['viewDistance']),c['cameraTarget']['set'](0x0,0x0,0x0),c['cameraUp']['set'](0x0,0x1,0x0);let F=new b['Vector3']();F['copy'](c['cameraPosition']);let G=[new b['Vector3'](y['min']['x'],y['min']['y'],y['min']['z']),new b['Vector3'](y['min']['x'],y['min']['y'],y['max']['z']),new b['Vector3'](y['min']['x'],y['max']['y'],y['min']['z']),new b['Vector3'](y['min']['x'],y['max']['y'],y['max']['z']),new b['Vector3'](y['max']['x'],y['min']['y'],y['min']['z']),new b['Vector3'](y['max']['x'],y['min']['y'],y['max']['z']),new b['Vector3'](y['max']['x'],y['max']['y'],y['min']['z']),new b['Vector3'](y['max']['x'],y['max']['y'],y['max']['z'])];if(c['AutoZoomNearPlane']){let L=a['Control']['GetMode']();if(L!==b['Enum']['CONTROL_STATE']['WALKTHROUGH']&&L!==b['Enum']['CONTROL_STATE']['FLY']){let M=new b['Vector3']()['copy'](F),N=new b['Vector3']()['subVectors'](c['cameraTarget'],F);N['normalize']();let O=!![],P=0x0,Q=[];if(N['x']!==0x0||N['y']!==0x0||N['z']!==0x0)for(let R=0x0;R<0x8;++R){Q[R]=new b['Vector3']()['copy'](G[R])['applyMatrix4'](c['cameraMatrix']);let S=new b['Vector3']()['subVectors'](Q[R],M)['length'](),T=new b['Vector3']()['subVectors'](Q[R],M);T['normalize']();let U=N['dot'](T);S=S*U,O?(P=S,O=![]):P=Math['min'](P,S);}if(!O){let V=c['ZoomNearPlaneDist'];if(P<V){let W=V*0.01;c['cameraMatrix']['translate'](0x0,0x0,P-(V+W)),p();return;}}}}let H=0x0;{let X=Math['min'](Math['max'](c['viewDistance']/a['Data']['GetUnitValue'](0x3e8),A/a['Data']['GetUnitValue'](0x3e8)),a['Data']['GetUnitValue'](0x64));c['nearZoom']=X;let Y=Math['min'](Math['max'](c['viewDistance']/a['Data']['GetUnitValue'](0x3e8),B/a['Data']['GetUnitValue'](0x3e8)),a['Data']['GetUnitValue'](0x64));H=Y;let Z=new b['Vector3']()['copy'](z);Z['applyMatrix4'](c['cameraMatrix']);let a0=new b['Vector3']()['subVectors'](c['cameraTarget'],F);a0['normalize']();let a1=new b['Vector3']()['subVectors'](Z,F);a1['normalize']();let a2=new b['Vector3']()['subVectors'](Z,F)['length'](),a3=a0['dot'](a1);a2=a2*a3,Y=Math['max'](Y,a2-B),c['near']=Y;}{let a4=B,a5=new b['Vector3']()['copy'](F),a6=new b['Vector3']()['subVectors'](c['cameraTarget'],a5);a6['normalize']();for(let a7=0x0;a7<0x8;++a7){G[a7]['applyMatrix4'](c['cameraMatrix']);let a8=new b['Vector3']()['subVectors'](G[a7],a5)['length'](),a9=new b['Vector3']()['subVectors'](G[a7],a5);a9['normalize']();let aa=a6['dot'](a9);a8=a8*Math['abs'](aa),a4=Math['max'](a4,a8);}c['far']=B/a['Data']['GetUnitValue'](0x3e8)+a4;}!c['AutoNearFarPlane']&&(c['near']=c['CustomNearPlaneDist'],c['far']=c['CustomFarPlaneDist']);if(a['Avatar']['ShowAvatar']){let ab=a['Control']['GetMode']();ab===b['Enum']['CONTROL_STATE']['WALKTHROUGH']&&(c['near']=Math['min'](c['near'],H));}let I=new b['Matrix4']()['perspective'](E,C,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=I,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']);let J=new b['Vector3']()['copy'](z)['multiplyScalar'](-0x1),K=new b['Matrix4']()['lookAt'](F,c['cameraTarget'],c['cameraUp']);c['viewMatrix']=new b['Matrix4']()['getInverse'](K),c['projectionMatrix']['multiply'](c['viewMatrix']);}else{let ac=c['cameraZoom'],ad=A*c['viewDistanceFactor']*ac,ae=A*c['viewDistanceFactor']*ac;C>0x1?ad*=C:ae/=C;let af=-ad/0x2,ag=ad/0x2,ah=-ae/0x2,ai=ae/0x2;const aj=c['cameraMatrix']['multiplyVector'](z);c['near']=-B*0x5,c['far']=B*0x5,c['near']-=aj['z'],c['far']-=aj['z'];let ak=new b['Matrix4']()['orthographic'](af,ag,ah,ai,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=ak,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']),c['viewMatrix']=new b['Matrix4'](),c['viewMatrix']['copy'](c['cameraMatrix']);}if(y['radius']===0x0)c['cameraMatrix']['identity']();c['UpdateGLWindow'](undefined),q();if(c['projectionMatrixSrc']['equals'](x))w=![];return w;};this['ResizeGLWindow']=function(v){return p(v);},this['UpdateGLWindow']=function(v){v===undefined&&(v=new b['Matrix4']()['copy'](c['cameraMatrix'])),c['matModel']=new b['Matrix4']()['copy'](v),c['matMV']=new b['Matrix4']()['copy'](v),c['matMVP']=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['matMV']);},this['CopyMultiCameraMatrix']=function(v){c['cameraMatrix']['copy'](v['cameraMatrix']),c['viewMatrix']['copy'](v['viewMatrix']),c['cameraZoom']=v['cameraZoom'],c['ResizeGLWindow']();};function q(){let v=c['clientWidth'],w=c['clientHeight'],x=new b['Matrix4']()['orthographic'](0x0,v,w,0x0,-0x3e8,0x3e8);c['screenProjectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']['elements']=x;}function r(v){let w=new b['Vector3']()['copy'](c['pivot']),x=new b['Vector3']()['copy'](w),y=new b['Matrix4']()['copy'](c['matMVP']),z=s(y,x);const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight']();if(!c['lockPivot']){if(z['x']<0x0||z['x']>A||z['y']<0x0||z['y']>B){let K=new b['Vector3'](A/0x2,B/0x2,z['z']);z['copy'](K);let L=t(y,K);c['SetPivot'](L),w['copy'](c['pivot']);}}c['cameraZoom']*=v;c['perspectiveView']&&c['cameraMatrix']['translate'](0x0,0x0,c['viewDistance']*(0x1-v)/0x2);let C=new b['Vector3']()['copy'](w);if(C['z']>=c['viewDistance']&&c['perspectiveView'])return;p();let D=new b['Vector3']()['copy'](w),E=s(c['matMVP'],D),F=new b['Vector3'](z['x'],z['y'],E['z']),G=new b['Vector3'](E['x'],E['y'],E['z']),H=t(c['projectionMatrix'],F),I=t(c['projectionMatrix'],G),J=new b['Vector3']()['subVectors'](H,I);c['cameraMatrix']['translate'](J['x'],J['y'],J['z']),p();}this['MulViewDistance']=function(v){r(v);};let s=function(v,w){let x=new b['Vector3']()['copy'](w);x['applyMatrix4'](v);let y=new b['Vector3']();return y['x']=c['clientWidth']*(x['x']+0x1)*0.5,y['y']=c['clientHeight']*(0x1-(x['y']+0x1)*0.5),y['z']=x['z'],y;};this['world2ScreenWithMatrix']=function(v,w){return s(v,w);};let t=function(v,w){let x=new b['Vector3']();x['x']=w['x']/c['clientWidth']*0x2-0x1,x['y']=-(w['y']/c['clientHeight']*0x2-0x1),x['z']=w['z'];let y=new b['Matrix4']()['getInverse'](v);return x['applyMatrix4'](y),x;};this['screen2WorldWithMatrix']=function(v,w){return t(v,w);},this['SetPerspectiveView']=function(v){if(a['Camera']['perspectiveView']===v)return;a['Shader']['UpdateShader']();if(v){let w=new b['Vector3']()['copy'](c['pivot']);w=c['cameraMatrix']['multiplyVector'](w);let x=a['Util']['DegToRad'](c['fieldOfView']/0x2),y=c['viewDistance']-w['z'];const z=y/c['viewDistance']/Math['tan'](x);c['cameraMatrix']['translate'](0x0,0x0,z);}else{let A=a['Camera']['GetPerspectiveNeaPlane'](),B=new b['Vector3']()['copy'](c['pivot']);B=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](B);let C=new b['Plane']();C['setComponents'](A[0x0],A[0x1],A[0x2],A[0x3]);if(a['Util']['IsRenderReivewNearPlane'](B,A)){let F=new b['Matrix4']()['copy'](c['matMVP']),G=c['world2ScreenWithMatrix'](F,B);const H=a['Renderer']['GetSizeWidth'](),I=a['Renderer']['GetSizeHeight']();!(G['x']>=0x0&&G['x']<=H&&G['y']>=0x0&&G['y']<=I)&&(G['x']=H*0.5,G['y']=I*0.5,B=c['screen2WorldWithMatrix'](F,G));}const D=Math['abs'](C['distanceToPoint'](B));let E=a['Util']['DegToRad'](c['fieldOfView']/0x2);c['cameraZoom']=D/c['viewDistance']*Math['tan'](E);}a['Camera']['perspectiveView']=v,a['Camera']['ResizeGLWindow'](),a['ViewRefresh']();},this['GetPerspectiveNeaPlane']=function(){let v=[0x1,0x0,0x0,0x0];{let w=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),x=new b['Matrix4']()['getInverse'](w),y=x['multiplyVector'](a['Camera']['cameraPosition']),z=x['multiplyVector'](a['Camera']['cameraTarget']),A=a['Camera']['near'],B=new b['Vector3']()['subVectors'](z,y);B['normalize'](),v[0x0]=B['x'],v[0x1]=B['y'],v[0x2]=B['z'];let C=new b['Vector3']()['addVectors'](y,B['multiplyScalar'](A));v[0x3]=-(v[0x0]*C['x']+v[0x1]*C['y']+v[0x2]*C['z']);}return v;},this['ViewTopPlan']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o();let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewBottomPlan']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o();let z=new b['Matrix4']()['makeRotationX'](3.141592654);z['multiply'](c['cameraMatrix']),c['cameraMatrix']['copy'](z);let A=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-A['x'],x['y']-A['y'],x['z']-A['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let B=c['GetCameraData']();u(v,B,l);}},this['ViewFrontSection']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewBackSection']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewRightElevation']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewLeftElevation']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISOPlus']=function(){if(c['LockCamera'])return;let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):(c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0));let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISOMinus']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4*0x5,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewCustom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());if(![]){let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];o();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x2d,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']);let z=new b['Vector3'](0x0,0x118c30,0x0),A=new b['Matrix4']();A['makeTranslation'](z['x'],z['y'],z['z']);let B=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']);a['Camera']['cameraMatrix']['multiplyMatrices'](A,B);}else{if(a['DemoType']===0x6){let C=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),D=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](3.141592654*0.25,0x0,0x0);let E=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=D,c['cameraMatrix']['translate'](C['x']-E['x'],C['y']-E['y'],C['z']-E['z']);}else{let F=new b['Vector3']();if(c['pivot']!==undefined)F['copy'](c['pivot']);let G=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](F)),H=c['cameraZoom'];o(),c['cameraMatrix']['copy'](i);let I=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](F));c['cameraZoom']=H,c['cameraMatrix']['translate'](G['x']-I['x'],G['y']-I['y'],G['z']-I['z']),c['pivot']=F;}}p(),a['ViewRefresh']();if(c['cameraAnimation']){let J=c['GetCameraData']();u(v,J,l);}},this['ViewCustomMatrix']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());{let w=c['cameraZoom'];o(),c['cameraMatrix']['copy'](i),c['cameraZoom']=w;}p(),a['ViewRefresh']();if(c['cameraAnimation']){let x=c['GetCameraData']();u(v,x,l);}},this['ViewISOLeftFrontBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISOLeftFrontTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISOLeftBackBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISOLeftBackTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISORightFrontBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISORightFrontTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISORightBackBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewISORightBackTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewLeftFrontSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewLeftBackSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewLeftBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewLeftTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewRightFrontSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewRightBackSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewRightBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewRightTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewFrontBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewFrontTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewBackBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['ViewBackTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Vector3']();if(c['pivot']!==undefined)w['copy'](c['pivot']);let x=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w)),y=c['cameraZoom'];o(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](new b['Vector3']()['copy'](w));c['cameraZoom']=y,c['cameraMatrix']['translate'](x['x']-z['x'],x['y']-z['y'],x['z']-z['z']),c['pivot']=w,p(),a['ViewRefresh']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,l);}},this['CameraRotate']=function(v,w){let x=new b['Matrix4']()['makeRotationX'](v['x']),y=new b['Matrix4']()['makeRotationY'](v['y']),z=new b['Matrix4']()['makeRotationZ'](v['z']);if(w===undefined)w=new b['Vector3']()['copy'](c['pivot']);if(a['FixZAxis']){if(c['useYUp']){let A=new b['Matrix4']()['copy'](c['matMV']);{let E=new b['Matrix4']()['copy'](A);E['setPosition'](new b['Vector3'](0x0,0x0,0x0));let F=new b['Vector3'](0x0,0x0,0x1),G=new b['Vector3'](0x0,0x0,0x0);F['applyMatrix4'](E),G['applyMatrix4'](E);if(F['y']<G['y'])z=new b['Matrix4']()['makeRotationZ'](-v['z']);}let B=new b['Matrix4'](),C=new b['Matrix4']();{let H=new b['Vector3']()['copy'](w);H['applyMatrix4'](A);let I=new b['Matrix4'](),J=new b['Vector3']()['copy'](H)['multiplyScalar'](-0x1);I['setPosition'](J);let K=new b['Matrix4']()['copy'](x),L=new b['Matrix4']()['setPosition'](H),M=new b['Matrix4']()['multiplyMatrices'](K,I);B=new b['Matrix4']()['multiplyMatrices'](L,M);}{let N=new b['Vector3']()['copy'](w),O=new b['Matrix4'](),P=new b['Vector3']()['copy'](N)['multiplyScalar'](-0x1);O['setPosition'](P);let Q=new b['Matrix4']()['copy'](y),R=new b['Matrix4']()['setPosition'](N),S=new b['Matrix4']()['multiplyMatrices'](Q,O);C=new b['Matrix4']()['multiplyMatrices'](R,S);}if(c['useUpVectorFixRotateVAngleRange']){let T=new b['Matrix4']()['multiplyMatrices'](A,C),U=new b['Matrix4']()['multiplyMatrices'](B,T),V=new b['Vector3'](0x0,0x1,0x0),W=new b['Matrix4']()['copy'](U);W['setPosition'](new b['Vector3'](0x0,0x0,0x0)),V['applyMatrix4'](W);let X=Math['acos'](V['y']),Y=d*Math['PI']/0xb4,Z=e*Math['PI']/0xb4;if(V['z']<0x0)X*=-0x1;if(X<Y){v['x']=Y-X+v['x'],c['CameraRotate'](v);return;}if(X>Z){v['x']=Z-X+v['x'],c['CameraRotate'](v);return;}}let D=new b['Matrix4']()['multiplyMatrices'](c['cameraMatrix'],C);c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](B,D);}else{let a0=new b['Matrix4']()['copy'](c['matMV']);{let a4=new b['Matrix4']()['copy'](a0);a4['setPosition'](new b['Vector3'](0x0,0x0,0x0));let a5=new b['Vector3'](0x0,0x0,0x1),a6=new b['Vector3'](0x0,0x0,0x0);a5['applyMatrix4'](a4),a6['applyMatrix4'](a4);if(a5['y']<a6['y'])z=new b['Matrix4']()['makeRotationZ'](-v['z']);if(c['useUpVectorFixRotateVAngleRange']){let a7=Math['acos'](a5['y']),a8=d*Math['PI']/0xb4,a9=e*Math['PI']/0xb4;if(a5['z']<0x0)a7*=-0x1;a7-v['x']<a8&&(v['x']=a8+v['x']-a7),a7-v['x']>a9&&(v['x']=a9-a7+v['x']),x=new b['Matrix4']()['makeRotationX'](v['x']);}}let a1=new b['Matrix4'](),a2=new b['Matrix4']();{let aa=new b['Vector3']()['copy'](w);aa['applyMatrix4'](a0);let ab=new b['Matrix4'](),ac=new b['Vector3']()['copy'](aa)['multiplyScalar'](-0x1);ab['setPosition'](ac);let ad=new b['Matrix4']()['copy'](x),ae=new b['Matrix4']()['setPosition'](aa),af=new b['Matrix4']()['multiplyMatrices'](ad,ab);a1=new b['Matrix4']()['multiplyMatrices'](ae,af);}{let ag=new b['Vector3']()['copy'](w),ah=new b['Matrix4'](),ai=new b['Vector3']()['copy'](ag)['multiplyScalar'](-0x1);ah['setPosition'](ai);let aj=new b['Matrix4']()['copy'](z),ak=new b['Matrix4']()['setPosition'](ag),al=new b['Matrix4']()['multiplyMatrices'](aj,ah);a2=new b['Matrix4']()['multiplyMatrices'](ak,al);}if(c['useUpVectorFixRotateVAngleRange']){let am=new b['Matrix4']()['multiplyMatrices'](a0,a2),an=new b['Matrix4']()['multiplyMatrices'](a1,am),ao=new b['Vector3'](0x0,0x0,0x1),ap=new b['Matrix4']()['copy'](an);ap['setPosition'](new b['Vector3'](0x0,0x0,0x0)),ao['applyMatrix4'](ap);let aq=Math['acos'](ao['y']),ar=d*Math['PI']/0xb4,as=e*Math['PI']/0xb4;if(ao['z']<0x0)aq*=-0x1;if(aq<ar){v['x']=ar-aq+v['x'],c['CameraRotate'](v);return;}if(aq>as){v['x']=as-aq+v['x'],c['CameraRotate'](v);return;}}let a3=new b['Matrix4']()['multiplyMatrices'](c['cameraMatrix'],a2);c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](a1,a3);}}else{if(c['FixWorldAxis']){c['CameraRotateByWorldAxis'](c['WorldAxis'],v);return;}else{let at=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['multiplyMatrices'](x,y),z);c['CameraRotateByMatrix'](at,w);}}},this['CameraRotateByWorldAxis']=function(v,w){let x=new b['Matrix4']()['copy'](c['matMV']);x['setPosition'](new b['Vector3'](0x0,0x0,0x0));v===undefined&&(v=c['WorldAxis']);let y=new b['Vector3']()['copy'](v),z=new b['Vector3'](0x0,0x0,0x0);y['applyMatrix4'](x),z['applyMatrix4'](x);let A=new b['Vector3']()['subVectors'](y,z);A['normalize']();let B=A['dot'](w),C=new b['Matrix4']()['makeRotationAxis'](A,B);c['CameraRotateByMatrix'](C);},this['CameraRotateByMatrix']=function(v,w){if(w===undefined)w=a['Camera']['pivot'];let x=new b['Vector3']()['copy'](w);x['applyMatrix4'](c['matMV']);let y=new b['Matrix4']()['setPosition'](x),z=new b['Vector3']()['copy'](x)['multiplyScalar'](-0x1),A=new b['Matrix4']()['setPosition'](z),B=new b['Matrix4']()['multiplyMatrices'](v,A),C=new b['Matrix4']()['multiplyMatrices'](y,B);c['cameraPosition']['applyMatrix4'](C),c['cameraTarget']['applyMatrix4'](v),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](v),c['cameraUp']['normalize'](),c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](C,a['Camera']['cameraMatrix']);},this['CameraRotateWithMV']=function(v,w){c['cameraPosition']['applyMatrix4'](v),c['cameraTarget']['applyMatrix4'](v),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](v),c['cameraUp']['normalize']();},this['CameraOrbit']=function(v){},this['CameraTranslate']=function(v){let w=new b['Matrix4']();w['makeTranslation'](v['x'],v['y'],v['z']);if(a['FixZAxis']&&c['useCameraUpVectorMinPosition']&&c['perspectiveView']){let x=new b['Matrix4']()['copy'](c['cameraMatrix']);x['multiplyMatrices'](w,x);let y=new b['Matrix4']()['getInverse'](x),z=y['multiplyVector'](c['cameraPosition']);z['z']<f&&w['makeTranslation'](v['x'],v['y']-(f-z['z']),v['z']);}c['CameraTranslateByMatrix'](w);},this['CameraTranslateByMatrix']=function(v){let w=new b['Matrix4']()['copy'](c['cameraMatrix']);c['cameraMatrix']['multiplyMatrices'](v,w);},this['CameraZoomInOut']=function(v,w){let x=c['cameraZoomRatio'];a['Configuration']['Control']['Zoom']['Ratio']!==undefined&&(x=a['Configuration']['Control']['Zoom']['Ratio']);let y=w;if(w===undefined)w=0x1;if(c['perspectiveView']){let z=new b['Vector3']()['copy'](c['pivot']),A=c['GetPerspectiveEyePos'](),B=new b['Vector3']()['subVectors'](z,A),C=B['length']();if(C<0x0)C=0x0;let D=C-c['nearZoom']*1.5;D=Math['abs'](D);let E=D*y;y=E/c['viewDistance'];let F=a['Configuration']['Control']['Zoom']['MinZoomValue']*0.0001;if(y>0.5)y=0.5;else y<F&&(y=F);if(a['Configuration']['Control']['Zoom']['UseFixed'])y=x;}else y*=0.5;v?c['MulViewDistance']((0x1-y)*w):c['MulViewDistance'](0x1/((0x1-y)*w));},this['SetPivot']=function(v){if(c['lockPivot'])return;c['pivot']['copy'](v);},this['ViewBoxZoom']=function(v,w,x,y){if(v===x||w===y)return;let z;c['cameraAnimation']&&(z=c['GetCameraData']());const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight'](),C=(x-v)/A,D=(y-w)/B,E=Math['max'](C,D);if(c['perspectiveView']){let F=new b['Vector3']()['copy'](c['pivot']),G=s(c['matMVP'],new b['Vector3']()['copy'](F)),H=new b['Vector3']()['copy'](G);H['x']=A/0x2,H['y']=B/0x2,G['x']=(v+x)/0x2,G['y']=(w+y)/0x2;let I=t(c['matMVP'],G),J=new b['Vector3']()['copy'](I)['applyMatrix4'](c['cameraMatrix']),K=c['viewDistance']-J['z'];const L=K,M=K*E,N=L-M;c['cameraMatrix']['translate'](0x0,0x0,N),p();{let O=s(c['matMVP'],new b['Vector3']()['copy'](F)),P,Q,R,S;P=new b['Vector3'](H['x'],H['y'],O['z']),Q=new b['Vector3'](O['x'],O['y'],O['z']),R=t(c['projectionMatrix'],P),S=t(c['projectionMatrix'],Q);let T=new b['Vector3']()['subVectors'](S,R);if(O['z']>0x1)T=T['multiplyScalar'](-0x1);c['cameraMatrix']['translate'](-T['x'],-T['y'],-T['z']),p();}}else{let U,V,W,X,Y;U=s(c['matMVP'],new b['Vector3']()),V=new b['Vector3'](A/0x2,B/0x2,U['z']),W=new b['Vector3']((v+x)/0x2,(w+y)/0x2,U['z']),X=t(c['projectionMatrix'],V),Y=t(c['projectionMatrix'],W);const Z=new b['Vector3']()['subVectors'](Y,X);c['cameraMatrix']['translate'](Z['x'],Z['y'],Z['z']),c['MulViewDistance'](E),p();}if(c['cameraAnimation']){let a0=c['GetCameraData']();u(z,a0,l);}},this['FocusViewBoxZoom']=function(v,w,x,y,z){let A;c['cameraAnimation']&&(A=c['GetCameraData']());let B=c['cameraAnimation'];c['cameraAnimation']=![],c['SetPivot'](z),c['ViewBoxZoom'](v,w,x,y),c['FocusPivot'](z),c['cameraAnimation']=B;if(c['cameraAnimation']){let C=c['GetCameraData']();u(A,C,l);}},this['FocusObject']=function(v,w,x){if(v['length']<=0x0)return;let y;c['cameraAnimation']&&(y=c['GetCameraData']());let z,A;if(a['useTree']){let E=a['Tree']['GetBodyIds'](v),F=a['Tree']['GetBBoxArrayID'](E);z=F['min'],A=F['max'];}else for(let G=0x0;G<v['length'];G++){const H=a['Data']['GetNodeData'](v[G]),I=a['Data']['GetBBoxFormMatrix'](H);G===0x0?(z=new b['Vector3']()['copy'](I['min']),A=new b['Vector3']()['copy'](I['max'])):(z['min'](I['min']),A['max'](I['max']));}if(z===undefined||A===undefined)return;let B=new b['BBox']([z['x'],z['y'],z['z'],A['x'],A['y'],A['z']]);if(B['radius']<0.000001)return;B=a['Clipping']['RebuildClippingBoundBox'](B);if(B===undefined)return;w!==undefined&&(B['min']['x']-=w,B['min']['y']-=w,B['min']['z']-=w,B['max']['x']+=w,B['max']['y']+=w,B['max']['z']+=w,B['update']());if(x===undefined)x=0x0;let C=B['radius']<0.000001?![]:!![],D=c['cameraAnimation'];c['cameraAnimation']=![];if(c['perspectiveView'])c['PerspectiveFocusCenter'](B,x),c['SetPivot'](B['center']);else{if(C){const J=a['Renderer']['GetSizeWidth'](),K=a['Renderer']['GetSizeHeight']();let L=a['Util']['GetBBox2Vertex'](B),M,N;for(let S=0x0;S<0x8;S++){L[S]=s(c['matMVP'],new b['Vector3']()['copy'](L[S])),S===0x0?(M=new b['Vector3']()['copy'](L[S]),N=new b['Vector3']()['copy'](L[S])):(M['min'](L[S]),N['max'](L[S]));}let O=k;O=a['Configuration']['Control']['FitMargineRate'],O+=x;const P=0x0;let Q=(N['x']-M['x'])*O+P,R=(N['y']-M['y'])*O+P;c['ViewBoxZoom'](M['x']-Q,M['y']-R,N['x']+Q,N['y']+R);}c['FocusPivot'](B['center']);}c['cameraAnimation']=D;if(c['cameraAnimation']){let T=c['GetCameraData']();u(y,T,l);}else a['ViewRefresh']();},this['FocusBBox']=function(v,w){if(v===undefined)return;let x;c['cameraAnimation']&&(x=c['GetCameraData']());if(w===undefined)w=0x0;let y=v['radius']<0.000001?![]:!![],z=c['cameraAnimation'];c['cameraAnimation']=![];if(c['perspectiveView'])c['PerspectiveFocusCenter'](v,w),c['SetPivot'](v['center']);else{if(y){const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight']();let C=a['Util']['GetBBox2Vertex'](v),D,E;for(let J=0x0;J<0x8;J++){C[J]=s(c['matMVP'],new b['Vector3']()['copy'](C[J])),J===0x0?(D=new b['Vector3']()['copy'](C[J]),E=new b['Vector3']()['copy'](C[J])):(D['min'](C[J]),E['max'](C[J]));}let F=k;F=a['Configuration']['Control']['FitMargineRate'],F+=w;const G=0x0;let H=(E['x']-D['x'])*F+G,I=(E['y']-D['y'])*F+G;c['ViewBoxZoom'](D['x']-H,D['y']-I,E['x']+H,E['y']+I);}c['FocusPivot'](v['center']);}c['cameraAnimation']=z;if(c['cameraAnimation']){let K=c['GetCameraData']();u(x,K,l);}else a['ViewRefresh']();},this['FocusPivot']=function(v){v!==undefined&&c['SetPivot'](v);let w;c['cameraAnimation']&&(w=c['GetCameraData']());const x=a['Renderer']['GetSizeWidth'](),y=a['Renderer']['GetSizeHeight']();let z,A,B,C,D;z=s(c['matMVP'],new b['Vector3']()['copy'](c['pivot'])),A=new b['Vector3']()['copy'](z),B=new b['Vector3'](x/0x2,y/0x2,z['z']),C=t(c['projectionMatrix'],A),D=t(c['projectionMatrix'],B);const E=new b['Vector3']()['subVectors'](D,C);c['cameraMatrix']['translate'](E['x'],E['y'],E['z']),p();if(c['cameraAnimation']){let F=c['GetCameraData']();u(w,F,l);}},this['FocusScreenObject']=function(v){if(v['length']<=0x0)return;let w;c['cameraAnimation']&&(w=c['GetCameraData']());let x,y;if(a['useTree']){let I=a['Tree']['GetBodyIds'](v),J=a['Tree']['GetBBoxArrayID'](I);x=J['min'],y=J['max'];}else for(let K=0x0;K<v['length'];K++){const L=a['Data']['GetNodeData'](v[K]),M=a['Data']['GetBBoxFormMatrix'](L);K===0x0?(x=new b['Vector3']()['copy'](M['min']),y=new b['Vector3']()['copy'](M['max'])):(x['min'](M['min']),y['max'](M['max']));}if(x===undefined||y===undefined)return;let z=new b['BBox']([x['x'],x['y'],x['z'],y['x'],y['y'],y['z']]);const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight']();let C,D,E,F,G;C=s(c['matMVP'],new b['Vector3']()['copy'](z['center'])),D=new b['Vector3']()['copy'](C),E=new b['Vector3'](A/0x2,B/0x2,C['z']),F=t(c['projectionMatrix'],D),G=t(c['projectionMatrix'],E);const H=new b['Vector3']()['subVectors'](G,F);c['cameraMatrix']['translate'](H['x'],H['y'],H['z']),p();if(c['cameraAnimation']){let N=c['GetCameraData']();u(w,N,l);}c['FocusPivot'](z['center']);},this['FitAll']=function(){let v=undefined,w=undefined,x=[];for(let y=0x0;y<a['Data']['Objects']['length'];y++){let z=a['Data']['Objects'][y];for(let A=0x0;A<z['tag']['length'];A++){let B=z['tag'][A],C=a['Data']['ShapeAction']['GetAction'](B['object']['id_file'],B['origin_id']);if(C['visible']===!![])x['push'](B);}}if(x['length']>0x0){if(a['Clipping']['IsClipping']())for(let D=0x0;D<x['length'];D++){const E=a['Data']['GetBBoxFormMatrix']([x[D]]);let F=a['Clipping']['RebuildClippingBoundBox'](E);if(F===undefined){continue;v===undefined?(v=new b['Vector3']()['copy'](E['min']),w=new b['Vector3']()['copy'](E['max'])):(v['min'](E['min']),w['max'](E['max']));}else v===undefined?(v=new b['Vector3']()['copy'](F['min']),w=new b['Vector3']()['copy'](F['max'])):(v['min'](F['min']),w['max'](F['max']));}else{const G=a['Data']['GetBBoxFormMatrix'](x);v=new b['Vector3']()['copy'](G['min']),w=new b['Vector3']()['copy'](G['max']);}}if(v!==undefined&&w!==undefined){let H=new b['BBox']([v['x'],v['y'],v['z'],w['x'],w['y'],w['z']]);c['FocusBBox'](H);}else c['FocusBBox'](a['Data']['ObjectsBBox']);c['ResizeGLWindow']();},this['ResetView']=function(){c['ResetGLWindow'](),c['InitDirection'](),c['ResizeGLWindow']();};function u(v,w,x){let y=![],z;c['CameraUpdateWithCameraData'](v),a['Camera']['ResizeGLWindow']();let A=new Date()['getTime'](),B=function(){let C=new Date()['getTime']()-A,D=C/0x3e8/x;if(D>=0x1){D=0x1,y=!![],c['CameraUpdateWithCameraData'](w),a['Camera']['ResizeGLWindow'](),clearInterval(z);return;}{let E=a['Util']['QuaternionInterpolation'](v['matrix_camera'],w['matrix_camera'],D);a['Camera']['cameraMatrix']['copy'](E);}{let F=v['distance']*(0x1-D),G=w['distance']*D;a['Camera']['viewDistance']=F+G;}{let H=v['zoom']*(0x1-D),I=w['zoom']*D;a['Camera']['cameraZoom']=H+I;}a['Camera']['ResizeGLWindow']();};z=setInterval(function(){B(),a['ViewRefresh']();},0xf);};this['SetZAxis2Up_v1']=function(){const v=a['Renderer']['GetSizeWidth'](),w=a['Renderer']['GetSizeHeight']();let x=new b['Vector3'](0x0,0x1,0x0),y=new b['Vector3'](0x0,0x0,0x1),z=new b['Matrix4']()['copy'](c['cameraMatrix']);z['setPosition'](new b['Vector3']()),y['applyMatrix4'](z),y['normalize']();let A=x['dot'](y),B=Math['acos'](A),C=new b['Vector3']()['crossVectors'](y,x);C['multiplyScalar'](B);let D=C['x'],E=C['y'],F=C['z'],G=new b['Matrix4']()['makeRotationX'](D),H=new b['Matrix4']()['makeRotationY'](E),I=new b['Matrix4']()['makeRotationZ'](F),J=new b['Matrix4']();{let K=new b['Matrix4']()['copy'](c['cameraMatrix']),L=new b['Vector3']()['copy'](c['pivot']);L['applyMatrix4'](K);let M=new b['Matrix4'](),N=new b['Vector3']()['copy'](L)['multiplyScalar'](-0x1);M['setPosition'](N);let O=new b['Matrix4']()['multiplyMatrices'](G,H);O=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['copy'](O),I);let P=new b['Matrix4']()['setPosition'](L),Q=new b['Matrix4']()['multiplyMatrices'](O,M);J=new b['Matrix4']()['multiplyMatrices'](P,Q);}c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](J,c['cameraMatrix']),c['ResizeGLWindow']();},this['SetZAxis2Up']=function(){const v=a['Renderer']['GetSizeWidth'](),w=a['Renderer']['GetSizeHeight']();let x=new b['Vector3'](0x0,0x1,0x0),y=t(c['matMVP'],new b['Vector3'](v/0x2,w/0x2,0.5)),z=t(c['matMVP'],new b['Vector3'](v/0x2,w,0.5)),A=new b['Vector3']()['subVectors'](z,y),B=A['length']();if(!(B<=0x0||B>=0x0))return;let C=new b['Matrix4']()['copy'](c['cameraMatrix']),D=new b['Vector3']()['copy'](y)['applyMatrix4'](C),E=new b['Vector3']()['copy'](new b['Vector3'](0x0,0x0,-B)['add'](y))['applyMatrix4'](C),F=new b['Vector3']()['copy'](new b['Vector3'](0x0,0x0,B)['add'](y))['applyMatrix4'](C);E=E['sub'](D),E['normalize']();if(E['z']>0.9999999)return;let G=new b['Vector3'](0x0,0x0,0x1);G['copy'](E);let H=new b['Vector3']()['crossVectors'](x,G),I=H['x'],J=H['y'],K=H['z'];{let L=new b['Matrix4']()['makeRotationX'](I),M=new b['Matrix4']()['makeRotationY'](J),N=new b['Matrix4']()['makeRotationZ'](K),O=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['multiplyMatrices'](L,M),N);c['CameraRotateByMatrix'](O,c['pivot']);}c['ResizeGLWindow']();},this['GetFrustumCornersWorldSpace']=function(v){let w=new b['Matrix4']()['copy'](v),A=new b['Matrix4']()['copy'](c['matMV']),B=new b['Matrix4']()['getInverse'](w['multiply'](A)),C=[];for(let D=0x0;D<0x2;++D){for(let E=0x0;E<0x2;++E){for(let F=0x0;F<0x2;++F){let G=B['multiplyVector'](new b['Vector3'](0x2*D-0x1,0x2*E-0x1,0x2*F-0x1));C['push'](G);}}}return C;},this['GetMVMatrixFormPosQuat']=function(v,w){let x=new b['Matrix4']();x['makeRotationFromQuaternion'](w),x['translate'](v['x'],v['y'],v['z']);let y=new b['Matrix4']()['getInverse'](x);return y['translate'](0x0,0x0,a['Camera']['viewDistance']),y;},this['GetEyePos']=function(){let v=new b['Matrix4']()['copy'](c['cameraMatrix']);return v['translate'](0x0,0x0,-a['Camera']['viewDistance']),v=new b['Matrix4']()['getInverse'](v),v['getTranslate']();},this['GetEyeRotationMat']=function(){let v=new b['Matrix4']()['copy'](c['cameraMatrix']);v['translate'](0x0,0x0,-a['Camera']['viewDistance']),v=new b['Matrix4']()['getInverse'](v);let w=new b['Matrix4']();return w['extractRotation'](v);},this['GetCameraData']=function(){let v=a['Data']['CameraDataItem']();v['perspectiveView']=c['perspectiveView'],v['matrix_view']['copy'](c['viewMatrix']),v['matrix_camera']['copy'](c['cameraMatrix']),v['position']['copy'](c['cameraPosition']),v['up']['copy'](c['cameraUp']),v['target']['copy'](c['cameraTarget']),v['zoom']=c['cameraZoom'],v['distance']=c['viewDistance'];if(v['pivot']!==undefined)v['pivot']['copy'](c['pivot']);const w=a['Data']['GetBBox']();return w&&(v['cameraMin']['copy'](w['min']),v['cameraMax']['copy'](w['max'])),v;},this['CameraUpdateWithCameraData']=function(v){c['perspectiveView']!==v['perspectiveView']&&a['Shader']['UpdateShader']();c['perspectiveView']=v['perspectiveView'],c['viewMatrix']=new b['Matrix4']()['copy'](v['matrix_view']),c['cameraMatrix']=new b['Matrix4']()['copy'](v['matrix_camera']),c['cameraPosition']=new b['Vector3']()['copy'](v['position']),c['cameraUp']=new b['Vector3']()['copy'](v['up']),c['cameraTarget']=new b['Vector3']()['copy'](v['target']),c['cameraZoom']=v['zoom'],c['viewDistance']=v['distance'];if(v['pivot']!==undefined)c['SetPivot'](v['pivot']);if(v['cameraMin']&&v['cameraMax']){const w=new b['BBox']([v['cameraMin']['x'],v['cameraMin']['y'],v['cameraMin']['z'],v['cameraMax']['x'],v['cameraMax']['y'],v['cameraMax']['z']]);if(w['radius']>0x0){const x=a['Data']['GetBBox'](),y=w['radius']/x['radius'];c['cameraZoom']*=y;}}},this['GetBackupCameraList']=function(){return Array['from'](g['values']());},this['Backup']=function(){let v=c['GetCameraData']();return g['set'](v['id'],v),v['id'];},this['SetBackup']=function(v){g['set'](v['id'],v);},this['GetBackupData']=function(v){if(g['has'](v))return g['get'](v);return undefined;},this['DeleteBackupData']=function(v){g['has'](v)&&g['delete'](v);for(let w=a['Data']['Review']['GetSnapshotList']['length']-0x1;w>=0x0;w--){if(a['Data']['Review']['GetSnapshotList'][w]['id']!==v)continue;a['Data']['Review']['GetSnapshotList']['splice'](w,0x1);}a['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Review']['Changed'],a['Data']['Reviews']);},this['Rollback']=function(v){if(g['has'](v)){let w=g['get'](v);c['CameraUpdateWithCameraData'](w),c['ResizeGLWindow'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();}},this['GetSnapshotParam']=function(v){if(g['has'](v)){let w=g['get'](v),x='';x+=w['id'],x+='';for(let y=0x0;y<w['viewMatrix']['elements']['length'];y++){x+=y===0x0?'':''+w['viewMatrix']['elements'][y];}x+='';for(let z=0x0;z<w['cameraMatrix']['elements']['length'];z++){x+=z===0x0?'':''+w['cameraMatrix']['elements'][z];}return x+='',x+=w['cameraPosition']['x'],x+=''+w['cameraPosition']['y'],x+=''+w['cameraPosition']['z'],x+='',x+=w['cameraUp']['x'],x+=''+w['cameraUp']['y'],x+=''+w['cameraUp']['z'],x+='',x+=w['cameraTarget']['x'],x+=''+w['cameraTarget']['y'],x+=''+w['cameraTarget']['z'],x+='',x+=w['cameraZoom'],x+='',x+=w['viewDistance'],x;}else return'';},this['SetSnapshotParam']=function(v){let w={'id':a['Data']['UUIDv4'](),'matrix_view':new b['Matrix4']()['copy'](c['viewMatrix']),'matrix_camera':new b['Matrix4']()['copy'](c['cameraMatrix']),'position':new b['Vector3']()['copy'](c['cameraPosition']),'up':new b['Vector3']()['copy'](c['cameraUp']),'target':new b['Vector3']()['copy'](c['cameraTarget']),'zoom':c['cameraZoom'],'distance':c['viewDistance']};if(g['has'](w['id'])){let x=g['get'](w['id']),y='';for(let z=0x0;z<x['viewMatrix']['elements']['length'];z++){y+=z===0x0?'':''+x['viewMatrix']['elements'][z];}y+='';for(let A=0x0;A<x['cameraMatrix']['elements']['length'];A++){y+=A===0x0?'':''+x['cameraMatrix']['elements'][A];}return y+='',y+=x['cameraPosition']['x'],y+=''+x['cameraPosition']['y'],y+=''+x['cameraPosition']['z'],y+='',y+=x['cameraUp']['x'],y+=''+x['cameraUp']['y'],y+=''+x['cameraUp']['z'],y+='',y+=x['cameraTarget']['x'],y+=''+x['cameraTarget']['y'],y+=''+x['cameraTarget']['z'],y+='',y+=x['cameraZoom'],y+='',y+=x['viewDistance'],y;}else return'';},this['SetBaseDirection']=function(v,w){h=v;if(w!==undefined)i['copy'](w);},this['SetBasePosition']=function(v){j=v;},this['InitDirection']=function(){if(c['LockCamera'])return;let v=c['cameraAnimation'];c['cameraAnimation']=![],o();switch(h){case b['Enum']['VIEW_MODES']['PlusX']:c['ViewRightElevation']();break;case b['Enum']['VIEW_MODES']['MinusX']:c['ViewLeftElevation']();break;case b['Enum']['VIEW_MODES']['PlusY']:c['ViewBackSection']();break;case b['Enum']['VIEW_MODES']['MinusY']:c['ViewFrontSection']();break;case b['Enum']['VIEW_MODES']['PlusZ']:c['ViewTopPlan']();break;case b['Enum']['VIEW_MODES']['MinusZ']:c['ViewBottomPlan']();break;case b['Enum']['VIEW_MODES']['PlusISO']:c['ViewISOPlus']();break;case b['Enum']['VIEW_MODES']['MinusISO']:c['ViewISOMinus']();break;case b['Enum']['VIEW_MODES']['CustomView']:c['ViewCustom']();break;case b['Enum']['VIEW_MODES']['CustomViewMatrix']:c['ViewCustomMatrix']();break;case b['Enum']['VIEW_MODES']['ISORightBackTop']:c['ViewISORightBackTop']();break;default:c['ViewISOPlus']();break;}c['cameraAnimation']=v;if(j!==undefined){let w=this['GetEyeRotationMat']()['getQuaternion'](),x=this['GetViewDirection'](),y=0x2710,z=new b['Vector3'](j['x']-x['x']*y,j['y']-x['y']*y,j['z']-x['z']*y),A=this['GetMVMatrixFormPosQuat'](z,w);c['pivot']=new b['Vector3'](j['x'],j['y'],j['z']),c['cameraMatrix']['elements']=A['elements'],c['ResizeGLWindow']();}a['DemoType']===0x7&&(c['cameraMatrix']['elements']=[0.7071067811140326,0.3535533906713978,-0.6123724357344226,0x0,-0.7071067812590625,0.3535533907765077,-0.6123724355062713,0x0,1.450300251031817e-10,0.8660254036777397,0.5000000001848081,0x0,100191.6328212468,-2660.8020471965115,1539916.0289263553,0x1],c['pivot']=new b['Vector3'](-72150.90578059915,72587.11443838813,-783.9936757500764),c['ResizeGLWindow']());if(c['perspectiveView']&&(a['Configuration']['Camera']['usePerspectiveScreenFit']||a['Configuration']['Camera']['UsePerspectiveScreenFit']))c['FocusBBox'](a['Data']['ObjectsBBox']);},this['GetCameraPos']=function(){if(c['perspectiveView']){let v=new b['Matrix4']()['multiplyMatrices'](c['viewMatrix'],c['cameraMatrix']);const w=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),x=new b['Matrix4']()['getInverse'](w);return x['multiplyVector'](new b['Vector3'](0x0,0x0,0x0));}else{let y=new b['Matrix4']()['copy'](c['cameraMatrix']);const z=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),A=new b['Matrix4']()['getInverse'](z);return A['multiplyVector'](new b['Vector3'](0x0,0x0,-0x1));}},this['GetViewDirection']=function(){const v=new b['Matrix4']()['copy'](c['matMVP']),w=new b['Matrix4']()['getInverse'](v);let x=undefined;if(c['perspectiveView'])x=c['GetPerspectiveEyePos']();else x=w['multiplyVector'](new b['Vector3'](0x0,0x0,0x0));let y=w['multiplyVector'](new b['Vector3'](0x0,0x0,0.5)),z=new b['Vector3']()['subVectors'](y,x);return z['normalize']();},this['GetSnapshotInfo']=function(){let v={'matrix_camera':new b['Matrix4']()['copy'](this['cameraMatrix']),'matrix_view':new b['Matrix4']()['copy'](this['viewMatrix']),'zoom':this['cameraZoom']};return v;},this['SetSnapshotInfo']=function(v){let w;c['cameraAnimation']&&(w=c['GetCameraData']());this['cameraMatrix']['copy'](v['matrix_camera']);if(v['matrix_view']!==undefined)this['viewMatrix']['copy'](v['matrix_view']);this['cameraZoom']=v['zoom'],this['ResizeGLWindow']();if(c['cameraAnimation']){let x=c['GetCameraData']();u(w,x,l);}else a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetCameraDirVector']=function(){let v=c['clientWidth'],w=c['clientHeight'],x=t(c['matMVP'],new b['Vector3'](v/0x2,w/0x2,0.5)),y=t(c['matMVP'],new b['Vector3'](v/0x2,w/0x2,0.4)),z=new b['Vector3']()['subVectors'](y,x);return z['normalize'](),z;},this['GetCameraUpVector']=function(){let v=c['clientWidth'],w=c['clientHeight'],x=t(c['matMVP'],new b['Vector3'](v/0x2,w/0x2,0.5)),y=t(c['matMVP'],new b['Vector3'](v/0x2,w/0x2-0xa,0.5)),z=new b['Vector3']()['subVectors'](y,x);return z['normalize'](),z;},this['PerspectiveFocusCenter']=function(v,w){let x=[];x['push'](v['min']),x['push'](v['max']);let y=c['GetCameraDirVector']()['multiplyScalar'](-0x1),z=c['GetCameraUpVector'](),A=a['Util']['DegToRad'](c['fieldOfView']),B=c['clientWidth']/c['clientHeight'],C=0.1;C=a['Configuration']['Control']['FitMargineRate'];if(w!==undefined)C+=w;if(a['DemoType']===0x6)A=A/B;let D=c['GetPerspectiveFitCamPos'](y,z,A,B,C,x['length']/0x2,x),E=c['GetPerspectiveEyePos'](),F=new b['Vector3']()['subVectors'](D,E),G=new b['Vector3']()['copy'](F)['normalize']();G=new b['Matrix4']()['copy'](c['cameraMatrix'])['transNormal'](G),F=new b['Vector3']()['copy'](G)['multiplyScalar'](F['length']()),c['cameraMatrix']['translate'](-F['x'],-F['y'],-F['z']),p(),a['Renderer']['Render']();},this['GetPerspectiveEyePos']=function(){let v=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),w=new b['Matrix4']()['getInverse'](v),x=w['multiplyVector'](a['Camera']['cameraPosition']);return x;},this['GetPerspectiveFitCamPos']=function(v,w,x,y,z,A,B){let C=new b['Vector3'](),D=new b['Vector3']()['copy'](v),E=new b['Vector3']()['copy'](w),F=new b['Vector3']()['crossVectors'](D,E),G=x,H=x;{let R=0x1/Math['tan'](x/0x2),S=Math['atan'](y/R);H=S*0x2;}H=H*(0x1-z),G=G*(0x1-z);let I=[],J=[new b['Vector3']()['copy'](F)['multiplyScalar'](-0x1),F,new b['Vector3']()['copy'](E)['multiplyScalar'](-0x1),E];{let T=new b['Matrix4']();T['makeRotationAxis2'](E,-H/0x2),J[0x0]=T['multiplyVector'](J[0x0]),T['makeRotationAxis2'](E,H/0x2),J[0x1]=T['multiplyVector'](J[0x1]),T['makeRotationAxis2'](F,G/0x2),J[0x2]=T['multiplyVector'](J[0x2]),T['makeRotationAxis2'](F,-G/0x2),J[0x3]=T['multiplyVector'](J[0x3]);for(let U=0x0;U<0x4;U++)I[U]=new b['Plane']()['setFromNormalAndCoplanarPoint'](J[U],new b['Vector3']());}let K=new b['Vector3'](),L=new b['Vector3'](),M=!![];{for(let V=0x0;V<0x4;V++){let W=0x2540be400,X=-0x2540be400;for(let Y=0x0;Y<A;Y++){let Z=B[Y*0x2+0x0],a0=B[Y*0x2+0x1],a1=[];a1['push'](new b['Vector3'](Z['x'],Z['y'],Z['z'])),a1['push'](new b['Vector3'](a0['x'],Z['y'],Z['z'])),a1['push'](new b['Vector3'](a0['x'],a0['y'],Z['z'])),a1['push'](new b['Vector3'](Z['x'],a0['y'],Z['z'])),a1['push'](new b['Vector3'](Z['x'],Z['y'],a0['z'])),a1['push'](new b['Vector3'](a0['x'],Z['y'],a0['z'])),a1['push'](new b['Vector3'](a0['x'],a0['y'],a0['z'])),a1['push'](new b['Vector3'](Z['x'],a0['y'],a0['z']));for(let a2=0x0;a2<0x8;a2++){let a3=I[V]['distanceToPoint'](a1[a2]);W=Math['min'](W,a3),X=Math['max'](X,a3),M?(M=![],K=new b['Vector3']()['copy'](a1[a2]),L=new b['Vector3']()['copy'](a1[a2])):(K['min'](a1[a2]),L['max'](a1[a2]));}}I[V]=new b['Plane']()['setFromNormalAndCoplanarPoint'](J[V],new b['Vector3']()['copy'](J[V])['multiplyScalar'](X));}}let N=new b['Vector3']()['addVectors'](K,L)['divideScalar'](0x2),O=new b['Vector3']()['subVectors'](L,K)['length']()/0x2,P=[],Q=0.0001;{let a4=new b['Vector3']()['copy'](E),a5=new b['Plane']()['setFromNormalAndCoplanarPoint'](a4,new b['Vector3']()),a6=new b['Vector3'](),a7=I[0x0]['projectPoint'](N,a6),a8=I[0x0]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N)),a9=I[0x1]['projectPoint'](N),aa=I[0x1]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N));a7=a5['projectPoint'](a7),a8=a5['projectPoint'](a8),a9=a5['projectPoint'](a9),aa=a5['projectPoint'](aa);let ab=new b['Vector3']()['subVectors'](a8,a7)['normalize'](),ac=new b['Vector3']()['subVectors'](aa,a9)['normalize'](),ad=new b['Vector3'](),ae=ad['toArray'](),af=a['Util']['GetVectorCrossPos'](a7['toArray'](),ab['toArray'](),a9['toArray'](),ac['toArray'](),ae,Q);if(!af)return N;P[0x0]=new b['Vector3']()['fromArray'](ae);}{let ag=new b['Vector3']()['copy'](F),ah=new b['Plane']()['setFromNormalAndCoplanarPoint'](ag,new b['Vector3']()),ai=I[0x2]['projectPoint'](N),aj=I[0x2]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N)),ak=I[0x3]['projectPoint'](N),al=I[0x3]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N));ai=ah['projectPoint'](ai),aj=ah['projectPoint'](aj),ak=ah['projectPoint'](ak),al=ah['projectPoint'](al);let am=new b['Vector3']()['subVectors'](aj,ai)['normalize'](),an=new b['Vector3']()['subVectors'](al,ak)['normalize'](),ao=new b['Vector3'](),ap=ao['toArray'](),aq=a['Util']['GetVectorCrossPos'](ai['toArray'](),am['toArray'](),ak['toArray'](),an['toArray'](),ap,Q);if(!aq)return N;P[0x1]=new b['Vector3']()['fromArray'](ap);}{let ar=new b['Vector3']()['copy'](D)['dot'](P[0x0]),as=new b['Vector3']()['copy'](D)['dot'](P[0x1]),at=new b['Plane']();if(ar<as)at=new b['Plane']()['setFromNormalAndCoplanarPoint'](D,P[0x0]);else at=new b['Plane']()['setFromNormalAndCoplanarPoint'](D,P[0x1]);let au=at['projectPoint'](P[0x0]),av=at['projectPoint'](new b['Vector3']()['copy'](E)['multiplyScalar'](O)['add'](P[0x0])),aw=at['projectPoint'](P[0x1]),ax=at['projectPoint'](new b['Vector3']()['copy'](F)['multiplyScalar'](O)['add'](P[0x1])),ay=new b['Vector3']()['subVectors'](av,au)['normalize'](),az=new b['Vector3']()['subVectors'](ax,aw)['normalize'](),aA=new b['Vector3'](),aB=aA['toArray'](),aC=a['Util']['GetVectorCrossPos'](au['toArray'](),ay['toArray'](),aw['toArray'](),az['toArray'](),aB,Q);if(!aC)return N;C=new b['Vector3']()['fromArray'](aB);}return C;},this['SetLockCameraUpAngle']=function(v){c['useUpVectorFixRotateVAngleRange']=v;},this['GetLockCameraUpAngle']=function(){return c['useUpVectorFixRotateVAngleRange'];},this['SetLockCameraUpAngleMinMax']=function(v,w){d=v,e=w;},this['GetScreen1PixelLength']=function(v){let w=c['GetViewDirection'](),x=new b['Vector3'](0x0,0x1,0x0);(w['y']<-0.9||w['y']>0.9)&&(x=new b['Vector3'](0x1,0x0,0x0));x['cross'](w),x['normalize']();let y=new b['Matrix4']()['copy'](c['matMVP']),z=new b['Vector3']()['copy'](v),A=new b['Vector3']()['addVectors'](v,new b['Vector3']()['copy'](x)['multiplyScalar'](0x64)),B=s(y,z),C=s(y,A),D=new b['Vector3']()['subVectors'](B,C)['length2D'](),E=0x64/D;return E;};}}export default Camera;