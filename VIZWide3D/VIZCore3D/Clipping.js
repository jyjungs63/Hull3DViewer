class Clipping{constructor(a,b){let c=this,d=new Map();function e(i){let j=a['Data']['ClipItem']();d['set'](j['id'],j);let k=h();j['itemType']=i;switch(j['itemType']){case b['Enum']['CLIPPING_MODES']['X']:{let l=a['Data']['ClipPlane']();l['normal']=new b['Vector3'](-0x1,0x0,0x0),l['center']['copy'](k['center']),j['planes']['push'](l);let m=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);m['enable']=![],m['center']['copy'](l['center']),m['axis']['x']['enable']=!![],m['axis']['x']['visible']=!![],m['axis']['x']['normal']['copy'](l['normal']),m['axis']['x']['normal']['multiplyScalar'](-0x1),m['axis']['y']['enable']=![],m['axis']['y']['visible']=!![],m['axis']['z']['enable']=![],m['axis']['z']['visible']=!![],m['rotate']['y']['enable']=!![],m['rotate']['y']['visible']=!![],m['rotate']['z']['enable']=!![],m['rotate']['z']['visible']=!![],a['Util']['GetXandYAxis'](new b['Vector3'](-0x1,0x0,0x0),m['axis']['z']['normal'],m['axis']['y']['normal']),m['object']=l,l['handle']=m;}break;case b['Enum']['CLIPPING_MODES']['Y']:{let n=a['Data']['ClipPlane']();n['normal']=new b['Vector3'](0x0,-0x1,0x0),n['center']['copy'](k['center']),j['planes']['push'](n);let o=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);o['enable']=![],o['center']['copy'](n['center']),o['axis']['y']['enable']=!![],o['axis']['y']['visible']=!![],o['axis']['y']['normal']['copy'](n['normal']),o['axis']['y']['normal']['multiplyScalar'](-0x1),o['axis']['x']['enable']=![],o['axis']['x']['visible']=!![],o['axis']['z']['enable']=![],o['axis']['z']['visible']=!![],o['rotate']['x']['enable']=!![],o['rotate']['x']['visible']=!![],o['rotate']['z']['enable']=!![],o['rotate']['z']['visible']=!![],a['Util']['GetXandYAxis'](new b['Vector3'](0x0,-0x1,0x0),o['axis']['x']['normal'],o['axis']['z']['normal']),o['object']=n,n['handle']=o;}break;case b['Enum']['CLIPPING_MODES']['Z']:{let p=a['Data']['ClipPlane']();p['normal']=new b['Vector3'](0x0,0x0,-0x1),p['center']['copy'](k['center']),j['planes']['push'](p);let q=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);q['enable']=![],q['center']['copy'](p['center']),q['axis']['z']['enable']=!![],q['axis']['z']['visible']=!![],q['axis']['z']['normal']['copy'](p['normal']),q['axis']['z']['normal']['multiplyScalar'](-0x1),q['axis']['x']['enable']=![],q['axis']['x']['visible']=!![],q['axis']['y']['enable']=![],q['axis']['y']['visible']=!![],q['rotate']['x']['enable']=!![],q['rotate']['x']['visible']=!![],q['rotate']['y']['enable']=!![],q['rotate']['y']['visible']=!![],a['Util']['GetXandYAxis'](new b['Vector3'](0x0,0x0,0x1),q['axis']['x']['normal'],q['axis']['y']['normal']),q['object']=p,p['handle']=q;}break;case b['Enum']['CLIPPING_MODES']['BOX']:{for(let r=0x0;r<0x6;r++){let s=a['Data']['ClipPlane']();j['planes'][r]=s;}{j['planes'][0x0]['normal']=new b['Vector3'](0x1,0x0,0x0),j['planes'][0x0]['center']=new b['Vector3'](k['min']['x'],k['center']['y'],k['center']['z']);let t=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);t['enable']=![],t['center']['copy'](j['planes'][0x0]['center']),t['axis']['x']['enable']=!![],t['axis']['x']['visible']=!![],t['axis']['x']['normal']['copy'](j['planes'][0x0]['normal']),t['axis']['x']['normal']['multiplyScalar'](-0x1),t['object']=j['planes'][0x0],j['planes'][0x0]['handle']=t;}{j['planes'][0x1]['normal']=new b['Vector3'](-0x1,0x0,0x0),j['planes'][0x1]['center']=new b['Vector3'](k['max']['x'],k['center']['y'],k['center']['z']);let u=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);u['enable']=![],u['center']['copy'](j['planes'][0x1]['center']),u['axis']['x']['enable']=!![],u['axis']['x']['visible']=!![],u['axis']['x']['normal']['copy'](j['planes'][0x1]['normal']),u['axis']['x']['normal']['multiplyScalar'](-0x1),u['object']=j['planes'][0x1],j['planes'][0x1]['handle']=u;}{j['planes'][0x2]['normal']=new b['Vector3'](0x0,0x1,0x0),j['planes'][0x2]['center']=new b['Vector3'](k['center']['x'],k['min']['y'],k['center']['z']);let v=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);v['enable']=![],v['center']['copy'](j['planes'][0x2]['center']),v['axis']['y']['enable']=!![],v['axis']['y']['visible']=!![],v['axis']['y']['normal']['copy'](j['planes'][0x2]['normal']),v['axis']['y']['normal']['multiplyScalar'](-0x1),v['object']=j['planes'][0x2],j['planes'][0x2]['handle']=v;}{j['planes'][0x3]['normal']=new b['Vector3'](0x0,-0x1,0x0),j['planes'][0x3]['center']=new b['Vector3'](k['center']['x'],k['max']['y'],k['center']['z']);let w=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);w['enable']=![],w['center']['copy'](j['planes'][0x3]['center']),w['axis']['y']['enable']=!![],w['axis']['y']['visible']=!![],w['axis']['y']['normal']['copy'](j['planes'][0x3]['normal']),w['axis']['y']['normal']['multiplyScalar'](-0x1),w['object']=j['planes'][0x3],j['planes'][0x3]['handle']=w;}{j['planes'][0x4]['normal']=new b['Vector3'](0x0,0x0,0x1),j['planes'][0x4]['center']=new b['Vector3'](k['center']['x'],k['center']['y'],k['min']['z']);let x=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);x['enable']=![],x['center']['copy'](j['planes'][0x4]['center']),x['axis']['z']['enable']=!![],x['axis']['z']['visible']=!![],x['axis']['z']['normal']['copy'](j['planes'][0x4]['normal']),x['axis']['z']['normal']['multiplyScalar'](-0x1),x['object']=j['planes'][0x4],j['planes'][0x4]['handle']=x;}{j['planes'][0x5]['normal']=new b['Vector3'](0x0,0x0,-0x1),j['planes'][0x5]['center']=new b['Vector3'](k['center']['x'],k['center']['y'],k['max']['z']);let y=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);y['enable']=![],y['center']['copy'](j['planes'][0x5]['center']),y['axis']['z']['enable']=!![],y['axis']['z']['visible']=!![],y['axis']['z']['normal']['copy'](j['planes'][0x5]['normal']),y['axis']['z']['normal']['multiplyScalar'](-0x1),y['object']=j['planes'][0x5],j['planes'][0x5]['handle']=y;}}break;case b['Enum']['CLIPPING_MODES']['SELECTBOX']:{k=a['Data']['GetSelectedObjectsBBox'](),j['itemType']=b['Enum']['CLIPPING_MODES']['BOX'];if(k===undefined)return;for(let z=0x0;z<0x6;z++){let A=a['Data']['ClipPlane']();j['planes'][z]=A;}{j['planes'][0x0]['normal']=new b['Vector3'](0x1,0x0,0x0),j['planes'][0x0]['center']=new b['Vector3'](k['min']['x'],k['center']['y'],k['center']['z']);let B=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);B['enable']=![],B['center']['copy'](j['planes'][0x0]['center']),B['axis']['x']['enable']=!![],B['axis']['x']['visible']=!![],B['axis']['x']['normal']['copy'](j['planes'][0x0]['normal']),B['axis']['x']['normal']['multiplyScalar'](-0x1),B['object']=j['planes'][0x0],j['planes'][0x0]['handle']=B;}{j['planes'][0x1]['normal']=new b['Vector3'](-0x1,0x0,0x0),j['planes'][0x1]['center']=new b['Vector3'](k['max']['x'],k['center']['y'],k['center']['z']);let C=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);C['enable']=![],C['center']['copy'](j['planes'][0x1]['center']),C['axis']['x']['enable']=!![],C['axis']['x']['visible']=!![],C['axis']['x']['normal']['copy'](j['planes'][0x1]['normal']),C['axis']['x']['normal']['multiplyScalar'](-0x1),C['object']=j['planes'][0x1],j['planes'][0x1]['handle']=C;}{j['planes'][0x2]['normal']=new b['Vector3'](0x0,0x1,0x0),j['planes'][0x2]['center']=new b['Vector3'](k['center']['x'],k['min']['y'],k['center']['z']);let D=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);D['enable']=![],D['center']['copy'](j['planes'][0x2]['center']),D['axis']['y']['enable']=!![],D['axis']['y']['visible']=!![],D['axis']['y']['normal']['copy'](j['planes'][0x2]['normal']),D['axis']['y']['normal']['multiplyScalar'](-0x1),D['object']=j['planes'][0x2],j['planes'][0x2]['handle']=D;}{j['planes'][0x3]['normal']=new b['Vector3'](0x0,-0x1,0x0),j['planes'][0x3]['center']=new b['Vector3'](k['center']['x'],k['max']['y'],k['center']['z']);let E=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);E['enable']=![],E['center']['copy'](j['planes'][0x3]['center']),E['axis']['y']['enable']=!![],E['axis']['y']['visible']=!![],E['axis']['y']['normal']['copy'](j['planes'][0x3]['normal']),E['axis']['y']['normal']['multiplyScalar'](-0x1),E['object']=j['planes'][0x3],j['planes'][0x3]['handle']=E;}{j['planes'][0x4]['normal']=new b['Vector3'](0x0,0x0,0x1),j['planes'][0x4]['center']=new b['Vector3'](k['center']['x'],k['center']['y'],k['min']['z']);let F=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);F['enable']=![],F['center']['copy'](j['planes'][0x4]['center']),F['axis']['z']['enable']=!![],F['axis']['z']['visible']=!![],F['axis']['z']['normal']['copy'](j['planes'][0x4]['normal']),F['axis']['z']['normal']['multiplyScalar'](-0x1),F['object']=j['planes'][0x4],j['planes'][0x4]['handle']=F;}{j['planes'][0x5]['normal']=new b['Vector3'](0x0,0x0,-0x1),j['planes'][0x5]['center']=new b['Vector3'](k['center']['x'],k['center']['y'],k['max']['z']);let G=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['CLIPPING']);G['enable']=![],G['center']['copy'](j['planes'][0x5]['center']),G['axis']['z']['enable']=!![],G['axis']['z']['visible']=!![],G['axis']['z']['normal']['copy'](j['planes'][0x5]['normal']),G['axis']['z']['normal']['multiplyScalar'](-0x1),G['object']=j['planes'][0x5],j['planes'][0x5]['handle']=G;}}break;}return j;}function f(i){let j=d['get'](i);if(j===undefined)return;for(let k=0x0;k<j['planes']['length'];k++){if(j['planes'][k]['handle']===undefined)continue;a['Handle']['Delete'](j['planes'][k]['handle']['id']);let l=a['Data']['ClippingEvent'](b['Enum']['CLIPPING_TYPE']['DELETE'],j);a['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Section']['Changed'],l);}d['delete'](i);}function g(){let i=a['Clipping']['Get']();if(i===undefined)return;let j=undefined,k,l,m,n=0x1;switch(i['itemType']){case b['Enum']['CLIPPING_MODES']['X']:case b['Enum']['CLIPPING_MODES']['Y']:case b['Enum']['CLIPPING_MODES']['Z']:{let o=h();j=a['Util']['GetBBox2Vertex'](o),n=0x1;}break;case b['Enum']['CLIPPING_MODES']['CUSTOM']:{let p=h();j=a['Util']['GetBBox2Vertex'](p),n=0x1;}break;case b['Enum']['CLIPPING_MODES']['BOX']:case b['Enum']['CLIPPING_MODES']['SELECTBOX']:{let q,r;for(let t=0x0;t<i['planes']['length'];t++){t===0x0?(q=new b['Vector3']()['copy'](i['planes'][t]['center']),r=new b['Vector3']()['copy'](i['planes'][t]['center'])):(q['min'](i['planes'][t]['center']),r['max'](i['planes'][t]['center']));}let s=new b['BBox']([q['x'],q['y'],q['z'],r['x'],r['y'],r['z']]);i['planes'][0x0]['center']=new b['Vector3'](s['min']['x'],s['center']['y'],s['center']['z']),i['planes'][0x1]['center']=new b['Vector3'](s['max']['x'],s['center']['y'],s['center']['z']),i['planes'][0x2]['center']=new b['Vector3'](s['center']['x'],s['min']['y'],s['center']['z']),i['planes'][0x3]['center']=new b['Vector3'](s['center']['x'],s['max']['y'],s['center']['z']),i['planes'][0x4]['center']=new b['Vector3'](s['center']['x'],s['center']['y'],s['min']['z']),i['planes'][0x5]['center']=new b['Vector3'](s['center']['x'],s['center']['y'],s['max']['z']);if(i['planes'][0x0]['handle']!==undefined)i['planes'][0x0]['handle']['center']=new b['Vector3'](s['min']['x'],s['center']['y'],s['center']['z']);if(i['planes'][0x1]['handle']!==undefined)i['planes'][0x1]['handle']['center']=new b['Vector3'](s['max']['x'],s['center']['y'],s['center']['z']);if(i['planes'][0x2]['handle']!==undefined)i['planes'][0x2]['handle']['center']=new b['Vector3'](s['center']['x'],s['min']['y'],s['center']['z']);if(i['planes'][0x3]['handle']!==undefined)i['planes'][0x3]['handle']['center']=new b['Vector3'](s['center']['x'],s['max']['y'],s['center']['z']);if(i['planes'][0x4]['handle']!==undefined)i['planes'][0x4]['handle']['center']=new b['Vector3'](s['center']['x'],s['center']['y'],s['min']['z']);if(i['planes'][0x5]['handle']!==undefined)i['planes'][0x5]['handle']['center']=new b['Vector3'](s['center']['x'],s['center']['y'],s['max']['z']);j=a['Util']['GetBBox2Vertex'](s),n=0x0;}break;}if(j===undefined)return;for(let u=0x0;u<i['planes']['length'];u++){m=new b['Vector3']()['copy'](i['planes'][u]['normal']),k=new b['Vector3'](0x1,0x0,0x0);if(Math['abs'](k['dot'](m))>0.99)k['set'](0x0,0x0,0x1);l=new b['Vector3']()['crossVectors'](m,k)['normalize'](),k=new b['Vector3']()['crossVectors'](l,m)['normalize']();let v,w,x,y;for(let I=0x0;I<0x8;I++){let J=new b['Vector3']()['subVectors'](j[I],i['planes'][u]['center']),K=J['dot'](k),L=J['dot'](l);I===0x0?(v=K,w=K,x=L,y=L):(v=Math['min'](K,v),w=Math['max'](K,w),x=Math['min'](L,x),y=Math['max'](L,y));}let z=Math['max'](v*0.05,-0xa),A=Math['min'](w*0.05,0xa),B=Math['max'](x*0.05,-0xa),C=Math['min'](y*0.05,0xa),D=new b['Vector3']()['copy'](k)['multiplyScalar'](v+z*n),E=new b['Vector3']()['copy'](k)['multiplyScalar'](w+A*n),F=new b['Vector3']()['copy'](l)['multiplyScalar'](x+B*n),G=new b['Vector3']()['copy'](l)['multiplyScalar'](y+C*n),H;H=new b['Vector3']()['addVectors'](new b['Vector3']()['addVectors'](i['planes'][u]['center'],D),F),i['planes'][u]['vertex'][0x0]=H,H=new b['Vector3']()['addVectors'](new b['Vector3']()['addVectors'](i['planes'][u]['center'],E),F),i['planes'][u]['vertex'][0x1]=H,H=new b['Vector3']()['addVectors'](new b['Vector3']()['addVectors'](i['planes'][u]['center'],D),G),i['planes'][u]['vertex'][0x2]=H,H=new b['Vector3']()['addVectors'](new b['Vector3']()['addVectors'](i['planes'][u]['center'],E),G),i['planes'][u]['vertex'][0x3]=H;}}this['IsClipping']=function(){let i=a['Clipping']['Get']();return i!==undefined?!![]:![];},this['CreateClipping']=function(i){d['forEach'](function(l){f(l['id']);});let j=e(i);g(),a['Shader']['UpdateShader']();let k=a['Data']['ClippingEvent'](b['Enum']['CLIPPING_TYPE']['CREATE'],j);return a['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Section']['Changed'],k),a['ViewRefresh'](),j;},this['GetClipping']=function(i){let j=undefined;return d['forEach'](function(k){if(k['id']===i)return j=k,!![];return![];}),j;},this['Get']=function(){let i=undefined;return d['forEach'](function(j){if(j['enable'])return i=j,!![];return![];}),i;},this['Update']=function(){g();},this['Inverse']=function(){let i=a['Clipping']['Get']();if(i===undefined)return;if(i['itemType']===b['Enum']['CLIPPING_MODES']['BOX'])return;for(let j=0x0;j<i['planes']['length'];j++){i['planes'][j]['normal']['multiplyScalar'](-0x1),i['planes'][j]['handle']!==undefined&&(i['planes'][j]['handle']['axis']['x']['normal']['multiplyScalar'](-0x1),i['planes'][j]['handle']['axis']['y']['normal']['multiplyScalar'](-0x1),i['planes'][j]['handle']['axis']['z']['normal']['multiplyScalar'](-0x1));}a['ViewRefresh']();},this['Clear']=function(){if(d['size']<=0x0)return;d['forEach'](function(j,k,l){f(j['id']);}),a['Shader']['UpdateShader']();let i=a['Data']['ClippingEvent'](b['Enum']['CLIPPING_TYPE']['CLEAR']);a['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Section']['Changed'],i),a['ViewRefresh']();},this['SetShowClipping']=function(i,j){let k=a['Clipping']['GetClipping'](i);if(k===undefined)return;k['visible']=j;for(let l=0x0;l<k['planes']['length'];l++){if(k['planes'][l]['handle']!==undefined){k['planes'][l]['handle']['visible']=j;if(k['itemType']!==b['Enum']['CLIPPING_MODES']['BOX']&&k['itemType']!==b['Enum']['CLIPPING_MODES']['SELECTBOX'])k['planes'][l]['handle']['enable']=j;}}},this['SetShowClippingPlane']=function(i,j){let k=undefined;d['forEach'](function(l){if(l['enable']){k=l;let m=k['planes']['length'];for(let n=0x0;n<m;n++){l['planes'][n]['visible']['plane']=j;}}a['ViewRefresh']();});},this['SetShowClippingLine']=function(i,j){let k=undefined;d['forEach'](function(l){if(l['enable']){k=l;let m=k['planes']['length'];for(let n=0x0;n<m;n++){l['planes'][n]['visible']['line']=j;}}a['ViewRefresh']();});},this['IsClippingPosition']=function(i){let j=a['Clipping']['Get']();if(j===undefined)return![];for(let k=0x0;k<j['planes']['length'];k++){let l=new b['Plane']()['setFromNormalAndCoplanarPoint'](j['planes'][k]['normal'],j['planes'][k]['center']);const m=l['distanceToPoint'](i);if(m<0x0)return!![];}return![];},this['SetClippingBoxSize']=function(i,j){let k=d['get'](i);if(k===undefined)return;if(k['itemType']!==b['Enum']['CLIPPING_MODES']['BOX'])return;j['update'](),k['planes'][0x0]['center']=new b['Vector3'](j['min']['x'],j['center']['y'],j['center']['z']),k['planes'][0x1]['center']=new b['Vector3'](j['max']['x'],j['center']['y'],j['center']['z']),k['planes'][0x2]['center']=new b['Vector3'](j['center']['x'],j['min']['y'],j['center']['z']),k['planes'][0x3]['center']=new b['Vector3'](j['center']['x'],j['max']['y'],j['center']['z']),k['planes'][0x4]['center']=new b['Vector3'](j['center']['x'],j['center']['y'],j['min']['z']),k['planes'][0x5]['center']=new b['Vector3'](j['center']['x'],j['center']['y'],j['max']['z']),g();},this['GetClippingBoxSize']=function(j){let k=new b['BBox'](),l=d['get'](j);if(l===undefined)return k;if(l['itemType']!==b['Enum']['CLIPPING_MODES']['BOX'])return k;for(let m=0x0;m<0x6;m++){m===0x0?(k['min']['copy'](l['planes'][m]['center']),k['max']['copy'](l['planes'][m]['center'])):(k['min']['min'](l['planes'][m]['center']),k['max']['max'](l['planes'][m]['center']));}return k['update'](),k;},this['RebuildClippingBoundBox']=function(k){let l=a['Clipping']['Get']();if(l===undefined)return k;let m=![],n=!![],o=new b['Vector3']()['copy'](k['min']),p=new b['Vector3']()['copy'](k['max']),q=a['Util']['GetBBox2Vertex'](k);if(l['itemType']===b['Enum']['CLIPPING_MODES']['BOX']||l['itemType']===b['Enum']['CLIPPING_MODES']['SELECTBOX'])for(let r=0x0;r<l['planes']['length'];r++){const s=new b['Plane']()['setFromNormalAndCoplanarPoint'](l['planes'][r]['normal'],l['planes'][r]['center']);if(s['normal']['x']<0x0)p['x']=Math['min'](p['x'],l['planes'][r]['center']['x']);else s['normal']['x']>0x0&&(o['x']=Math['max'](o['x'],l['planes'][r]['center']['x']));if(s['normal']['y']<0x0)p['y']=Math['min'](p['y'],l['planes'][r]['center']['y']);else s['normal']['y']>0x0&&(o['y']=Math['max'](o['y'],l['planes'][r]['center']['y']));if(s['normal']['z']<0x0)p['z']=Math['min'](p['z'],l['planes'][r]['center']['z']);else s['normal']['z']>0x0&&(o['z']=Math['max'](o['z'],l['planes'][r]['center']['z']));}else{for(let t=0x0;t<l['planes']['length'];t++){const u=new b['Plane']()['setFromNormalAndCoplanarPoint'](l['planes'][t]['normal'],l['planes'][t]['center']);let v=0x0;for(let w=0x0;w<0x8;w++){const x=u['distanceToPoint'](q[w]);x<0x0&&v++;}if(v===0x8)continue;m=!![];for(let y=0x0;y<0x8;y++){const z=u['distanceToPoint'](q[y]);if(z<0x0){const A=new b['Vector3']()['copy'](l['planes'][t]['normal'])['multiplyScalar'](z),B=new b['Vector3']()['subVectors'](q[y],A);n?(n=![],o['copy'](B),p['copy'](B)):(o['min'](B),p['max'](B));}else n?(n=![],o['copy'](q[y]),p['copy'](q[y])):(o['min'](q[y]),p['max'](q[y]));}}if(n)return undefined;}return new b['BBox']([o['x'],o['y'],o['z'],p['x'],p['y'],p['z']]);},this['PickPlane']=function(i,j){if(d['size']<=0x0)return;const k=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),l=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],k);let m;m=new b['Vector3'](i,j,-0x1);let n=new b['Vector3'](m['x'],m['y'],m['z']),o=new b['Vector3'](m['x'],m['y'],0x1),p,q;p=a['Camera']['screen2WorldWithMatrix'](l,n),q=a['Camera']['screen2WorldWithMatrix'](l,o),d['forEach'](function(r,s,t){if(!r['enable'])return;let u=-0x1,v=![],w,z;for(let A=0x0;A<r['planes']['length'];A++){if(r['planes'][A]['vertex']['length']<=0x0)continue;if(r['planes'][A]['visible']===![])continue;let B=a['Util']['LineToTriangleIntersections'](p,q,r['planes'][A]['vertex'][0x0],r['planes'][A]['vertex'][0x1],r['planes'][A]['vertex'][0x2]);if(B[0x0]===0x1){let D=new b['Vector3']()['subVectors'](p,B[0x1])['length']();if(v===![])v=!![],u=A,z=B[0x1],w=D;else D<w&&(u=A,z=B[0x1],w=D);continue;}let C=a['Util']['LineToTriangleIntersections'](p,q,r['planes'][A]['vertex'][0x1],r['planes'][A]['vertex'][0x2],r['planes'][A]['vertex'][0x3]);if(C[0x0]===0x1){let E=new b['Vector3']()['subVectors'](p,C[0x1])['length']();if(v===![])v=!![],u=A,z=C[0x1],w=E;else E<w&&(u=A,z=C[0x1],w=E);continue;}}if(v===!![]&&r['planes'][u]['handle']!==undefined){if(r['planes'][u]['handle']['enable'])return;for(let G=0x0;G<r['planes']['length'];G++){if(r['planes'][u]['handle']['state']!==b['Enum']['HANDLE_MOUSE_STATE']['DOWN'])r['planes'][G]['handle']['enable']=![];}r['planes'][u]['handle']['enable']=!![],a['Renderer']['Render']();let F=function(){if(r['planes'][u]['handle']===undefined)return;r['planes'][u]['handle']['state']===b['Enum']['HANDLE_MOUSE_STATE']['DOWN']?setTimeout(F,0xbb8):(r['planes'][u]['handle']['enable']=![],a['Renderer']['Render']());};setTimeout(F,0xbb8);}});},this['AddClippingItem']=function(i){d['set'](i);};function h(){let k=undefined,l=undefined,m=undefined,n=[];for(let o=0x0;o<a['Data']['Objects']['length'];o++){let p=a['Data']['Objects'][o];for(let q=0x0;q<p['tag']['length'];q++){let r=p['tag'][q],s=a['Data']['ShapeAction']['GetAction'](r['object']['id_file'],r['origin_id']);if(s['visible']===!![])n['push'](r);}}if(n['length']>0x0){const t=a['Data']['GetBBoxFormMatrix'](n);k=new b['Vector3']()['copy'](t['min']),l=new b['Vector3']()['copy'](t['max']);}return k!==undefined&&l!==undefined?m=new b['BBox']([k['x'],k['y'],k['z'],l['x'],l['y'],l['z']]):m=a['Data']['GetBBox'](),m;}this['ChangeColor']=function(i){let j=undefined;i===undefined&&(i=new b['Color'](),i=a['Configuration']['Section']['Style']['Color']),d['forEach'](function(k){if(k['enable']){j=k;let l=j['planes']['length'];for(let m=0x0;m<l;m++){j['planes'][m]['style']['color']=i;}}a['ViewRefresh']();});},this['ChangeLineColor']=function(i){let j=undefined;i===undefined&&(i=new b['Color']()['copy'](a['Configuration']['Section']['Style']['LineColor'])),d['forEach'](function(k){if(k['enable']){j=k;let l=j['planes']['length'];for(let m=0x0;m<l;m++){j['planes'][m]['style']['lineColor']=i;}}a['ViewRefresh']();});},this['ChangeLineTickness']=function(i){let j=undefined,k=i;i===undefined&&(k=a['Configuration']['Section']['Style']['LineTickness']),d['forEach'](function(l){if(l['enable']){j=l;let m=j['planes']['length'];for(let n=0x0;n<m;n++){j['planes'][n]['style']['lineTickness']=k;}}a['ViewRefresh']();});},this['OnChangedEvent']=function(i){a['EventHandler']['addEventListener'](b['Enum']['EVENT_TYPES']['Section']['Changed'],i);};}}export default Clipping;