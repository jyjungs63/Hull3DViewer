class ColorPicker{constructor(a,b){let c=this;this['colorpicker']=undefined,this['closebtn']=undefined,this['ctx_color']=undefined,this['canvas_color']=undefined,this['ctx_detailColor']=undefined,this['canvas_detailColor']=undefined;const d=new b['Color'](0xff,0x0,0x0);let e=undefined;this['visible']=![];let f=undefined,g=undefined,h=undefined,i=undefined,j=undefined;const k=0xa,l=0x28,m=0x4,n=0xc8,o=0x82,p=0x28;this['Callback']=undefined;const q={'Color':0x0,'DetailColor':0xa};this['Show']=function(E){r(E);};function r(E){E===!![]?(c['colorpicker']['style']['display']='block',c['closebtn']['style']['display']='block',c['visible']=!![]):(c['colorpicker']['style']['display']='none',c['closebtn']['style']['display']='none',c['visible']=![]);};this['GetShow']=function(){return c['visible'];},this['SetPosition']=function(E,F){let G=E-c['colorpicker']['offsetHeight']-0x2,H=F;c['colorpicker']['style']['top']=G+'px',c['colorpicker']['style']['left']=H+'px';let I=G-c['closebtn']['offsetHeight'],J=H+c['colorpicker']['offsetWidth']-c['closebtn']['offsetWidth'];c['closebtn']['style']['top']=I+'px',c['closebtn']['style']['left']=J+'px';};let s=new b['Color'](),t=()=>{let E=()=>{let J=document['createElement']('div');J['style']['display']='none',J['id']='VIZCore_ColorAlpha',J['className']='VIZWeb\x20SH_color_panel',c['colorpicker']=J;let K=document['createElement']('div');K['id']=a['GetViewID']()+'div_color_content1',K['className']='VIZWeb\x20SH_color_panel_canvas_div',K['style']['marginTop']='5px',J['appendChild'](K);let L=document['createElement']('canvas');L['id']='canvas_colora',L['className']='VIZWeb\x20SH_color_panel_canvas',L['width']=n,L['height']=o,L['style']['border']='1px\x20solid\x20rgba(0,\x200,\x200,\x200.2)',L['addEventListener']('click',function(Y){F(Y,q['Color']),z(0x5);});let M=![];L['addEventListener']('mousedown',function(Y){M=!![];}),L['addEventListener']('mouseup',function(Y){M=![];}),L['addEventListener']('mouseout',function(Y){M=![];}),L['addEventListener']('mousemove',function(Y){M===!![]&&(F(Y,q['Color']),z(0x5));}),K['appendChild'](L),c['ctx_color']=L['getContext']('2d'),c['canvas_color']=L;let N=document['createElement']('div');N['id']=a['GetViewID']()+'div_color_content2',N['className']='VIZWeb\x20SH_color_panel_canvas_div',J['appendChild'](N);let O=document['createElement']('canvas');O['id']=a['GetViewID']()+'canvas_detail_color',O['className']='VIZWeb\x20SH_color_panel_canvas',O['width']=n,O['height']=p,O['style']['border']='1px\x20solid\x20rgba(0,\x200,\x200,\x200.2)',N['appendChild'](O),O['addEventListener']('click',function(Y){F(Y,q['DetailColor']);});let P=![];O['addEventListener']('mousedown',function(Y){P=!![];}),O['addEventListener']('mouseup',function(Y){P=![];}),O['addEventListener']('mouseout',function(Y){P=![];}),O['addEventListener']('mousemove',function(Y){P===!![]&&F(Y,q['DetailColor']);}),c['ctx_detailColor']=O['getContext']('2d'),c['canvas_detailColor']=O;let Q=document['createElement']('div');Q['id']=a['GetViewID']()+'div_color_content3',Q['className']='VIZWeb\x20SH_color_panel_canvas_trans',J['appendChild'](Q);let R=document['createElement']('div');R['id']=a['GetViewID']()+'colorPreview',R['className']='VIZWeb\x20SH_color_panel_canvas_preview',Q['appendChild'](R);let S=document['createElement']('div');S['id']=a['GetViewID']()+'div_range_transparency',S['className']='VIZWeb\x20SH_color_panel_transparency_input',S['style']['width']='calc(100%\x20-\x208px)',S['style']['height']='25px',S['style']['top']='0px',S['style']['marginLeft']='4px',S['style']['borderRadius']='2px';let T=document['createElement']('input');T['type']='range',T['id']=a['GetViewID']()+'slider',T['min']='0',T['max']='100',T['step']='0.01',T['value']='100',S['appendChild'](T),Q['appendChild'](S),S['addEventListener']('change',function(){let Y=Math['round'](T['value']*(0xff/0x64));if(Y<0x1)Y=0x1;let Z=new b['Color']();Z=C();let a0='rgba('+Z['r']+','+Z['g']+','+Z['b']+','+Y/0xff+')';R['style']['backgroundColor']=a0,R['style']['borderColor']=a0,B(new b['Color'](Z['r'],Z['g'],Z['b'],Y));});let U=document['createElement']('div');U['id']=a['GetViewID']()+'closebutton',U['className']='VIZWeb\x20SH_color_panel_close_button',c['closebtn']=U,U['addEventListener']('click',function(){r(![]);});let V=document['createElement']('div');V['id']=a['GetViewID']()+'div_color_content4',V['className']='VIZWeb\x20SH_color_panel_canvas_trans',V['style']['display']='inline-block',J['appendChild'](V);let W=document['createElement']('button');W['className']='VIZWeb\x20SH_color_panel_button',W['id']=a['GetViewID']()+'btn_Cancel',W['style']['float']='right',W['style']['backgroundImage']='url(\x27data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVRYheWX3YnDMBCEJ67AhQTODQT8YNWRK+2uDr8EroEEUkg6cBCs7pw9749WDwlkQNhga+YzlrXr3bIseKa6p6ZbACmlvjXA8hABUkpfAE4tEDT3RF5+AJpwBPARhSjh5HGUIP4BrMKLqiFYeNEmRMcm8vBqCCFchOjYxEHxNiGM8KJh7fELMM/zDcAI4BKBcIZn75GyHgFaIKLhWZs7YY0hnYfCRYAKiCsd95FwFaACQpManqVuxc41IckMNwEaIFzhWe5yTK/jx3jfoHVx8IRnvXY5LlotRuvpQfe4a4cJEPwS3LXD05BEP0MXhNaQeDeiq3LdhJAaEu9WfKARKmCbALWFpbWK8oYkVNVaIHhDEq5qUQjekJwj4ZUQD+INySeA70i4E0LviAQId7gB4e+I8NchD7XhzKOsK4g+GUAa0zT12nXPyB6az5v/HQO4A7UCRSKrlGEsAAAAAElFTkSuQmCC\x27)',V['appendChild'](W),W['addEventListener']('click',function(){r(![]);});let X=document['createElement']('button');X['className']='VIZWeb\x20SH_color_panel_button',X['id']=a['GetViewID']()+'btn_Apply',X['style']['float']='right',X['style']['marginRight']='5px',X['style']['backgroundImage']='url(\x27data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsSAAALEgHS3X78AAABC0lEQVRYhe2X2w2CQBBFr8YCrIMfK7AGS9ASLIUSpANKMKEBvmwHM2aXLPucfWU/8Cb7AxvOYSYMcFiWBS1zbErfvcC+BLp+etFqIiDAd1q6RHUBBS6zkag6B7p+GgHcHKeHz/P6qFYBcZcu+JoqApay6/ndPR0rLhADp5wKw309N+CGQNdPZwBvALO+kQEP9dyAU9YWKPCL7XllwNllNwQ0uAxLIge+CljgLAnR82S4KjB79lglUntuFRAbB65EbtnVbEYx58JSqAScYrwLGBK+RMEpxiRktMOVaLhVIFEiCe4UiJRIhnsFmBJZ8KBAQCIbzhJwSBSBU6I+yeQwKgWPFqiR/59RWwEAX4dinIpKvVKbAAAAAElFTkSuQmCC\x27)',V['appendChild'](X),X['addEventListener']('click',function(){c['Callback'](),r(![]);}),a['Container']['appendChild'](J);};E();function F(J,K){if(K===q['Color']){let O=J['clientX']-c['canvas_color']['getBoundingClientRect']()['left'],P=J['clientY']-c['canvas_color']['getBoundingClientRect']()['top'];if(H(O,P,f,g,h)===!![])return;if(O>=n||P>=o)return;}else{let Q=J['clientX']-c['canvas_detailColor']['getBoundingClientRect']()['left'],R=J['clientY']-c['canvas_detailColor']['getBoundingClientRect']()['top'];if(I(Q,R,i,j)===!![])return;if(Q>n||R>p)return;}let L=G(J,K),M=new b['Color'](L['r'],L['g'],L['b']),N=document['getElementById'](a['GetViewID']()+'colorPreview');N['style']['backgroundColor']='rgb('+L['r']+',\x20'+L['g']+',\x20'+L['b']+')',N['style']['borderColor']='rgb('+L['r']+',\x20'+L['g']+',\x20'+L['b']+')';if(K===q['Color']){x(M);let S=J['clientX']-c['canvas_color']['getBoundingClientRect']()['left'],T=J['clientY']-c['canvas_color']['getBoundingClientRect']()['top'];A(S,T),s=M;}else{let U=J['clientX']-c['canvas_detailColor']['getBoundingClientRect']()['left'];z(U);}y(M),B(M);};function G(J,K){let L=undefined,M=undefined,N=undefined;switch(K){case q['Color']:L=J['clientX']-c['canvas_color']['getBoundingClientRect']()['left'],M=J['clientY']-c['canvas_color']['getBoundingClientRect']()['top'],c['ctx_color']['imageSmoothingEnabled']=!![],N=c['ctx_color']['getImageData'](L,M,0x1,0x1)['data'];break;case q['DetailColor']:L=J['clientX']-c['canvas_detailColor']['getBoundingClientRect']()['left'],M=J['clientY']-c['canvas_detailColor']['getBoundingClientRect']()['top'],c['ctx_detailColor']['imageSmoothingEnabled']=!![],N=c['ctx_detailColor']['getImageData'](L,M,0x1,0x1)['data'];break;default:break;}return{'r':N[0x0],'g':N[0x1],'b':N[0x2]};};function H(J,K,L,M,N){let O=N+0x2,P=Math['sqrt']((J-L)**0x2+(K-M)**0x2);return P<O;}function I(J,K,L,M){let N=0x5,O=(k+m)/0x2+N,P=(l+m)/0x2+N;return J>=L-O&&J<=L+O&&K>=M-P&&K<=M+l+P;}w(),x(d),B(new b['Color'](0x0,0x0,0x0,0xff));};function u(E){let F=c['ctx_color'];if(F===undefined)return null;let G=F['canvas']['width'],H=F['canvas']['height'],I=F['getImageData'](0x0,0x0,G,H),J=I['data'],K,L,M=E[0x0],N=E[0x1],O=E[0x2];if(M===0xff&&N===0xff&&O===0xff)return[0x7d,0x0];for(let P=0x0;P<H;P++){K=P*0x4*G;for(let Q=0x0;Q<G;Q++){L=K+Q*0x4;if(J[L]>=M-0x1e&&J[L]<=M+0x1e){if(J[L+0x1]>=N-0x1e&&J[L+0x1]<=N+0x1e&&J[L+0x2]>=O-0x1e&&J[L+0x2]<=O+0x1e)return[Q,P];}}}return null;}function v(E){switch(E){case q['Color']:c['ctx_color']['clearRect'](0x0,0x0,c['canvas_color']['width'],c['canvas_color']['height']),w();break;case q['DetailColor']:c['ctx_detailColor']['clearRect'](0x0,0x0,c['canvas_detailColor']['width'],c['canvas_detailColor']['height']),x(s);break;default:break;}}function w(){const E=c['ctx_color']['createLinearGradient'](0x0,0x0,c['canvas_color']['width'],0x0);E['addColorStop'](0x0,'rgba(255,\x200,\x200,\x201)'),E['addColorStop'](0.17,'rgba(255,\x20255,\x200,\x201)'),E['addColorStop'](0.34,'rgba(0,\x20255,\x200,\x201)'),E['addColorStop'](0.51,'rgba(0,\x20255,\x20255,\x201)'),E['addColorStop'](0.68,'rgba(0,\x200,\x20255,\x201)'),E['addColorStop'](0.85,'rgba(255,\x200,\x20255,\x201)'),E['addColorStop'](0x1,'rgba(255,\x200,\x200,\x201)'),c['ctx_color']['fillStyle']=E,c['ctx_color']['fillRect'](0x0,0x0,c['canvas_color']['width'],c['canvas_color']['height']);const F=c['ctx_color']['createLinearGradient'](0x0,c['canvas_color']['height'],0x0,0x0);F['addColorStop'](0x0,'rgba(255,\x20255,\x20255,\x201)'),F['addColorStop'](0x1,'rgba(255,\x20255,\x20255,\x200)'),c['ctx_color']['fillStyle']=F,c['ctx_color']['fillRect'](0x0,0x0,c['canvas_color']['width'],c['canvas_color']['height']),f=undefined,g=undefined,h=undefined;};function x(E){const F=c['ctx_detailColor']['createLinearGradient'](0x0,0x0,c['canvas_detailColor']['width'],0x0);F['addColorStop'](0x0,'rgba('+E['r']+',\x20'+E['g']+',\x20'+E['b']+'\x20,\x201)'),F['addColorStop'](0x1,'rgba(0,\x200,\x200,\x201)'),c['ctx_detailColor']['fillStyle']=F,c['ctx_detailColor']['fillRect'](0x0,0x0,c['canvas_detailColor']['width'],c['canvas_detailColor']['height']),i=undefined,j=undefined;};function y(E){let F='rgba('+E['r']+','+E['g']+','+E['b']+','+0x1+')',G=document['getElementById'](a['GetViewID']()+'slider');G!==undefined&&G!==null&&(G['style']['background']=F,G['value']='100');};function z(E){v(q['DetailColor']);const F='rgba(255,\x20255,\x20255,\x201)',G='rgba(0,\x200,\x200,\x200.9)';c['ctx_detailColor']['beginPath'](),c['ctx_detailColor']['rect'](E-k/0x2,0x0,k,l),i=E,j=l/0x2,c['ctx_detailColor']['strokeStyle']=F,c['ctx_detailColor']['lineWidth']=0x4,c['ctx_detailColor']['stroke'](),c['ctx_detailColor']['strokeStyle']=G,c['ctx_detailColor']['lineWidth']=0x2,c['ctx_detailColor']['stroke'](),c['ctx_detailColor']['stroke'](),c['ctx_detailColor']['closePath']();}function A(E,F){v(q['Color']);let G=0x5,H='white',I='rgba(0,\x200,\x200,\x201)';c['ctx_color']['beginPath'](),f=E,g=F,h=G,c['ctx_color']['arc'](E,F,G,0x0,0x2*Math['PI']),c['ctx_color']['strokeStyle']=H,c['ctx_color']['lineWidth']=0x4,c['ctx_color']['stroke'](),c['ctx_color']['strokeStyle']=I,c['ctx_color']['lineWidth']=0x2,c['ctx_color']['stroke'](),c['ctx_color']['fillStyle']='rgba(0,\x200,\x200,\x200)',c['ctx_color']['fill'](),c['ctx_color']['closePath']();}this['SetColor']=function(E){let F=u([E['r'],E['g'],E['b']]),G=document['getElementById'](a['GetViewID']()+'colorPreview');G['style']['backgroundColor']='rgba('+E['r']+',\x20'+E['g']+',\x20'+E['b']+',\x20'+E['glAlpha']()+')',G['style']['borderColor']='rgba('+E['r']+',\x20'+E['g']+',\x20'+E['b']+',\x20'+E['glAlpha']()+')',x(E);let H=undefined,I=undefined;F===null?(H=0x0,I=0x0):(H=F[0x0],I=F[0x1]),v(q['Color']),s=E,y(E),B(E);};function B(E){e=E;}function C(E){return e;}this['GetPickColor']=function(){return e;};function D(){if(e!==undefined){let E=a['Interface']['Object3D']['GetSelectedObject3D'](),F=new b['Color']();F=C(),a['Interface']['Object3D']['Color']['SetColorByNodeID'](E,F);}};this['Init']=function(){t();};}}export default ColorPicker;