import a from './Control/UI_Base.js'; import b from './Control/UI_Normal.js'; import c from './Control/UI_Markup.js'; import d from './Control/UI_Markup_Base.js'; import e from './Control/UI_Walkthrough.js'; import f from './Control/UI_Fly.js'; import g from './Control/UI_ObjectTransform.js'; import h from './Control/UI_ScreenBox.js'; let Control = function (i, j) { let k = this, l = j['Enum']['CONTROL_STATE']['NORMAL'], m = j['Enum']['CONTROL_STATE']['NORMAL']; this['_sub'] = j['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']; let n = [], o = 0x0; this['enabled'] = ![], this['MouseEvent'] = ![], this['MouseEventData'] = undefined, this['CurrentEvent'] = undefined, this['ToolbarEvent'] = undefined, this['ControlCam'] = undefined; let p = { 'move': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAhNAAAITQEhiCGBAAACM0lEQVRIibVWsWsaYRT/LkQoFFSwkEkaFIqIoEP9OjS66KTCLU6K3j/Qk3TKIiktDm5CHXVS3L0lm4PSDj0COjhlkAQTyJGKp6W14HDlJ164XNLcZ1p/8MmPd99773vvfe99Ep/Pl0omk2VCyL6maeSxRSmNYFntM65dr9d7kE6nj+Lx+JEgCFeKolwuFovTbrf7jhhQLBZfEkJOwDmOc2uaphJG7FcqFU1HrVb7FYlEjs0nCQQC19PpVMMCZ41g9ZPP5y+1R4yHw2G53+/fHgI8GAx+YXGwgyBVVb2p1+uLRqNR7vV6n4yBp1Kpst/vDzudzlsZeCgUehuNRo+tkqQ7+Nputz+bjQMOh6Nnt9vfV6tVRZeBQ+Z2u08tq8CaS1EUz/UUrTmT3g7rTXgq7jlAXrPZbGJTe9B5qCZ3HFBKZY/H89Hlcr3a1AF0oAsbRjmHPKGJJEn61mw293BDUMTlcvnbuJHn+RexWOw5eKfT+SlJ0nfjd5vN9kwUxT1VVUkul1N4nn9TKpUuSCaTSVBKf6CB/hdgCzYxVrZe5K2laDgc+lbzyjwSBEHAPT/ctA+gA13zCLmTIlmW6Wg0+jCZTM42TQV0oDsYDA6M8l3zxofGBQtardaJPs6N2HqR70VgBjoUTYQi6p/AC4XCIdKyPvlfYRnBbDaLzufzCm6ILgOHbDwev7YMgWUi/suDwzyun/pkrhqNBRzHOSmlY3BZlpkffeZbtDaIMZ5g/kdBCPkDEon+zHQfYBwAAAAASUVORK5CYII=', 'rotate': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAhNAAAITQEhiCGBAAACuklEQVRIiWPQ0NDw8fb27mBgYFD4//8/A7UxI8jwkJCQ8g8fPjCcP3/+6cuXL598//79zMGDB3MYqABYtm7dOsPFxaW8oKAAxJeeM2eO0KJFi7bBzGZkZBTw8vJK/PPnjz0/P78ASOzly5dXfvz4sfLkyZOHCboB5I24uLgn/////z979uxvtra2dSAxBgYGAVNT01Pp6emf1q9f/x8Z3L9////8+fP/+/v7vwCFAL5gBRN+fn7nkQ2PiYlJcXFx+QAyiBDYv3//fxMTk7sgB2GzgBFE2NvbT+Hl5f2yZcuWitjY2JT///9PXbJkCRvMlxs2bGDYsmXLGy4urq8fP35kkZWVFQkJCWE3MDAAy4PiLzw8/O6uXbtM/v///wEjiGDYz89PLzg4+C3M0efPn/9va2v73NzcPA3F2wwMAm5ubhvCw8M/v3//HqwW5FsHB4drWIMIht3d3U/ANIAMd3R0PIgvfM3MzGxBDoLpAcWLm5tbBE4LrKysdkVGRt7t7+//7+Xl9YiYPAGyJDs7+wfM125ubndwWoAUBArEZDwNDY0Zfn5+O1RVVT/DLAAlltzc3AdSUlI/QUGJoQmWkojBILXd3d3f0RMaKFl7eXkVYvjAzs5uCih4QEFFiiUgV8MMB8WHtbX1BYwgAqWg8vLyD7DI0tfXP0KsJeHh4ZNAekAAFOnIeQKuCJTEYKkBZgkpPklKSpoTHx8PDxoUC0BBA8qR6KC+vv4/SCMhwxkYGAxAtI6OTglGTgalFhERkcuRkZFv5eTkxEtKSjjApZ609C8VFZXZcnJyFxYvXjwHV1lmbm5uKyoquldGRubHmzdvnrCzsy9bunRpC9acjJ7RQHxSMxpGrkfm0KKoYIRqgAOaFnYwXFRUFE6t4hpfyhAA5QVKKxyMIEIHlFaZBC2gFDDR1HQGBgYAornB5bs3jwwAAAAASUVORK5CYII=', 'zoom': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAhNAAAITQEhiCGBAAACNklEQVRIibVUMW/aQBR+rpDAFggkbrCMUUH9A0ywMLAwM5JMDIwRIhvdYMg/6NoBtrQLSCyRkLD5BWZgYQpZIBFYBslESG161bNyVlrso7TuJz2d/Gzf93137z2BUgr/E+/89hYEoZpOpw1CyDNGKpXaEULuBEEonqPnyAFuLMtyz7btcL1eh1KpBIlEAhaLBei6Dr1eDxRFeVoulwVK6cNJBiRgAQCfJUmi7Xab+sGyLFqpVGgsFvsBANW3/3uF6wCVS5J022g0IBKJuAI6nY6zooNut+vmZ7MZTCaTl81m84HrhLHKsnxA5RiYZsGgadoveXwuFotUVVWD54AdTTUajTpbMQI/MCJcDcOgoihSHoFTRaqqfsQLPRe5XA6y2Swe7zX3iJLJ5HO/3/dVzUOz2URHOtcBAkvxb3DqP4cgHA5/wyph1YL17oftduu8x5V9DwDWqSO6q9VqZ18yQlEUyusHx4FpmjfYoUwVAlW+dcKUT6dTNzcYDGC/3yPPF64DDEVRHrFD/7QPhsMh9gCVZfmWV6YhRoSzZTwe34dCIUHTtCMhWJIsb9s2tFotOBwO2/V6fcG95d9mUZUQ8h07FJvIC1jOqJwQYomi+HJqHnlN0/eqqg5M08xhE5XLZXeajkYj58xFUfy6Wq0uCoXC1Xw+/7Tb7S5974E7RwCwQ/XX6HupzefzVzhZcfWdRf8aSOw3vgMhYE7i8fgRSWAEfiSBEniRBE7ASDKZzL1nmQYKAPgJ0vPy7X0gtJwAAAAASUVORK5CYII=', 'walkthrough': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAABCbAAAQmwF0iZxLAAAB00lEQVRIia1VMW7CQBBcJQ/ADUJCFG4jJERH4eYKGhqoXNG4QulyT7gfWH6Bwwt4wj3BFbVrKlOmu2iSc3Qcax8RHsmyZK93d+Zm16+z2SyP4/j9crm80S+uRPRFQ2GxWJyMMaZpGqO1NlJKQ0TlYAWISCF5WyRJkoqIoiELCHTekXyQQhFk8ZLnh8OhUUqZNE0bIsqeLVI6yVVVVcZFlmU4l/jZIj9A58YD5AMrJlzt9/vaYapC+WMEc9hut5UXm5VleROJs5xOp/0O7CqA526cEEJzcXmeI060cS9+gfP5fOUKj0Yj3JYhCaSUmK2Pvpi8nQufvtsZyNZ1zbK1wxqxDIioKIoi1CjweTwe2Re73Y68Zm4xHo+1z8I66cYl2GNdLDpc9wfBHbYdRhfRarViK6Rpqnv5TyaTk8/C1TbUjI3tRYzhcT+C72EU5qM7qaytg7ssg6/RDda63UmCWRsR1okLxnWdEPZSm82mBgusE38mMMGtpGBj91dwboClEMK4EiARzsiPQ1JrBOk0FgaS+RpbyXwgYTafzzWkxTp5qAA0xmxAHof+XXfr9bpxV33QqpxcdtjYf4Nv1/8weAgwQZvcuoiz9FOAITSkwRohIvoG/zJCYBtj4+sAAAAASUVORK5CYII=' }; this['imageObjects'] = {}; function q(L) { return new Promise((M, N) => { let O = new Image(); O['onload'] = () => M(O), O['onerror'] = N, O['src'] = L; }); } Promise['all'](Object['values'](p)['map'](q))['then'](L => { Object['keys'](p)['forEach']((M, N) => { this['imageObjects'][M] = L[N]; }); }), r(); function r() { j['namespace']('VIZCore.UIBase'), j['UIBase'] = a, j['namespace']('VIZCore.UINormal'), j['UINormal'] = b, j['namespace']('VIZCore.UIMarkup'), j['UIMarkup'] = c, j['namespace']('VIZCore.UIMarkup_Base'), j['UIMarkup_Base'] = d, j['namespace']('VIZCore.UIWalkthrough'), j['UIWalkthrough'] = e, j['namespace']('VIZCore.UIFly'), j['UIFly'] = f, j['namespace']('VIZCore.UIObjectTransform'), j['UIObjectTransform'] = g, j['namespace']('VIZCore.UIScreenBox'), j['UIScreenBox'] = h; { l = j['Enum']['CONTROL_STATE']['NORMAL'], j['UINormal']['prototype'] = new j['UIBase'](undefined, j), j['UINormal']['prototype']['constructor'] = j['UINormal'], n[j['Enum']['CONTROL_STATE']['NORMAL']] = new j['UINormal'](i, j), j['UIMarkup']['prototype'] = new j['UIBase'](undefined, j), j['UIMarkup']['prototype']['constructor'] = j['UIMarkup'], n[j['Enum']['CONTROL_STATE']['MARKUP']] = new j['UIMarkup'](i, j), j['UIWalkthrough']['prototype'] = new j['UIBase'](undefined, j), j['UIWalkthrough']['prototype']['constructor'] = j['UIWalkthrough'], n[j['Enum']['CONTROL_STATE']['WALKTHROUGH']] = new j['UIWalkthrough'](i, j), j['UIFly']['prototype'] = new j['UIBase'](undefined, j), j['UIFly']['prototype']['constructor'] = j['UIFly'], n[j['Enum']['CONTROL_STATE']['FLY']] = new j['UIFly'](i, j), j['UIObjectTransform']['prototype'] = new j['UIBase'](undefined, j), j['UIObjectTransform']['prototype']['constructor'] = j['UIObjectTransform'], n[j['Enum']['CONTROL_STATE']['OBJECTTRANSFORM']] = new j['UIObjectTransform'](i, j), j['UIScreenBox']['prototype'] = new j['UIBase'](undefined, j), j['UIScreenBox']['prototype']['constructor'] = j['UIScreenBox'], n[j['Enum']['CONTROL_STATE']['SCREENBOX']] = new j['UIScreenBox'](i, j); } k['enabled'] = !![]; } this['Lock'] = function () { i['MultiView'][i['CameraIndex']]['Lock'](); }, this['Unlock'] = function () { i['MultiView'][i['CameraIndex']]['Unlock'](); }; function s(L) { for (let M = 0x0; M < i['MultiView']['length']; M++) { if (L['target'] === i['MultiView'][M]['domElement']) return !![]; } return ![]; if (L['target'] !== i['Canvas_Review'] && L['target'] !== i['Canvas_Dual']) return ![]; else return !![]; } function t(L) { let M = L['layerX'], N = L['layerY']; return { 'x': M, 'y': N }; } this['GetCalcTouchPos'] = function (L) { let M = L['target']['getBoundingClientRect'](), N = L['pageX'] - M['left'], O = L['pageY'] - M['top']; return { 'x': N, 'y': O }; }; function u(L) { if (k['enabled'] === ![]) return; L['preventDefault'](), L['stopPropagation'](); if (!s(L)) return; let M = t(L), N = M['x'], O = M['y']; n[l]['mouseOut'](N, O, L['button']); } function v() { n[l]['mouseOver'](); } function w(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; if (l !== j['Enum']['CONTROL_STATE']['NORMAL']) return; let M = ![]; if (n[l]['mouseLeftDown'] || n[l]['mouseMiddleDown']) return; if (i['Configuration']['Control']['Version'] === 0x0) { let N = n[l]['GetMouseClick'](n[l]['mouse']['x'], n[l]['mouse']['y'], 0x2); N && (M = !![]); } else { let O = n[l]['GetMouseClick'](n[l]['mouse']['x'], n[l]['mouse']['y'], 0x2); O && (M = !![]); } if (M) i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['ContextMenu'], L); L['preventDefault'](); } function x(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; k['CurrentEvent'] = L, i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['Down'], L), k['ControlCam'] = i['CameraIndex'], L['preventDefault'](), L['stopPropagation'](); let M = t(L), N = M['x'], O = M['y']; { n[l]['KeyPress']['ctrlKey'] = L['ctrlKey'], n[l]['KeyPress']['altKey'] = L['altKey'], n[l]['KeyPress']['shiftKey'] = L['shiftKey']; let P = n[l]['mouseDown'](N, O, L['button']); if (P) { } return; } } function y(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; L['preventDefault'](); if (n[l]['mouseLeftDown']) L['stopPropagation'](); k['ControlCam'] = i['CameraIndex'], k['CurrentEvent'] = L, i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['Move'], L); let M = t(L), N = M['x'], O = M['y']; { n[l]['KeyPress']['ctrlKey'] = L['ctrlKey'], n[l]['KeyPress']['altKey'] = L['altKey'], n[l]['KeyPress']['shiftKey'] = L['shiftKey'], n[l]['mouseMove'](N, O); return; } }; function z(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; L['preventDefault'](); if (n[l]['mouseLeftDown']) L['stopPropagation'](); k['CurrentEvent'] = L, i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['Up'], L), k['ControlCam'] = i['CameraIndex']; let M = t(L), N = M['x'], O = M['y']; { n[l]['KeyPress']['ctrlKey'] = L['ctrlKey'], n[l]['KeyPress']['altKey'] = L['altKey'], n[l]['KeyPress']['shiftKey'] = L['shiftKey']; let P = n[l]['mouseUp'](N, O, L['button']); if (P) { } k['MouseEvent'] && (k['MouseEvent'] = ![], i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Review']['SelectedPosition'], { 'event': L, 'info': k['MouseEventData'] }), k['MouseEventData'] = undefined); return; } } function A(L) { if (k['enabled'] === ![]) return; L['preventDefault'](), L['stopPropagation'](); if (!s(L)) return; i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['Wheel'], L); if (L['wheelDelta']) o = L['wheelDelta'] / 0x28; else L['detail'] && (o = -L['detail'] / 0x3); k['ControlCam'] = i['CameraIndex']; let M = t(L), N = M['x'], O = M['y']; { n[l]['mouseWheel'](N, O, o); return; } } function B(L) { L['stopPropagation'](); let M = t(L), N = M['x'], O = M['y']; k['CurrentEvent'] = L, i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Mouse']['DbClick'], L), n[l]['mouseDoubleClick'](N, O, L['button']); } function C(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; L['preventDefault'](), L['stopPropagation'](); { n[l]['touchStart'](L['touches']), k['CurrentEvent'] = L; return; } } function D(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; L['preventDefault'](), L['stopPropagation'](); { n[l]['touchMove'](L['touches']), k['CurrentEvent'] = L; return; } } function E(L) { if (k['enabled'] === ![]) return; if (!s(L)) return; L['stopPropagation'](); { n[l]['touchEnd'](L['touches']), k['CurrentEvent'] = L; k['ToolbarEvent'] && k['ToolbarEvent'](L); return; } } function F(L) { if (k['enabled'] === ![]) return; { let M = n[l]['keyDown'](L['keyCode']); return; } } function G(L) { if (k['enabled'] === ![]) return; { let M = n[l]['keyPress'](L['keyCode']); return; } } function H(L) { if (k['enabled'] === ![]) return; i['EventHandler']['dispatchEvent'](j['Enum']['EVENT_TYPES']['Keyboard']['Up'], L); { let M = n[l]['keyUp'](L['keyCode']); return; } } let I = (function () { let L = new j['Vector2'](); return function (M, N) { return L['set']((M - k['screen']['width'] * 0.5 - k['screen']['left']) / (k['screen']['width'] * 0.5), (k['screen']['height'] + 0x2 * (k['screen']['top'] - N)) / k['screen']['width']), L; }; }()); this['BackupMode'] = function () { if (l === j['Enum']['CONTROL_STATE']['MARKUP']) return; m = l; }, this['RestoreMode'] = function () { k['SetMode'](m, undefined); }, this['IsControlMode'] = function (L, M) { if (L === undefined) return ![]; if (l !== L) return ![]; if (M !== undefined) { let N = n[l]['IsUIMode'](M); return N; } return !![]; }; function J(L) { if (L === undefined) return; if (l === L) return; k['BackupMode'](), n[l]['UIEnd'](), l = L, n[l]['UIBegin'](); } function K(L) { n[l]['SetUIMode'](L); } this['GetMode'] = function () { return l; }, this['GetUIMode'] = function () { return n[l]; }, this['SetMode'] = function (L, M) { J(L), K(M), (L !== j['Enum']['CONTROL_STATE']['MARKUP'] || M !== j['Enum']['REVIEW_TYPES']['RK_SKETCH']) && i['Data']['Review']['DeleteReviewByKind'](j['Enum']['REVIEW_TYPES']['RK_SKETCH']), L !== j['Enum']['CONTROL_STATE']['MARKUP'] && i['MeshBlock']['Reset'](), i['Interface']['WalkthroughPanel'] !== undefined && (L === j['Enum']['CONTROL_STATE']['WALKTHROUGH'] ? i['Configuration']['Walkthrough']['Panel']['Visible'] && i['Interface']['WalkthroughPanel']['Show'](!![]) : i['Interface']['WalkthroughPanel']['Show'](![])), i['Renderer']['Render'](); }, this['SetSubType'] = function (L) { n[l]['SetSubType'](L); }, this['Render'] = function () { n[l]['Render'](); }, this['Render2D'] = function (L) { n[l]['Render2D'](L); }, this['MouseDown'] = function (L) { if (i['Configuration']['Control']['Version'] === 0x0) x(L); else i['Configuration']['Control']['Version'] === 0x2 ? x(L) : x(L); }, this['MouseMove'] = function (L) { y(L); }, this['MouseUp'] = function (L) { if (i['Configuration']['Control']['Version'] === 0x0) z(L); else i['Configuration']['Control']['Version'] === 0x2 ? z(L) : z(L); }, this['MouseWheel'] = function (L) { A(L); }, this['MouseOver'] = function (L) { v(L); }, this['MouseOut'] = function (L) { u(L); }, this['MouseEnter'] = function (L) { }, this['DoubleClick'] = function (L) { B(L); }, this['TouchStart'] = function (L) { C(L); }, this['TouchEnd'] = function (L) { E(L); }, this['TouchMove'] = function (L) { D(L); }, this['Keydown'] = function (L) { F(L); }, this['Keypress'] = function (L) { G(L); }, this['Keyup'] = function (L) { H(L); }, this['Contextmenu'] = function (L) { w(L); }, this['IsMouseDown'] = function () { return n[l]['mouseLeftDown']; }, this['UnderControl'] = function () { let L = n[l]['mouseLeftDown'], M = !n[l]['PivotUpdate']; if (L || M) return !![]; return ![]; }; }; export default Control;