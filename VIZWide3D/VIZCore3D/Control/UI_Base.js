let UIBase=function(a,b){this['scope']=this,this['VIZCore']=b,this['view']=a,this['_state']=b['Enum']['MOUSE_STATE']['NONE'],this['mouseLeftDown']=![],this['mouseDownPosition']=new b['Vector2'](),this['mouseLastPosition']=new b['Vector2'](),this['timeMouseLeftDown']=undefined,this['mouseMiddleDown']=![],this['timeMouseMiddleDown']=undefined,this['mouseRightDown']=![],this['timeMouseRightDown']=undefined,this['mouse']=new b['Vector2'](),this['_touchZoomDistanceStart']=0x0,this['_touchZoomDistanceEnd']=0x0,this['_touchLastCount']=0x0,this['_touchLast']=undefined,this['delta']=0x0,this['EventCnt']=0x0,this['PivotUpdate']=!![],this['actionEnabled']=!![],this['keyCtrlDown']=![],this['KeyPress']={'ctrlKey':![],'shiftKey':![],'altKey':![],'keycode':undefined};let c=![],d=null,e=null;this['longPressStart']=function(f,g,h){return c=![],d===null&&(d=setTimeout(function(){c=!![];if(d===null)return;let i=function(k,l){if(k['view']['Browser']['IsMS'])k['view']['Camera']['SetPivot'](l['BBox']['center']);else{const m=k['view']['Data']['GetPickByBody'](l['bodyId'],f,g);m['pick']&&k['view']['Camera']['SetPivot'](m['position']);}k['view']['Camera']['RenderPivot']=!![],k['view']['Renderer']['Render']();},j=h['view']['Renderer']['PickingCallback'](f,g,h,i,undefined);},0x3e8)),![];},this['longPressEnd']=function(f,g,h){d!==null&&(clearTimeout(d),d=null);},this['longPressCheck']=function(f,g,h){if(d!==null){let i=new h['VIZCore']['Vector2'](f,g),j=new h['VIZCore']['Vector2']()['subVectors'](h['mouseDownPosition'],i);j['length']()>0x5&&(d!==null&&(clearTimeout(d),d=null));}},this['mousePivotUpdate']=function(f,g,h){let i=function(k,l){if(k['view']['Browser']['IsMS'])k['view']['Camera']['SetPivot'](l['BBox']['center']);else{const m=k['view']['Data']['GetPickByBody'](l['bodyId'],f,g);m['pick']?k['view']['Camera']['SetPivot'](m['position']):k['view']['Camera']['SetPivot'](l['BBox']['center']);}},j=function(k,l,m){if(k['view']['Browser']['IsMS'])k['view']['Camera']['SetPivot'](m['BBox']['center']);else{const n=k['view']['CustomObject']['GetPickByBody'](l['uuid'],f,g);n['pick']?k['view']['Camera']['SetPivot'](n['position']):k['view']['Camera']['SetPivot'](m['BBox']['center']);}};if(!this['view']['Camera']['lockPivot']){let k=this['view']['Renderer']['PickingCallback'](this['mouse']['x'],this['mouse']['y'],this,i,j);if(!k){const l=this['view']['Renderer']['PickPositionObject'](this['mouse']['x'],this['mouse']['y']);l!==undefined&&this['view']['Camera']['SetPivot'](l);}}},this['update']=function(f){if(this['view']['Configuration']['Control']['Lock']===!![])return;if(!this['view']['MultiView'][this['view']['CameraIndex']]['IsUseControlState'](f['_state']))return;if(this['view']['Configuration']['Control']['Version']===0x0)f['action'](f,f['_state']);else{if(this['view']['Configuration']['Control']['Version']===0x1){if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN']||f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']){f['action'](f,f['_state']);return;}switch(this['view']['Control']['_sub']){case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:{f['action'](f,f['_state']);}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:{if(f['_state']===0x0||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['view']['FixZAxis']=!![],f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['FixZAxis']=![];else{if(f['_state']===0x2)f['KeyPress']['shiftKey']?(f['view']['FixZAxis']=!![],f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['FixZAxis']=![]):f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else f['_state']===0x1&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:{if(f['_state']===0x0||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else{if(f['_state']===0x1)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===0x2&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{if(f['_state']===0x0)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']);else{if(f['_state']===0x1)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===0x2&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{if(f['_state']===0x0||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['view']['FixZAxis']=![],f['view']['Camera']['FixWorldAxis']=!![],f['view']['Camera']['WorldAxis']=new b['Vector3'](0x0,0x0,0x1),f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['Camera']['FixWorldAxis']=![];else{if(f['_state']===0x2)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else f['_state']===0x1&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN']:{if(f['_state']===0x0)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else{if(f['_state']===0x2)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else f['_state']===0x1&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_CAMERA']:{if(f['_state']===0x0){if(f['KeyPress']['shiftKey'])f['view']['FixZAxis']=!![],f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['FixZAxis']=![];else f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE_CAMERA']);}if(f['_state']===0x2)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else f['_state']===0x1&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['SELECT']:{}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['FLY']:{}break;default:{f['action'](f,this['view']['Control']['_sub']);}break;}}else{if(this['view']['Configuration']['Control']['Version']===0x2){if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN']){f['action'](f,f['_state']);return;}switch(this['view']['Control']['_sub']){case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:{f['action'](f,f['_state']);}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['view']['FixZAxis']=!![],f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['FixZAxis']=![];else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']);else{if(f['_state']===0x1)f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']){if(this['mouseLeftDown']===![]&&this['mouseRightDown']===![]&&this['mouseMiddleDown']===!![])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']||f['_state']===b['Enum']['MOUSE_STATE']['TOUCH_ROTATE'])f['view']['FixZAxis']=![],f['view']['Camera']['FixWorldAxis']=!![],f['view']['Camera']['WorldAxis']=new b['Vector3'](0x0,0x0,0x1),f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['Camera']['FixWorldAxis']=![];else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN']:{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_CAMERA']:{if(f['_state']===0x0){if(f['KeyPress']['shiftKey'])f['view']['FixZAxis']=!![],f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']),f['view']['FixZAxis']=![];else f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE_CAMERA']);}else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'])f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else f['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&f['action'](f,this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);}}}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['SELECT']:{}break;case b['Enum']['MOUSE_CONTROL_SUB_TYPE']['FLY']:{}break;default:{f['action'](f,this['view']['Control']['_sub']);}break;}}}}},this['action']=function(f,g){let h=![];if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']){if(f['mouse']['x']===f['mouseLastPosition']['x']&&f['mouse']['y']===f['mouseLastPosition']['y'])return;let j=f['mouse']['x']-f['mouseLastPosition']['x'],k=f['mouse']['y']-f['mouseLastPosition']['y'],l=a['Renderer']['GetSizeWidth'](),m=a['Renderer']['GetSizeHeight']();if(this['view']['Configuration']['Control']['RotateScreenRate']){let n=0xb,o=0xa,p=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)p=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(p<=0x0)p=0.1;j=j/l*(n*p),k=k/m*(o*p);}else{let q=0x64,r=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)r=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(r<=0x0)r=0.1;let s=q/r;j=j/s,k=k/s;}{let t=new b['Vector3']()['copy'](this['view']['Camera']['pivot']),u=new b['Matrix4']()['copy'](this['view']['Camera']['matMVP']),v=this['view']['Camera']['world2ScreenWithMatrix'](u,t);!(v['x']>=0x0&&v['x']<=l&&v['y']>=0x0&&v['y']<=m)&&(v['x']=l*0.5,v['y']=m*0.5,t=this['view']['Camera']['screen2WorldWithMatrix'](u,v),this['view']['Camera']['SetPivot'](t));}if(this['view']['FixZAxis']){let w=new this['VIZCore']['Vector3'](k,j,j);this['view']['Camera']['CameraRotate'](w);}else{let z=new this['VIZCore']['Vector3'](k,j,0x0);this['view']['Camera']['CameraRotate'](z);}this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']){let A=this['view']['Camera']['cameraZoomRatio'];this['view']['Configuration']['Control']['Zoom']['Ratio']!==undefined&&(A=this['view']['Configuration']['Control']['Zoom']['Ratio']);let B=A;if(this['view']['Camera']['perspectiveView']){let C=new this['VIZCore']['Vector3']()['copy'](this['view']['Camera']['pivot']),D=this['view']['Camera']['GetPerspectiveEyePos'](),E=new this['VIZCore']['Vector3']()['subVectors'](C,D),F=E['length']();if(F<0x0)F=0x0;let G=F-this['view']['Camera']['nearZoom']*1.5;G=Math['abs'](G);let H=G*B;B=H/this['view']['Camera']['viewDistance'];let I=this['view']['Configuration']['Control']['Zoom']['MinZoomValue']*0.0001;if(B>0.5)B=0.5;else B<I&&(B=I);if(this['view']['Configuration']['Control']['Zoom']['UseFixed'])B=A;}else B*=0.5;f['delta']>0x0?this['view']['Camera']['MulViewDistance'](0x1-B):this['view']['Camera']['MulViewDistance'](0x1/(0x1-B)),f['_touchZoomDistanceStart']=f['_touchZoomDistanceEnd'],this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']){let J=this['view']['Camera']['cameraZoomRatio'],K=this['mouseLastPosition']['y']-this['mouse']['y'];if(this['view']['Camera']['perspectiveView']){let L=new this['VIZCore']['Vector3']()['copy'](this['view']['Camera']['pivot']),M=this['view']['Camera']['GetPerspectiveEyePos'](),N=new this['VIZCore']['Vector3']()['subVectors'](L,M),O=N['length']();if(O<0x0)O=0x0;let P=O-this['view']['Camera']['nearZoom']*1.5;P=Math['abs'](P);let Q=P*J;J=Q/this['view']['Camera']['viewDistance'];if(J>0.5)J=0.5;else{if(J<0.001)J=0.001;}}else J*=0.5;J=J*Math['abs'](K)/0xf,K>0x0?(J/=0x5,this['view']['Camera']['MulViewDistance'](0x1-J)):(J/=0x5,this['view']['Camera']['MulViewDistance'](0x1/(0x1-J))),f['_touchZoomDistanceStart']=f['_touchZoomDistanceEnd'],this['view']['Camera']['RenderPivot']=!![],this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['PAN']){if(f['mouse']['x']===f['mouseLastPosition']['x']&&f['mouse']['y']===f['mouseLastPosition']['y'])return;let R=f['mouse']['x']-f['mouseLastPosition']['x'],S=f['mouse']['y']-f['mouseLastPosition']['y'],T=new this['VIZCore']['Matrix4']()['multiplyMatrices'](this['view']['Camera']['projectionMatrix'],this['view']['Camera']['cameraMatrix']),U=this['view']['Camera']['world2ScreenWithMatrix'](T,new this['VIZCore']['Vector3']()['copy'](this['view']['Camera']['pivot'])),V=new this['VIZCore']['Vector3'](f['mouseLastPosition']['x'],f['mouseLastPosition']['y'],U['z']),W=new this['VIZCore']['Vector3'](f['mouse']['x'],f['mouse']['y'],U['z']),X=this['view']['Camera']['screen2WorldWithMatrix'](this['view']['Camera']['projectionMatrix'],V),Y=this['view']['Camera']['screen2WorldWithMatrix'](this['view']['Camera']['projectionMatrix'],W),Z=new this['VIZCore']['Vector3']()['subVectors'](Y,X);if(U['z']>0x1)Z['multiplyScalar'](-0x1);if(this['view']['Camera']['ctrlTranslatePivot']){const a0=this['view']['Camera']['screen2WorldWithMatrix'](T,V),a1=this['view']['Camera']['screen2WorldWithMatrix'](T,W),a2=new this['VIZCore']['Vector3']()['subVectors'](a1,a0);this['view']['Camera']['SetPivot'](new b['Vector3']()['subVectors'](this['view']['Camera']['pivot'],a2));}this['view']['Camera']['CameraTranslate'](Z),this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ROTATE']){if(f['mouse']['x']===f['mouseLastPosition']['x']&&f['mouse']['y']===f['mouseLastPosition']['y'])return;let a3=f['mouse']['x']-f['mouseLastPosition']['x'],a4=f['mouse']['y']-f['mouseLastPosition']['y'];if(this['view']['Configuration']['Control']['RotateScreenRate']){let a5=0xa,a6=0xa,a7=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)a7=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(a7<=0x0)a7=0.1;let a8=this['view']['Renderer']['GetSizeWidth'](),a9=this['view']['Renderer']['GetSizeHeight']();a3=a3/a8*(a5*a7),a4=a4/a9*(a6*a7);}else{let aa=0x64,ab=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)ab=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(ab<=0x0)ab=0.1;let ac=aa/ab;a3=a3/ac,a4=a4/ac;}if(this['view']['FixZAxis']){let ad=new this['VIZCore']['Vector3'](a4,a3,a3);this['view']['Camera']['CameraRotate'](ad);}else{let ae=new this['VIZCore']['Matrix4']()['makeRotationX'](a4),af=new this['VIZCore']['Matrix4']()['makeRotationY'](a3),ag=new this['VIZCore']['Matrix4']()['multiplyMatrices'](ae,af);this['view']['Camera']['CameraRotateByMatrix'](ag);}this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN']){f['delta']!==0x0&&this['view']['Camera']['MulViewDistance'](f['delta']);f['_touchZoomDistanceStart']=f['_touchZoomDistanceEnd'];if(f['mouse']['x']!==f['mouseLastPosition']['x']&&f['mouse']['y']!==f['mouseLastPosition']['y']){let ah=f['mouse']['x']-f['mouseLastPosition']['x'],ai=f['mouse']['y']-f['mouseLastPosition']['y'],aj=new this['VIZCore']['Matrix4']()['multiplyMatrices'](this['view']['Camera']['projectionMatrix'],this['view']['Camera']['cameraMatrix']),ak=this['view']['Camera']['world2ScreenWithMatrix'](aj,new this['VIZCore']['Vector3']()['copy'](this['view']['Camera']['pivot'])),al=new this['VIZCore']['Vector3'](f['mouseLastPosition']['x'],f['mouseLastPosition']['y'],ak['z']),am=new this['VIZCore']['Vector3'](f['mouse']['x'],f['mouse']['y'],ak['z']),an=this['view']['Camera']['screen2WorldWithMatrix'](this['view']['Camera']['projectionMatrix'],al),ao=this['view']['Camera']['screen2WorldWithMatrix'](this['view']['Camera']['projectionMatrix'],am),ap=new this['VIZCore']['Vector3']()['subVectors'](ao,an);if(ak['z']>0x1)ap['multiplyScalar'](-0x1);if(this['view']['Camera']['ctrlTranslatePivot']){const as=this['view']['Camera']['screen2WorldWithMatrix'](aj,al),at=this['view']['Camera']['screen2WorldWithMatrix'](aj,am),au=new this['VIZCore']['Vector3']()['subVectors'](at,as);this['view']['Camera']['SetPivot'](new b['Vector3']()['subVectors'](this['view']['Camera']['pivot'],au));}let aq=new this['VIZCore']['Matrix4']();aq['makeTranslation'](ap['x'],ap['y'],ap['z']);let ar=new this['VIZCore']['Matrix4']()['copy'](this['view']['Camera']['cameraMatrix']);this['view']['Camera']['cameraMatrix']['multiplyMatrices'](aq,ar);}this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE_CAMERA']){if(f['mouse']['x']===f['mouseLastPosition']['x']&&f['mouse']['y']===f['mouseLastPosition']['y'])return;let av=f['mouse']['x']-f['mouseLastPosition']['x'],aw=f['mouse']['y']-f['mouseLastPosition']['y'],ax=a['Renderer']['GetSizeWidth'](),ay=a['Renderer']['GetSizeHeight']();if(this['view']['Configuration']['Control']['RotateScreenRate']){let aA=5.5,aB=0x5,aC=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)aC=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(aC<=0x0)aC=0.1;av=av/ax*(aA*aC),aw=aw/ay*(aB*aC);}else{let aD=0x64,aE=0x1;if(this['view']['Configuration']['Control']['RotateFactor']>0x0&&this['view']['Configuration']['Control']['RotateFactor']<=0x64)aE=this['view']['Configuration']['Control']['RotateFactor']/0x64;if(aE<=0x0)aE=0.1;let aF=aD/aE;av=av/aF,aw=aw/aF;}let az=new b['Vector3'](this['view']['Camera']['pivot']);if(this['view']['Camera']['perspectiveView'])az['copy'](this['view']['Camera']['GetPerspectiveEyePos']());else az['copy'](this['view']['Camera']['GetCameraPos']());if(this['view']['FixZAxis']){let aG=new this['VIZCore']['Vector3'](aw,av,av);this['view']['Camera']['CameraRotate'](aG,az);}else{let aH=new this['VIZCore']['Vector3'](aw,av,0x0);this['view']['Camera']['CameraRotate'](aH,az);}this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render'](),h=!![];}}}}}}}if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']){if(f['mouse']['x']===f['mouseLastPosition']['x']&&f['mouse']['y']===f['mouseLastPosition']['y'])return;let aI,aJ=a['Renderer']['GetSizeWidth'](),aK=a['Renderer']['GetSizeHeight'](),aL=aJ/0x2,aM=aK/0x2,aN,aO=this['view']['Renderer']['GetOrbitControlOver']();if(aO===!![])aN=Math['min'](aL*0x3,aM*0x3);else aN=Math['min'](aL*0.6,aM*0.6);let aP=new b['Vector3'](aL,aM,0x0),aQ=new b['Vector3'](f['mouse']['x'],f['mouse']['y'],0x0),aR=new b['Vector3'](f['mouseLastPosition']['x'],f['mouseLastPosition']['y'],0x0),aS=new b['Vector3']()['subVectors'](aQ,aP),aT=new b['Vector3']()['subVectors'](aR,aP),aU=aS['length'](),aV=aS['normalize'](),aW=aT['normalize']();if(!![]){if(aT['length']()>aN){let bj=new b['Vector3']()['addVectors'](aP,new b['Vector3']()['copy'](aW)['multiplyScalar'](aN));aR['x']=bj['x'],aR['y']=bj['y'];}if(aU>aN){let bk=new b['Vector3']()['addVectors'](aP,new b['Vector3']()['copy'](aV)['multiplyScalar'](aN));aQ['x']=bk['x'],aQ['y']=bk['y'];}let b4=(aR['y']-aM)/aN;if(b4<-0x1)b4=-0x1;if(b4>0x1)b4=0x1;let b5=Math['asin'](b4),b6=Math['cos'](b5)*aN,b7=(aR['x']-aL)/b6;if(b7<-0x1)b7=-0x1;if(b7>0x1)b7=0x1;let b8=Math['asin'](b7);b4=(aQ['y']-aM)/aN;if(b4<-0x1)b4=-0x1;if(b4>0x1)b4=0x1;let b9=Math['asin'](b4);b6=Math['cos'](b9)*aN,b7=(aQ['x']-aL)/b6;if(b7<-0x1)b7=-0x1;if(b7>0x1)b7=0x1;let ba=Math['asin'](b7),bb=new b['Matrix4'](),bc=new b['Matrix4'](),bd=new b['Vector3'](0x0,0x0,0x1);bb['makeRotationX'](-b5),bc['makeRotationY'](-b8);let be=new b['Matrix4']()['multiplyMatrices'](bc,bb);be=be['multiplyVector'](bd),bb['makeRotationX'](-b9),bc['makeRotationY'](-ba);let bf=new b['Matrix4']()['multiplyMatrices'](bc,bb);bf=bf['multiplyVector'](bd);let bg=new b['Vector3']()['crossVectors'](bf,be);bg=bg['normalize'](),bg['z']=-bg['z'],aS=new b['Vector3']()['subVectors'](bf,be),aS=aS['normalize']();let bh=aS['dot'](bg);bh=Math['sqrt'](0x1-bh*bh);let bi=bh*new b['Vector3']()['subVectors'](bf,be)['length']();if(aO===!![])bi*=0x5;aI=new b['Matrix4']()['makeRotationAxis'](bg,bi);}let aX=0x0;if(aU>aN){let bl=new b['Vector3']()['addVectors'](aP,aV['multiplyScalar'](aN)),bm=new b['Vector3']()['addVectors'](aP,aW['multiplyScalar'](aN));aQ['x']=bl['x'],aQ['y']=bl['y'],aR['x']=bm['x'],aR['y']=bm['y'];let bn=Math['atan2'](aQ['y']-aP['y'],aQ['x']-aP['x']),bo=Math['atan2'](aR['y']-aP['y'],aR['x']-aP['x']);aX=bn-bo;}this['view']['Renderer']['SetOrbitMousePos'](new b['Vector3']()['copy'](aQ));let aY=aQ['x']-aR['x'],aZ=aQ['y']-aR['y'];if(aX<0x0)aX=0x1;else{if(aX>0x0)aX=-0x1;}aY=aY/aN,aZ=aZ/aN;let b0=new b['Vector3']()['copy'](this['view']['Camera']['pivot']),b1=new b['Matrix4']()['copy'](this['view']['Camera']['matMVP']),b2=this['view']['Camera']['world2ScreenWithMatrix'](b1,b0);b2['x']=aJ*0.5,b2['y']=aK*0.5,b0=this['view']['Camera']['screen2WorldWithMatrix'](b1,b2),this['view']['Camera']['SetPivot'](b0);let b3;if(aX===0x0)this['view']['Camera']['CameraRotateByMatrix'](aI);else{let bp=Math['sqrt'](aY*aY+aZ*aZ)*aX;b3=new this['VIZCore']['Vector3'](0x0,0x0,bp),this['view']['Camera']['CameraRotate'](b3);}this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear']();if(this['view']['Renderer']['GetRenderOrbit']())this['view']['Renderer']['SetRenderOrbit'](!![]);this['view']['Renderer']['Render'](),h=!![];}const i=this['view']['Canvas_Review'];if(i!==undefined&&i!==null){if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'])this['view']['Camera']['RenderPivot']=!![],i['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['rotate']['src']+'\x27),\x20auto';else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])this['view']['Camera']['RenderPivot']=!![],i['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['move']['src']+'\x27),\x20auto';else(g===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']||g===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM'])&&(this['view']['Camera']['RenderPivot']=!![],i['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['zoom']['src']+'\x27),\x20auto');}const bq=document['getElementById'](f['view']['GetViewID']()+'canvas_multi');if(bq!==undefined&&bq!==null){if(g===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'])bq['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['rotate']['src']+'\x27),\x20auto';else{if(g===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])bq['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['move']['src']+'\x27),\x20auto';else(g===this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']||g===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM'])&&(bq['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['zoom']['src']+'\x27),\x20auto');}}}f['mouseLastPosition']=f['mouse'];if(h&&this['view']['Configuration']['Event']['EnableCameraChanged']){let br=this['view']['Camera']['GetCameraData']();this['view']['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Control']['Changed'],br);}};};UIBase['prototype']['UIBegin']=function(){this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'],this['mouseLeftDown']=![],this['mouseMiddleDown']=![],this['mouseRightDown']=![],this['delta']=0x0,this['EventCnt']=0x0,this['PivotUpdate']=!![];},UIBase['prototype']['UIEnd']=function(){this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'];},UIBase['prototype']['SetUIMode']=function(a){},UIBase['prototype']['IsUIMode']=function(a){return!![];},UIBase['prototype']['mouseDown']=function(a,b,c){this['mouse']=new this['VIZCore']['Vector2'](a,b),this['mouseDownPosition']=new this['VIZCore']['Vector2'](a,b),this['mouseLastPosition']=new this['VIZCore']['Vector2'](a,b);let d=![];this['mouseMiddleDown']===!![]&&(d=!![]);if(c===0x1)this['mouseMiddleDown']=!![],this['timeMouseMiddleDown']=new Date()['getTime']();else c===0x2?(this['mouseRightDown']=!![],this['timeMouseRightDown']=new Date()['getTime']()):(this['mouseLeftDown']=!![],this['timeMouseLeftDown']=new Date()['getTime']());if(this['actionEnabled']===![])return!![];this['longPressStart'](a,b,this);if(this['view']['Configuration']['Control']['Version']===0x0){if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['NONE']){this['_state']=c;this['_state']===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);switch(this['view']['Control']['_sub']){case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:{this['_state']=c,this['_state']===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{this['view']['Camera']['RenderPivot']=![];if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'],this['KeyPress']['ctrlKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']),this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'];else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_CAMERA']:{if(c===0x0)this['view']['Camera']['RenderPivot']=![],this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else c===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['SELECT']:{}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['FLY']:{}break;default:{}break;}if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']){let e=this['view']['ViewCube']['Pick'](a,b,![]);if(e){}}}}else{if(this['view']['Configuration']['Control']['Version']===0x1){if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['NONE']){switch(this['view']['Control']['_sub']){case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:{this['_state']=c,this['_state']===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{this['view']['Camera']['RenderPivot']=![];if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'],this['KeyPress']['ctrlKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']),this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM']);else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'];else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_CAMERA']:{if(c===0x0)this['view']['Camera']['RenderPivot']=![],this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else c===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['SELECT']:{}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['FLY']:{}break;default:{}break;}if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']){let f=this['view']['ViewCube']['Pick'](a,b,![]);if(f){}}}}else{if(this['view']['Configuration']['Control']['Version']===0x2){if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['NONE'])switch(this['view']['Control']['_sub']){case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{c===0x1&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['mousePivotUpdate'](a,b,this));}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{this['view']['Camera']['RenderPivot']=![];if(c===0x0)this['KeyPress']['ctrlKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['ctrlKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']);else{if(c===0x2){if(this['KeyPress']['altKey']&&this['KeyPress']['ctrlKey'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else this['KeyPress']['altKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}}}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN']:{if(c===0x0)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN']);}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_CAMERA']:{if(c===0x0)this['view']['Camera']['RenderPivot']=![],this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else{if(c===0x1)this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['PAN'],this['KeyPress']['shiftKey']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);else c===0x2&&(this['view']['Camera']['RenderPivot']=![],this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);}}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['SELECT']:{}break;case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['FLY']:{}break;default:{}break;}else{if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['PAN'])switch(this['view']['Control']['_sub']){case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{this['_state']=c;if(this['_state']===0x0&&this['mouseMiddleDown'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else this['_state']===0x2&&this['mouseMiddleDown']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']){let g=this['view']['ViewCube']['Pick'](a,b,![]);if(g){}}}case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{this['_state']=c;if(this['_state']===0x0&&this['mouseMiddleDown'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else this['_state']===0x2&&this['mouseMiddleDown']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);}break;}else{if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM'])switch(this['view']['Control']['_sub']){case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['NONE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_FIXEDZ']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE']:case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ROTATE_WFIXEDZ']:{this['_state']=c;this['_state']===0x0&&this['mouseMiddleDown']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']){let h=this['view']['ViewCube']['Pick'](a,b,![]);if(h){}}}case this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT']:{this['_state']=c;if(this['_state']===0x0&&this['mouseMiddleDown'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE'];else this['_state']===0x2&&this['mouseMiddleDown']&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']);}break;}}}}}}return!![];},UIBase['prototype']['mouseMove']=function(a,b){this['mouse']=new this['VIZCore']['Vector2'](a,b);if(this['actionEnabled']===![]){this['mouseLastPosition']=new this['VIZCore']['Vector2'](a,b);return;}if(!this['mouseLeftDown']&&this['view']['ViewCube']['Visible']&&this['view']['MultiView'][this['view']['CameraIndex']]['ViewEntityInfo']['ShowViewCube']){let c=this['view']['ViewCube']['GetPickID'](),d=this['view']['ViewCube']['Pick'](a,b,![]),e=this['view']['ViewCube']['GetPickID']();c!==e&&this['view']['Renderer']['Render']();}else this['view']['Configuration']['Control']['Update']&&(console['log']('control\x20Update'),this['view']['ViewRefresh'](),this['view']['Renderer']['Renderer']());this['longPressCheck'](a,b,this),this['update'](this);},UIBase['prototype']['GetMouseClick']=function(a,b,c){let d=new this['VIZCore']['Vector2'](a,b),e=new this['VIZCore']['Vector2']()['subVectors'](this['mouseDownPosition'],d);if(e['length']()<0x5){let f=0x1f4;if(c===undefined||c===0x0){let g=new Date()['getTime']()-this['timeMouseLeftDown'];f=g;}else{if(c===0x1){let h=new Date()['getTime']()-this['timeMouseMiddleDown'];f=h;}else{if(c===0x2){let i=new Date()['getTime']()-this['timeMouseRightDown'];f=i;}}}if(f<0x1f4)return!![];}return![];},UIBase['prototype']['mouseUp']=function(a,b,c){let d=this['_state'];this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'];let e=this['view']['Control']['GetMode']();const f=document['getElementById'](this['view']['GetViewID']()+'canvas_review');if(f!==undefined&&f!==null){if(e===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH'])f['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['walkthrough']['src']+'\x27),\x20auto';else f['style']['cursor']='default';const g=document['getElementById'](this['view']['GetViewID']()+'canvas_multi');if(g!==undefined&&g!==null){if(e===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH'])g['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['walkthrough']['src']+'\x27),\x20auto';else g['style']['cursor']='default';}}if(c===0x1)this['mouseMiddleDown']=![];c===0x2?(this['mouseRightDown']=![],this['mouseLeftDown']=![]):this['mouseLeftDown']=![];this['view']['Camera']['RenderPivot']=![],this['mouse']=new this['VIZCore']['Vector2'](a,b),this['longPressEnd'](a,b,this);if(this['actionEnabled']===![])return!![];if(this['view']['Configuration']['Control']['Version']===0x2){if(d===this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']&&c!==0x1){if(this['mouseMiddleDown']){this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM'];return;}}}if(c===0x0){if(this['GetMouseClick'](a,b)){let h=!![],i=this['view']['Control']['GetMode']();(i===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH']||i===this['VIZCore']['Enum']['CONTROL_STATE']['FLY'])&&(h=![]);let j=![];if(h)j=this['view']['ViewCube']['Pick'](a,b,![]);if(j){let k=this['view']['ViewCube']['GetPickID'](),l=![];switch(k){case 0x6f:this['view']['Camera']['ViewLeftElevation'](),l=!![];break;case 0xd3:this['view']['Camera']['ViewRightElevation'](),l=!![];break;case 0x137:this['view']['Camera']['ViewFrontSection'](),l=!![];break;case 0x19b:this['view']['Camera']['ViewBackSection'](),l=!![];break;case 0x1ff:this['view']['Camera']['ViewBottomPlan'](),l=!![];break;case 0x263:this['view']['Camera']['ViewTopPlan'](),l=!![];break;case 0x64:case 0x12e:case 0x258:this['view']['Camera']['ViewISOLeftFrontTop'](),l=!![];break;case 0x78:case 0x190:case 0x25a:this['view']['Camera']['ViewISOLeftBackTop'](),l=!![];break;case 0xca:case 0x142:case 0x26c:this['view']['Camera']['ViewISORightFrontTop'](),l=!![];break;case 0xde:case 0x1a4:case 0x26e:this['view']['Camera']['ViewISORightBackTop'](),l=!![];break;case 0x66:case 0x12c:case 0x1f6:this['view']['Camera']['ViewISOLeftFrontBottom'](),l=!![];break;case 0x7a:case 0x192:case 0x1f4:this['view']['Camera']['ViewISOLeftBackBottom'](),l=!![];break;case 0xc8:case 0x140:case 0x20a:this['view']['Camera']['ViewISORightFrontBottom'](),l=!![];break;case 0xdc:case 0x1a6:case 0x208:this['view']['Camera']['ViewISORightBackBottom'](),l=!![];break;case 0x70:case 0x1f5:this['view']['Camera']['ViewLeftBottomSide'](),l=!![];break;case 0x65:case 0x12d:this['view']['Camera']['ViewLeftFrontSide'](),l=!![];break;case 0x79:case 0x191:this['view']['Camera']['ViewLeftBackSide'](),l=!![];break;case 0x6e:case 0x259:this['view']['Camera']['ViewLeftTopSide'](),l=!![];break;case 0xd4:case 0x26d:this['view']['Camera']['ViewRightTopSide'](),l=!![];break;case 0xc9:case 0x141:this['view']['Camera']['ViewRightFrontSide'](),l=!![];break;case 0xdd:case 0x1a5:this['view']['Camera']['ViewRightBackSide'](),l=!![];break;case 0xd2:case 0x209:this['view']['Camera']['ViewRightBottomSide'](),l=!![];break;case 0x138:case 0x262:this['view']['Camera']['ViewFrontTopSide'](),l=!![];break;case 0x136:case 0x200:this['view']['Camera']['ViewFrontBottomSide'](),l=!![];break;case 0x19a:case 0x264:this['view']['Camera']['ViewBackTopSide'](),l=!![];break;case 0x19c:case 0x1fe:this['view']['Camera']['ViewBackBottomSide'](),l=!![];break;}if(l&&this['view']['Configuration']['Event']['EnableCameraChanged']){let m=this['view']['Camera']['GetCameraData']();this['view']['EventHandler']['dispatchEvent'](this['VIZCore']['Enum']['EVENT_TYPES']['Control']['Changed'],m);}}else{let n=this['view']['Data']['GetSelection'](),o=[];if(!this['KeyPress']['ctrlKey']){if(this['view']['DemoType']!==0x5){if(this['view']['Configuration']['Model']['Selection']['Duplicate']===0x1)o=this['view']['Data']['GetSelectionNodes']();this['view']['Data']['DeselectAll'](),this['view']['CustomObject']['DeselectAll']();}}let p=function(r,s){if(r['view']['Browser']['IsMS'])r['view']['Camera']['SetPivot'](s['BBox']['center']);else{const t=r['view']['Data']['GetPickByBody'](s['bodyId'],a,b);t['pick']?(r['view']['Camera']['SetPivot'](t['position']),r['view']['EventHandler']['dispatchEvent'](r['VIZCore']['Enum']['EVENT_TYPES']['Model']['Select_Position'],t['position'])):r['view']['Camera']['SetPivot'](s['BBox']['center']);}if(r['view']['DemoType']===0x2){let u=s['bodyId']%0x2710;if(u===0xbe);else{if(u===0xb7);else{if(u===0xb9);else{if(u===0xbc);else{if(r['KeyPress']['ctrlKey'])r['view']['Data']['Select'](s['bodyId'],!![],!![]);else r['view']['Data']['Select'](s['bodyId'],!![],![]);}}}}}else{if(r['view']['DemoType']===0x3){if(s['bodyId']===0xa||s['bodyId']===0xc||s['bodyId']===0xe||s['bodyId']===0x10);else{if(r['KeyPress']['ctrlKey'])r['view']['Data']['Select'](s['bodyId'],!![],!![]);else r['view']['Data']['Select'](s['bodyId'],!![],![]);}}else{if(r['view']['DemoType']===0x4){if(s['bodyId']===0x57);else{if(r['KeyPress']['ctrlKey'])r['view']['Data']['Select'](s['bodyId'],!![],!![]);else r['view']['Data']['Select'](s['bodyId'],!![],![]);}}else{if(r['view']['DemoType']===0x5){let v=r['view']['Tree']['GetNodeInfo'](s['bodyId']);console['log']('Node\x20::\x20',v);let w=r['view']['Tree']['GetParentNodeInfoByLevel'](v['node_id'],0x2),z=w['node_id'];if(z===0x5a1||z===0x5c9||z===0x59a||z===0x596||z===0x5d4||z===0x5a4||z==0x5cf){if(v['node_id']===0x5a4)r['view']['Data']['Select'](v['node_id'],!v['selection'],!![]);else v['node_id']===0x5a5||v['node_id']===0x5ae||v['node_id']===0x5b0||v['node_id']===0x5b7||v['node_id']===0x5c2?r['view']['Tree']['SelectMulti']([0x5a5,0x5ae,0x5b0,0x5b7,0x5c2],!v['selection'],!![]):r['view']['Data']['Select'](w['node_id'],!v['selection'],!![]);}}else{if(r['view']['DemoType']===0x7){let A=r['view']['Custom']['GetSelectionIds'](),B=A['indexOf'](s['bodyId']);if(B!==-0x1){if(r['KeyPress']['ctrlKey'])r['view']['Data']['Select'](s['bodyId'],!![],!![]);else r['view']['Data']['Select'](s['bodyId'],!![],![]);}}else{if(r['KeyPress']['ctrlKey']){let C=n['find'](D=>D==s['bodyId']);if(C!==undefined)r['view']['Data']['Select'](s['bodyId'],![],!![]);else r['view']['Data']['Select'](s['bodyId'],!![],!![]);}else{let D=n['find'](E=>E==s['bodyId']);if(D!==undefined)r['view']['Configuration']['Model']['Selection']['Duplicate']===0x1?(r['view']['Data']['SetSelectionNodes'](o,!![]),r['view']['Data']['SelectUpperNode'](n,s['bodyId'],!![],![])):r['view']['Data']['Select'](s['bodyId'],![],![]);else r['view']['Data']['Select'](s['bodyId'],!![],![]);}}}}}}r['view']['Renderer']['Render']();},q=function(r,s,t){if(r['view']['Browser']['IsMS'])r['view']['Camera']['SetPivot'](t['BBox']['center']);else{const u=r['view']['CustomObject']['GetPickByBody'](s['uuid'],a,b);u['pick']?(r['view']['Camera']['SetPivot'](u['position']),r['view']['EventHandler']['dispatchEvent'](r['VIZCore']['Enum']['EVENT_TYPES']['Model']['Select_Position'],u['position'])):r['view']['Camera']['SetPivot'](t['BBox']['center']);}if(r['KeyPress']['ctrlKey'])r['view']['CustomObject']['Select']([s['uuid']],!![],!![]);else r['view']['CustomObject']['Select']([s['uuid']],!![],![]);r['view']['Renderer']['Render']();};if(this['view']['Configuration']['Model']['Selection']['Kind']!==this['VIZCore']['Enum']['SelectionObject3DTypes']['NONE']){let r=this['view']['Renderer']['PickingCallback'](this['mouse']['x'],this['mouse']['y'],this,p,q);}}}}else{if(c===0x1){if(this['view']['DemoType']!==0x6){if(this['GetMouseClick'](a,b,0x1)){let s=function(u,v){if(u['view']['Browser']['IsMS'])u['view']['Camera']['SetPivot'](v['BBox']['center']);else{const w=u['view']['Data']['GetPickByBody'](v['bodyId'],a,b);w['pick']?u['view']['Camera']['SetPivot'](w['position']):u['view']['Camera']['SetPivot'](v['BBox']['center']);}u['view']['Camera']['FocusPivot'](),u['view']['Renderer']['Render']();},t=function(u,v,w){if(u['view']['Browser']['IsMS'])u['view']['Camera']['SetPivot'](w['BBox']['center']);else{const z=u['view']['CustomObject']['GetPickByBody'](v['uuid'],a,b);z['pick']?u['view']['Camera']['SetPivot'](z['position']):u['view']['Camera']['SetPivot'](w['BBox']['center']);}u['view']['Camera']['FocusPivot'](),u['view']['Renderer']['Render']();};if(this['view']['Configuration']['Model']['Selection']['Kind']!==this['VIZCore']['Enum']['SelectionObject3DTypes']['NONE']){let u=this['view']['Renderer']['PickingCallback'](this['mouse']['x'],this['mouse']['y'],this,s,t);}}}}}if(this['view']['useFramebuffer'])this['view']['ViewRefresh']();return!![];},UIBase['prototype']['mouseWheel']=function(a,b,c){this['mouse']=new this['VIZCore']['Vector2'](a,b);if(this['actionEnabled']===![])return;if(this['view']['Configuration']['Control']['Version']===0x2){if(this['_state']!=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'])return;}this['EventCnt']++;if(this['view']['IsUseProgressive']())this['view']['Renderer']['enableRenderLimit']=!![];let d=this['_state'];this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ZOOM'],this['delta']=c;this['PivotUpdate']&&this['mousePivotUpdate'](a,b,this);let e=this,f=this['view']['Camera'];this['PivotUpdate']=![],e['view']['Camera']['RenderPivot']=!![],this['update'](this),setTimeout(function(){e['EventCnt']--;if(e['EventCnt']===0x0){e['PivotUpdate']=!![];if(!e['mouseLeftDown']){if(f['RenderPivot'])f['RenderPivot']=![];}if(e['view']['IsUseProgressive']())e['view']['Renderer']['enableRenderLimit']=![];if(!e['mouseLeftDown']&&e['view']['useFramebuffer'])e['view']['ViewRefresh']();const g=document['getElementById'](e['view']['GetViewID']()+'canvas_review');if(g!==undefined&&g!==null){g['style']['cursor']='default';const h=document['getElementById'](e['view']['GetViewID']()+'canvas_multi');h!==undefined&&h!==null&&(h['style']['cursor']='default');}}else e['PivotUpdate']=![];},0xc8),this['_state']=d;},UIBase['prototype']['mouseOver']=function(){let a=this['view']['Control']['GetMode']();const b=document['getElementById'](this['view']['GetViewID']()+'canvas_review');if(b===undefined||b===null)return;a===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH']?b['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['walkthrough']['src']+'\x27),\x20auto':b['style']['cursor']='default';const c=document['getElementById'](this['view']['GetViewID']()+'canvas_multi');if(c===undefined||c===null)return;a===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH']?c['style']['cursor']='url(\x27'+this['view']['Control']['imageObjects']['walkthrough']['src']+'\x27),\x20auto':c['style']['cursor']='default';},UIBase['prototype']['mouseOut']=function(a,b,c){this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'],this['mouseLeftDown']=![];},UIBase['prototype']['mouseDoubleClick']=function(a,b,c){if(this['view']['Configuration']['Control']['UseAutoFit']){this['mouse']=new this['VIZCore']['Vector2'](a,b);{let d=!![],e=this['view']['Control']['GetMode']();e===this['VIZCore']['Enum']['CONTROL_STATE']['WALKTHROUGH']&&(d=![]);let f=![];if(d)f=this['view']['ViewCube']['Pick'](a,b,![]);if(f){let g=this['view']['ViewCube']['GetPickID'](),h=![];switch(g){case 0x6f:this['view']['Camera']['ViewLeftElevation'](),h=!![];break;case 0xd3:this['view']['Camera']['ViewRightElevation'](),h=!![];break;case 0x137:this['view']['Camera']['ViewFrontSection'](),h=!![];break;case 0x19b:this['view']['Camera']['ViewBackSection'](),h=!![];break;case 0x1ff:this['view']['Camera']['ViewBottomPlan'](),h=!![];break;case 0x263:this['view']['Camera']['ViewTopPlan'](),h=!![];break;case 0x64:case 0x12e:case 0x258:this['view']['Camera']['ViewISOLeftFrontTop'](),h=!![];break;case 0x78:case 0x190:case 0x25a:this['view']['Camera']['ViewISOLeftBackTop'](),h=!![];break;case 0xca:case 0x142:case 0x26c:this['view']['Camera']['ViewISORightFrontTop'](),h=!![];break;case 0xde:case 0x1a4:case 0x26e:this['view']['Camera']['ViewISORightBackTop'](),h=!![];break;case 0x66:case 0x12c:case 0x1f6:this['view']['Camera']['ViewISOLeftFrontBottom'](),h=!![];break;case 0x7a:case 0x192:case 0x1f4:this['view']['Camera']['ViewISOLeftBackBottom'](),h=!![];break;case 0xc8:case 0x140:case 0x20a:this['view']['Camera']['ViewISORightFrontBottom'](),h=!![];break;case 0xdc:case 0x1a6:case 0x208:this['view']['Camera']['ViewISORightBackBottom'](),h=!![];break;case 0x70:case 0x1f5:this['view']['Camera']['ViewLeftBottomSide'](),h=!![];break;case 0x65:case 0x12d:this['view']['Camera']['ViewLeftFrontSide'](),h=!![];break;case 0x79:case 0x191:this['view']['Camera']['ViewLeftBackSide'](),h=!![];break;case 0x6e:case 0x259:this['view']['Camera']['ViewLeftTopSide'](),h=!![];break;case 0xd4:case 0x26d:this['view']['Camera']['ViewRightTopSide'](),h=!![];break;case 0xc9:case 0x141:this['view']['Camera']['ViewRightFrontSide'](),h=!![];break;case 0xdd:case 0x1a5:this['view']['Camera']['ViewRightBackSide'](),h=!![];break;case 0xd2:case 0x209:this['view']['Camera']['ViewRightBottomSide'](),h=!![];break;case 0x138:case 0x262:this['view']['Camera']['ViewFrontTopSide'](),h=!![];break;case 0x136:case 0x200:this['view']['Camera']['ViewFrontBottomSide'](),h=!![];break;case 0x19a:case 0x264:this['view']['Camera']['ViewBackTopSide'](),h=!![];break;case 0x19c:case 0x1fe:this['view']['Camera']['ViewBackBottomSide'](),h=!![];break;}if(h&&this['view']['Configuration']['Event']['EnableCameraChanged']){let i=this['view']['Camera']['GetCameraData']();this['view']['EventHandler']['dispatchEvent'](this['VIZCore']['Enum']['EVENT_TYPES']['Control']['Changed'],i);}}else{let j=function(l,m){if(l['view']['Browser']['IsMS'])l['view']['Camera']['SetPivot'](m['BBox']['center']);else{const n=l['view']['Data']['GetPickByBody'](m['bodyId'],a,b);n['pick']?l['view']['Camera']['SetPivot'](n['position']):l['view']['Camera']['SetPivot'](m['BBox']['center']);}{if(l['view']['Configuration']['Model']['Selection']['Duplicate']===0x1){let o=[];o=l['view']['Data']['GetSelectionNodes']();let p=l['view']['Data']['GetSelection']();l['view']['Data']['SetSelectionNodes'](o,!![]),l['view']['Data']['SelectUpperNode'](p,m['bodyId'],!![],![]);}else l['view']['Data']['Select'](m['bodyId'],!![],![]);}l['view']['Renderer']['Render']();},k=function(l,m,n){if(l['view']['Browser']['IsMS'])l['view']['Camera']['SetPivot'](n['BBox']['center']);else{const o=l['view']['CustomObject']['GetPickByBody'](m['uuid'],a,b);o['pick']?l['view']['Camera']['SetPivot'](o['position']):l['view']['Camera']['SetPivot'](n['BBox']['center']);}if(l['KeyPress']['ctrlKey'])l['view']['CustomObject']['Select']([m['uuid']],!![],!![]);else l['view']['CustomObject']['Select']([m['uuid']],!![],![]);l['view']['Renderer']['Render']();};if(this['view']['Configuration']['Model']['Selection']['Kind']!==this['VIZCore']['Enum']['SelectionObject3DTypes']['NONE']){let l=this['view']['Renderer']['PickingCallback'](this['mouse']['x'],this['mouse']['y'],this,j,k);}}}this['view']['Data']['ZoomSelection']();}},UIBase['prototype']['touchStart']=function(a){let b=this['view']['Control']['GetCalcTouchPos'](a[0x0]);this['mouse']=new this['VIZCore']['Vector2'](b['x'],b['y']),this['mouseDownPosition']=new this['VIZCore']['Vector2']()['copy'](this['mouse']),this['mouseLastPosition']=new this['VIZCore']['Vector2']()['copy'](this['mouse']),this['mouseLeftDown']=!![],this['timeMouseLeftDown']=new Date()['getTime'](),this['_touchLastCount']=a['length'],this['_touchLast']=a;if(this['actionEnabled']===![])return;switch(a['length']){case 0x1:if(this['view']['Control']['_sub']===this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['PAN'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN'];else{if(this['view']['Control']['_sub']===this['VIZCore']['Enum']['MOUSE_CONTROL_SUB_TYPE']['ORBIT'])this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ORBIT'];else this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ROTATE'];}this['mouse']=new this['VIZCore']['Vector2'](b['x'],b['y']),this['mouseDownPosition']=new this['VIZCore']['Vector2'](b['x'],b['y']);break;case 0x2:this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN'];{let c=this['view']['Control']['GetCalcTouchPos'](a[0x0]),d=this['view']['Control']['GetCalcTouchPos'](a[0x1]),e=(c['x']+d['x'])/0x2,f=(c['y']+d['y'])/0x2;this['mouse']=new this['VIZCore']['Vector2'](e,f),this['mouseDownPosition']=new this['VIZCore']['Vector2'](e,f),this['mouseLastPosition']=new this['VIZCore']['Vector2'](e,f);let g=c['x']-d['x'],h=c['y']-d['y'];this['_touchZoomDistanceEnd']=this['_touchZoomDistanceStart']=Math['sqrt'](g*g+h*h);}break;}},UIBase['prototype']['touchMove']=function(a){this['_touchLast']=a;switch(a['length']){case 0x1:{let b=this['view']['Control']['GetCalcTouchPos'](a[0x0]);this['mouse']=new this['VIZCore']['Vector2'](b['x'],b['y']);}break;case 0x2:{let c=this['view']['Control']['GetCalcTouchPos'](a[0x0]),d=this['view']['Control']['GetCalcTouchPos'](a[0x1]),e=(c['x']+d['x'])/0x2,f=(c['y']+d['y'])/0x2;this['mouse']=new this['VIZCore']['Vector2'](e,f);let g=c['x']-d['x'],h=c['y']-d['y'];this['_touchZoomDistanceEnd']=Math['sqrt'](g*g+h*h);if(this['_touchZoomDistanceStart']!==0x0)this['delta']=this['_touchZoomDistanceStart']/this['_touchZoomDistanceEnd'];else this['delta']=0x0;}break;default:break;}if(this['actionEnabled']===![]){this['mouseLastPosition']=new this['VIZCore']['Vector2']()['copy'](this['mouse']);return;}if(this['_state']===this['VIZCore']['Enum']['MOUSE_STATE']['TOUCH_ZOOM_PAN']&&this['delta']!==0x0){this['EventCnt']++;if(this['PivotUpdate']){let j=![],k=this['view']['Renderer']['Picking'](this['mouse']['x'],this['mouse']['y']);if(k!==undefined){let l;l=this['view']['Data']['GetPickByBody'](k['bodyId'],this['mouse']['x'],this['mouse']['y']),l['pick']&&(this['view']['Camera']['SetPivot'](l['position']),j=!![]);}}let i=this;i['PivotUpdate']=![],setTimeout(function(){i['EventCnt']--;if(i['EventCnt']===0x0){i['PivotUpdate']=!![];if(i['view']['IsUseProgressive']())i['view']['Renderer']['enableRenderLimit']=![];if(!i['mouseLeftDown']&&i['view']['useFramebuffer'])i['view']['MeshBlock']['Reset']();}else i['PivotUpdate']=![];},0x12c);}this['update'](this);},UIBase['prototype']['touchEnd']=function(a){this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['NONE'],this['mouseLeftDown']=![];if(this['actionEnabled']===![]){this['_touchLastCount']=a['length'];if(this['_touchLastCount']===0x0)this['view']['Camera']['RenderPivot']=![];return;}switch(this['_touchLastCount']){case 0x1:let b=this['mouse']['x'],c=this['mouse']['y'],d=!![],e=![];if(d)e=this['view']['ViewCube']['Pick'](b,c,![]);if(e){let f=this['view']['ViewCube']['GetPickID'](),g=![];switch(f){case 0x6f:this['view']['Camera']['ViewLeftElevation'](),g=!![];break;case 0xd3:this['view']['Camera']['ViewRightElevation'](),g=!![];break;case 0x137:this['view']['Camera']['ViewFrontSection'](),g=!![];break;case 0x19b:this['view']['Camera']['ViewBackSection'](),g=!![];break;case 0x1ff:this['view']['Camera']['ViewBottomPlan'](),g=!![];break;case 0x263:this['view']['Camera']['ViewTopPlan'](),g=!![];break;case 0x64:case 0x12e:case 0x258:this['view']['Camera']['ViewISOLeftFrontTop'](),g=!![];break;case 0x78:case 0x190:case 0x25a:this['view']['Camera']['ViewISOLeftBackTop'](),g=!![];break;case 0xca:case 0x142:case 0x26c:this['view']['Camera']['ViewISORightFrontTop'](),g=!![];break;case 0xde:case 0x1a4:case 0x26e:this['view']['Camera']['ViewISORightBackTop'](),g=!![];break;case 0x66:case 0x12c:case 0x1f6:this['view']['Camera']['ViewISOLeftFrontBottom'](),g=!![];break;case 0x7a:case 0x192:case 0x1f4:this['view']['Camera']['ViewISOLeftBackBottom'](),g=!![];break;case 0xc8:case 0x140:case 0x20a:this['view']['Camera']['ViewISORightFrontBottom'](),g=!![];break;case 0xdc:case 0x1a6:case 0x208:this['view']['Camera']['ViewISORightBackBottom'](),g=!![];break;case 0x70:case 0x1f5:this['view']['Camera']['ViewLeftBottomSide'](),g=!![];break;case 0x65:case 0x12d:this['view']['Camera']['ViewLeftFrontSide'](),g=!![];break;case 0x79:case 0x191:this['view']['Camera']['ViewLeftBackSide'](),g=!![];break;case 0x6e:case 0x259:this['view']['Camera']['ViewLeftTopSide'](),g=!![];break;case 0xd4:case 0x26d:this['view']['Camera']['ViewRightTopSide'](),g=!![];break;case 0xc9:case 0x141:this['view']['Camera']['ViewRightFrontSide'](),g=!![];break;case 0xdd:case 0x1a5:this['view']['Camera']['ViewRightBackSide'](),g=!![];break;case 0xd2:case 0x209:this['view']['Camera']['ViewRightBottomSide'](),g=!![];break;case 0x138:case 0x262:this['view']['Camera']['ViewFrontTopSide'](),g=!![];break;case 0x136:case 0x200:this['view']['Camera']['ViewFrontBottomSide'](),g=!![];break;case 0x19a:case 0x264:this['view']['Camera']['ViewBackTopSide'](),g=!![];break;case 0x19c:case 0x1fe:this['view']['Camera']['ViewBackBottomSide'](),g=!![];break;}if(g&&this['view']['Configuration']['Event']['EnableCameraChanged']){let h=this['view']['Camera']['GetCameraData']();this['view']['EventHandler']['dispatchEvent'](this['VIZCore']['Enum']['EVENT_TYPES']['Control']['Changed'],h);}}else{if(this['GetMouseClick'](b,c)){let i=this['view']['Data']['GetSelection']();!this['KeyPress']['ctrlKey']&&(this['view']['DemoType']!==0x5&&(this['view']['Data']['DeselectAll'](),this['view']['CustomObject']['DeselectAll']()));let j=function(l,m){if(l['view']['Browser']['IsMS'])l['view']['Camera']['SetPivot'](m['BBox']['center']);else{const n=l['view']['Data']['GetPickByBody'](m['bodyId'],b,c);n['pick']?l['view']['Camera']['SetPivot'](n['position']):l['view']['Camera']['SetPivot'](m['BBox']['center']);}{if(l['KeyPress']['ctrlKey']){let o=i['find'](p=>p==m['bodyId']);if(o!==undefined)l['view']['Data']['Select'](m['bodyId'],![],!![]);else l['view']['Data']['Select'](m['bodyId'],!![],!![]);}else{let p=i['find'](q=>q==m['bodyId']);if(p!==undefined)l['view']['Data']['Select'](m['bodyId'],![],![]);else l['view']['Data']['Select'](m['bodyId'],!![],![]);}}l['view']['Renderer']['Render']();},k=function(l,m,n){if(l['view']['Browser']['IsMS'])l['view']['Camera']['SetPivot'](n['BBox']['center']);else{const o=l['view']['CustomObject']['GetPickByBody'](m['uuid'],b,c);o['pick']?l['view']['Camera']['SetPivot'](o['position']):l['view']['Camera']['SetPivot'](n['BBox']['center']);}if(l['KeyPress']['ctrlKey'])l['view']['CustomObject']['Select']([m['uuid']],!![],!![]);else l['view']['CustomObject']['Select']([m['uuid']],!![],![]);l['view']['Renderer']['Render']();};if(this['view']['Configuration']['Model']['Selection']['Kind']!==this['VIZCore']['Enum']['SelectionObject3DTypes']['NONE']){let l=this['view']['Renderer']['PickingCallback'](this['mouse']['x'],this['mouse']['y'],this,j,k);}}}this['view']['ViewRefresh']();break;case 0x2:this['_touchZoomDistanceStart']=this['_touchZoomDistanceEnd']=0x0;break;}this['_touchLastCount']=a['length'];if(this['_touchLastCount']===0x0)this['view']['Camera']['RenderPivot']=![];},UIBase['prototype']['Render']=function(){},UIBase['prototype']['Render2D']=function(a){},UIBase['prototype']['keyDown']=function(a){a==0x11&&(this['mouseMiddleDown']===!![]&&this['_state']!==this['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM']&&this['view']['Configuration']['Control']['Version']===0x2&&(this['_state']=this['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']));},UIBase['prototype']['keyPress']=function(a){},UIBase['prototype']['keyUp']=function(a,b){a===0x11&&(b['mouseMiddleDown']===!![]&&(b['_state']===b['VIZCore']['Enum']['MOUSE_STATE']['ROTATE']||b['_state']===b['VIZCore']['Enum']['MOUSE_STATE']['MOUSE_ZOOM'])&&b['view']['Configuration']['Control']['Version']===0x2&&(b['_state']=b['VIZCore']['Enum']['MOUSE_STATE']['PAN']));},UIBase['prototype']['SetSubType']=function(a){},UIBase['prototype']['GetUIControl']=function(){return undefined;},UIBase['prototype']['ShowPivot']=function(a){this['view']['Camera']['RenderPivot']=a,this['view']['Camera']['ResizeGLWindow'](),this['view']['Renderer']['MainFBClear'](),this['view']['Renderer']['Render']();};export default UIBase;