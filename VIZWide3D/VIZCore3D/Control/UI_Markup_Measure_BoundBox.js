let UIMarkup_Measure_BoundBox=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=undefined,f=undefined,g=undefined;this['Start']=function(){let h='MG0003';b['UIManager']['ShowMessage'](h),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){e=undefined,f=undefined,g=undefined,d['base']['prototype']['Release']['call'](d);},this['SetSubType']=function(h){d['MarkupSubType']=h;if(d['MarkupSubType']===0x0){let i=b['Data']['GetSelection']();if(i['length']>0x0){let j=b['Data']['GetBodies'](i);f=b['Data']['GetBBoxFormMatrix'](j),a['currentReviewItem']['drawitem']['custom']=f,a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_BOUNDBOX'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Data']['Reviews']['push'](a['currentReviewItem']),a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}}else g=b['Data']['GetSelection']();},this['PreviousStep']=function(){if(d['MarkupSubType']===0x1)switch(a['GetStep']()){case 0x1:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(h){if(d['MarkupSubType']===0x0)switch(a['GetStep']()){case 0x0:{if(h===undefined)return;if(!h['pick'])return;if(h['body']===undefined)return;e=h,f=b['Data']['GetBBoxFormMatrix']([h['body']]),a['currentReviewItem']['drawitem']['custom']=f,a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_BOUNDBOX'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Data']['Reviews']['push'](a['currentReviewItem']),a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}else{if(d['MarkupSubType']===0x1)switch(a['GetStep']()){case 0x0:{if(h===undefined)return;if(!h['pick'])return;if(h['body']===undefined)return;e=h,b['Renderer']['Render']();if(!g||g['length']===0x0){a['NextStep']();break;}}case 0x1:{if(h===undefined)return;if(!h['pick'])return;if(h['body']===undefined)return;let i=undefined;if(g&&g['length']>0x0)i=b['Data']['GetMeasureBoundBoxParamByNode'](g,new c['Vector3']()['copy'](h['normal']));else i=b['Data']['GetMeasureBoundBoxParamByNode']([h['body']['bodyId']],new c['Vector3']()['copy'](h['normal']));if(!i['result'])break;a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_BOUNDBOX'],a['currentReviewItem']['drawitem']['position'][0x0]=i['vXAxis'],a['currentReviewItem']['drawitem']['position'][0x1]=i['vYAxis'],a['currentReviewItem']['drawitem']['position'][0x2]=i['vZAxis'],a['currentReviewItem']['drawitem']['position'][0x3]=i['vBase'],a['currentReviewItem']['drawitem']['position'][0x4]=i['vOffset'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Data']['Reviews']['push'](a['currentReviewItem']),a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}}},this['mouseDown']=function(h,i,j){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,h,i,j),a['actionEnabled']=!![],!![];},this['mouseMove']=function(h,i){a['base']['prototype']['mouseMove']['call'](a,h,i);},this['mouseUp']=function(h,i,j){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,h,i,j),a['actionEnabled']=!![];if(d['MarkupSubType']===0x0){if(j===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:{let k=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);k!==undefined&&(b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![]);}break;case 0x1:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();}else{if(d['MarkupSubType']===0x1){if(a['GetMouseClick'](a['mouse']['x'],a['mouse']['y'])&&j===0x0)switch(a['GetStep']()){case 0x0:case 0x1:{let l=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);l!==undefined&&(b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![]);}break;case 0x2:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();}}return d['mouseAction'];},this['mouseWheel']=function(h,i,j){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ZOOM']))a['base']['prototype']['mouseWheel']['call'](a,h,i,j);},this['Render']=function(){},this['Render2D']=function(h){if(d['MarkupSubType']===0x1){const i=new c['Matrix4']()['copy'](b['Camera']['matMV']),j=new c['Matrix4']()['copy'](b['Camera']['matMVP']);switch(a['GetStep']()){case 0x0:break;case 0x1:{let k=0x3;h['fillStyle']='rgba(0,\x20255,\x200,\x201)',h['strokeStyle']='rgba(255,\x20255,\x20255,\x201)',h['lineWidth']=0x1;let l=new c['Matrix4']()['transformVector'](j['elements'],[e['position']['x'],e['position']['y'],e['position']['z'],0x1]);l[0x0]/=l[0x3],l[0x1]/=l[0x3];let m=(l[0x0]*0.5+0.5)*h['canvas']['width'],n=(l[0x1]*-0.5+0.5)*h['canvas']['height'];h['beginPath'](),h['arc'](m,n,k,0x0,Math['PI']*0x2),h['fill']();}break;}}},this['GetProcessFlag']=function(h){if(d['MarkupSubType']===0x0)switch(a['GetStep']()){case 0x0:{if(h===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(h===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(h===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}else{if(d['MarkupSubType']===0x1)switch(a['GetStep']()){case 0x0:case 0x1:{if(h===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(h===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(h===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}}return![];};};export default UIMarkup_Measure_BoundBox;