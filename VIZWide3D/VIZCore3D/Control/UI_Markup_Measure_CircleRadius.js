let UI_Markup_Measure_CircleRadius=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b),this['Start']=function(){let e='MG0004';b['UIManager']['ShowMessage'](e),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){d['base']['prototype']['Release']['call'](d);},this['SetSubType']=function(e){d['MarkupSubType']=e;},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x0:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(e){switch(a['GetStep']()){case 0x0:case 0x1:{if(e===undefined)return;if(!e['pick'])return;if(e['preselectKind']===c['Enum']['PRESELECT_PICK_KIND']['CIRCLE']){let f=[];f[0x0]=e['preselect']['vData'][0x2],f[0x1]=e['preselect']['vData'][0x1];if(d['MarkupSubType']===0x0)a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_CIRCLE_RADIUS'];else{if(d['MarkupSubType']===0x1)a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_CIRCLE_DIAMETER'];}b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],f),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](e['preselect']['vData'][0x0]),a['currentReviewItem']['drawitem']['position'][0x0]=new c['Vector3']()['copy'](e['preselect']['vData'][0x0]),a['currentReviewItem']['drawitem']['position'][0x1]=new c['Vector3']()['copy'](e['preselect']['vData'][0x1]),a['currentReviewItem']['drawitem']['position'][0x2]=new c['Vector3']()['copy'](e['preselect']['vData'][0x2]),a['currentReviewItem']['drawitem']['position'][0x3]=new c['Vector3']()['copy'](e['preselect']['vData'][0x3]),a['currentReviewItem']['drawitem']['position'][0x4]=new c['Vector3']()['copy'](e['preselect']['vData'][0x4]),a['currentReviewItem']['drawitem']['position'][0x5]=new c['Vector3']()['copy'](e['preselect']['vData'][0x5]),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep'](),a['NextStep'](),a['NextStep']();}else{if(e['surface']){}else{const g=a['GetStep']();a['currentReviewItem']['drawitem']['position'][g]=new c['Vector3']()['copy'](e['position']),b['Renderer']['Render'](),a['NextStep']();}}}break;case 0x2:{if(e===undefined)return;if(!e['pick'])return;const h=a['GetStep']();a['currentReviewItem']['drawitem']['position'][h]=new c['Vector3']()['copy'](e['position']);let i=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][0x0]),j=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][0x1]),k=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][0x2]),l=b['Util']['GetCircleCenterPTFrom3Pt'](i,j,k),m=new c['Vector3']()['subVectors'](a['currentReviewItem']['drawitem']['position'][0x1],a['currentReviewItem']['drawitem']['position'][0x0]);m=new c['Vector3']()['crossVectors'](m,new c['Vector3']()['subVectors'](a['currentReviewItem']['drawitem']['position'][0x2],a['currentReviewItem']['drawitem']['position'][0x0])),m['normalize']();let n=new c['Vector3'](0x0,0x0,0x1),o;if(n['dot'](m)>0.9)n['set'](0x1,0x0,0x0);n=new c['Vector3']()['crossVectors'](n,m),n['normalize'](),o=new c['Vector3']()['copy'](n),o=new c['Vector3']()['crossVectors'](o,m),o['normalize']();let p=[];p[0x0]=l,p[0x1]=a['currentReviewItem']['drawitem']['position'][0x0];if(d['MarkupSubType']===0x0)a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_CIRCLE_RADIUS'];else{if(d['MarkupSubType']===0x1)a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_CIRCLE_DIAMETER'];}b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],p),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](l),a['currentReviewItem']['drawitem']['position'][0x0]=new c['Vector3']()['copy'](i),a['currentReviewItem']['drawitem']['position'][0x1]=new c['Vector3']()['copy'](j),a['currentReviewItem']['drawitem']['position'][0x2]=new c['Vector3']()['copy'](l),a['currentReviewItem']['drawitem']['position'][0x3]=new c['Vector3']()['copy'](m),a['currentReviewItem']['drawitem']['position'][0x4]=new c['Vector3']()['copy'](n),a['currentReviewItem']['drawitem']['position'][0x5]=new c['Vector3']()['copy'](o),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x3:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();},this['mouseDown']=function(e,f,g){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,e,f,g),a['actionEnabled']=!![],!![];},this['mouseMove']=function(e,f){a['base']['prototype']['mouseMove']['call'](a,e,f);switch(a['GetStep']()){case 0x3:{const g=new c['Matrix4']()['copy'](b['Camera']['matMVP']),h=b['Camera']['world2ScreenWithMatrix'](g,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),i=b['Camera']['screen2WorldWithMatrix'](g,new c['Vector3'](e,f,h['z']));a['currentReviewItem']['text']['position']['copy'](i),b['Renderer']['Render']();}break;}},this['mouseUp']=function(e,f,g){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,e,f,g),a['actionEnabled']=!![];if(g===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:case 0x1:case 0x2:{{if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let i=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);if(i!==undefined){b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];break;}}let h=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(h!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==h['bodyId']){let j=function(k){let l=b['Pick']['MakeMeasurePreselectInfoByID'](k);l?b['ViewRefresh']():d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']);};b['Pick']['GetBodyCacheDownload'](h['bodyId'],j),d['mouseAction']=![];break;}}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];}}}break;case 0x3:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(e,f,g){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ZOOM']))a['base']['prototype']['mouseWheel']['call'](a,e,f,g);},this['touchStart']=function(e){switch(e['length']){case 0x1:{d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]);}break;case 0x2:d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]);break;}a['base']['prototype']['touchStart']['call'](a,e),a['actionEnabled']=![],a['base']['prototype']['mouseDown']['call'](a,a['mouse']['x'],a['mouse']['y'],0x0),a['actionEnabled']=!![];},this['touchMove']=function(e){if(e['length']===0x0)return;a['base']['prototype']['touchMove']['call'](a,e),a['actionEnabled']=![],d['mouseMove'](a['mouse']['x'],a['mouse']['y']),a['actionEnabled']=!![];},this['touchEnd']=function(e){a['_touchLastCount']===0x1&&d['mouseUp'](a['mouse']['x'],a['mouse']['y'],0x0),a['actionEnabled']=![],a['base']['prototype']['touchEnd']['call'](a,e),a['actionEnabled']=!![];},this['GetProcessFlag']=function(e){switch(a['GetStep']()){case 0x0:{if(e===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(e===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];if(e===c['Enum']['MARKUP_FLAG']['CIRCLE'])return!![];if(e===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;case 0x1:{if(e===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(e===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];}break;case 0x2:{if(e===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(e===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];}break;}return![];};};export default UI_Markup_Measure_CircleRadius;