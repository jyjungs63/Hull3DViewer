let UIMarkup_Measure_CylinderCylinderCrossPoint=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=undefined,f=undefined,g=new c['BBox']();this['Start']=function(){let h='MG0006';b['UIManager']['ShowMessage'](h),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){e=undefined,f=undefined,d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x1:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(h){switch(a['GetStep']()){case 0x0:{if(h===undefined)return;if(!h['pick'])return;if(h['body']===undefined)return;e=b['Data']['GetTriangles']([h['body']]);let i=b['Data']['GetCylinderParamByTriangles'](h['triangle'],e,h['position']);if(!i['result'])return;f=i['item'],g=b['Data']['GetBBoxFormMatrix']([h['body']]),b['Renderer']['Render'](),a['NextStep']();}break;case 0x1:{if(h===undefined)return;if(!h['pick'])return;if(h['body']===undefined)return;let j=b['Data']['GetTriangles']([h['body']]),k=b['Data']['GetCylinderParamByTriangles'](h['triangle'],j,h['position']);if(!k['result'])return;let l=k['item'];if(Math['abs'](l['normal']['dot'](f['normal']))>0.999)break;{let m=new c['Vector3'](),n=new c['Vector3']()['addVectors'](f['center'],new c['Vector3']()['copy'](f['normal'])['multiplyScalar'](0x186a0)),o=new c['Vector3']()['subVectors'](f['center'],new c['Vector3']()['copy'](f['normal'])['multiplyScalar'](0x186a0)),p=new c['Vector3']()['addVectors'](l['center'],new c['Vector3']()['copy'](l['normal'])['multiplyScalar'](0x186a0)),q=new c['Vector3']()['subVectors'](l['center'],new c['Vector3']()['copy'](l['normal'])['multiplyScalar'](0x186a0)),r=b['Util']['Line2LineCrossPosition'](n,o,p,q,m,0.1);if(r){a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_CYLINDER_CYLINDER_CROSS_POINT'],a['currentReviewItem']['drawitem']['position'][0x0]=new c['Vector3']()['copy'](m),a['currentReviewItem']['drawitem']['custom']=[f,l],a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](m);let s=a['currentReviewItem']['drawitem']['position'];b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],s),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}}}break;case 0x2:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();},this['mouseDown']=function(h,i,j){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,h,i,j),a['actionEnabled']=!![],!![];},this['mouseMove']=function(h,i){a['base']['prototype']['mouseMove']['call'](a,h,i);switch(a['GetStep']()){case 0x2:{let j=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),k=b['Camera']['world2ScreenWithMatrix'](j,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),l=b['Camera']['screen2WorldWithMatrix'](j,new c['Vector3'](h,i,k['z']));a['currentReviewItem']['text']['position']['copy'](l),b['Renderer']['Render']();}break;}},this['mouseUp']=function(h,i,j){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,h,i,j),a['actionEnabled']=!![];if(j===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:case 0x1:{if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let l=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);if(l!==undefined){b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];break;}}let k=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(k!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==k['bodyId']){let m=function(n){let o=b['Pick']['MakeMeasurePreselectInfoByID'](n);o?b['ViewRefresh']():d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']);};b['Pick']['GetBodyCacheDownload'](k['bodyId'],m),d['mouseAction']=![];break;}}if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])){let n=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(n!==undefined){if(a['GetStep']()===0x1)b['Pick']['MakeMeasurePreselectInfoByID'](n['bodyId']);b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']);}}}}break;case 0x2:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(h,i,j){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ZOOM']))a['base']['prototype']['mouseWheel']['call'](a,h,i,j);},this['touchStart']=function(h){switch(h['length']){case 0x1:{d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]);}break;case 0x2:d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]);break;}a['base']['prototype']['touchStart']['call'](a,h),a['actionEnabled']=![],a['base']['prototype']['mouseDown']['call'](a,a['mouse']['x'],a['mouse']['y'],0x0),a['actionEnabled']=!![];},this['touchMove']=function(h){if(h['length']===0x0)return;a['base']['prototype']['touchMove']['call'](a,h),a['actionEnabled']=![],d['mouseMove'](a['mouse']['x'],a['mouse']['y']),a['actionEnabled']=!![];},this['touchEnd']=function(h){a['_touchLastCount']===0x1&&d['mouseUp'](a['mouse']['x'],a['mouse']['y'],0x0),a['actionEnabled']=![],a['base']['prototype']['touchEnd']['call'](a,h),a['actionEnabled']=!![];},this['Render']=function(){switch(a['GetStep']()){case 0x1:{let h=new c['Color'](0x64,0xff,0x0,0xff),k=new c['Color'](0x64,0xc8,0x0,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['gl']['enable'](b['gl']['DEPTH_TEST']),b['RenderWGL']['UpdateRenderProcessByTriangles'](e,h),b['Shader']['EndShader'](),b['gl']['disable'](b['gl']['DEPTH_TEST']);{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetClipping'](undefined);let l=k,m=l['glColor']();b['Shader']['SetGLColor'](m['r'],m['g'],m['b'],m['a']);let n=[[0x0,0x4,0x4,0x5,0x5,0x1,0x1,0x0],[0x2,0x6,0x6,0x7,0x7,0x3,0x3,0x2],[0x0,0x2],[0x4,0x6],[0x1,0x3],[0x5,0x7]],o=b['Util']['GetBBox2Vertex'](g),p=b['gl']['createBuffer'](),q=[];b['gl']['bindBuffer'](b['gl']['ARRAY_BUFFER'],p),b['gl']['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,b['gl']['FLOAT'],![],0x0,0x0);{let r=0x0;for(let s=0x0;s<n['length'];s++){for(let t=0x0;t<n[s]['length'];t++){q[r]=o[n[s][t]]['x'],r++,q[r]=o[n[s][t]]['y'],r++,q[r]=o[n[s][t]]['z'],r++;}}}b['gl']['bufferData'](b['gl']['ARRAY_BUFFER'],new Float32Array(q),b['gl']['STATIC_DRAW']),b['gl']['drawArrays'](b['gl']['LINES'],0x0,q['length']),b['gl']['deleteBuffer'](p);}b['Shader']['EndShader']();}}},this['GetProcessFlag']=function(h){switch(a['GetStep']()){case 0x0:{if(h===c['Enum']['MARKUP_FLAG']['PRESELECT'])return![];if(h===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(h===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(h===c['Enum']['MARKUP_FLAG']['POINT'])return![];if(h===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(h===c['Enum']['MARKUP_FLAG']['LINE'])return![];if(h===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;case 0x1:{if(h===c['Enum']['MARKUP_FLAG']['PRESELECT'])return![];if(h===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(h===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(h===c['Enum']['MARKUP_FLAG']['POINT'])return![];if(h===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(h===c['Enum']['MARKUP_FLAG']['LINE'])return![];if(h===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}return![];};};export default UIMarkup_Measure_CylinderCylinderCrossPoint;