let UIMarkup_Measure_LinkedDistance=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=![];this['Start']=function(){let f='MG0005';b['UIManager']['ShowMessage'](f),d['base']['prototype']['Start']['call'](d),a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_LINKED_DISTANCE'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Data']['Reviews']['push'](a['currentReviewItem']);},this['Release']=function(){d['base']['prototype']['Release']['call'](d),a['currentReviewItem']!==undefined&&b['Data']['DeleteReview'](a['currentReviewItem']['id']),e=![];},this['PreviousStep']=function(){if(!e)a['currentReviewItem']['drawitem']['position']['length']>0x0&&(a['currentReviewItem']['drawitem']['position']['splice'](a['currentReviewItem']['drawitem']['position']['length']-0x1,0x1),b['Measure']['UpdateReviewText'](a['currentReviewItem'],a['currentReviewItem']['drawitem']['position']));else{e=![];let f=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][a['currentReviewItem']['drawitem']['position']['length']-0x1]);a['currentReviewItem']['text']['position']=f,b['Renderer']['Render'](),d['mouseAction']=!![];}},this['ProcessStep']=function(f){if(!e){if(f===undefined)return;if(!f['pick'])return;a['currentReviewItem']['drawitem']['position']['push'](new c['Vector3']()['copy'](f['position']));if(a['currentReviewItem']['drawitem']['position']['length']>=0x2){let g=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][a['currentReviewItem']['drawitem']['position']['length']-0x1]);a['currentReviewItem']['text']['position']=g,b['Measure']['UpdateReviewText'](a['currentReviewItem'],a['currentReviewItem']['drawitem']['position']);}a['NextStep'](),b['Renderer']['Render'](),d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();}else a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();},this['mouseDown']=function(f,g,h){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,f,g,h),a['actionEnabled']=!![],!![];},this['mouseMove']=function(f,g){a['base']['prototype']['mouseMove']['call'](a,f,g);if(e){let h=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),i=b['Camera']['world2ScreenWithMatrix'](h,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),j=b['Camera']['screen2WorldWithMatrix'](h,new c['Vector3'](f,g,i['z']));a['currentReviewItem']['text']['position']['copy'](j),b['Renderer']['Render']();}},this['mouseUp']=function(f,g,h){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,f,g,h),a['actionEnabled']=!![];if(h===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y'])){if(!e){let i=!![];if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let j=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);j!==undefined&&(b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![],i=![]);}if(i){let k=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(k!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==k['bodyId']){let l=function(m){let n=b['Pick']['MakeMeasurePreselectInfoByID'](m);n?b['ViewRefresh']():d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']);};b['Pick']['GetBodyCacheDownload'](k['bodyId'],l),d['mouseAction']=![],i=![];}}i&&(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![],i=![]);}}}else d['ProcessStep']();}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseDoubleClick']=function(f,g,h){if(!e){if(a['currentReviewItem']['drawitem']['position']['length']<0x2)return;e=!![],a['NextStep'](),b['Renderer']['Render']();}},this['mouseWheel']=function(f,g,h){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ZOOM']))a['base']['prototype']['mouseWheel']['call'](a,f,g,h);},this['keyUp']=function(f){if(!e){if(a['currentReviewItem']['drawitem']['position']['length']<0x2)return!![];return e=!![],a['NextStep'](),b['Renderer']['Render'](),![];}return!![];},this['Render2D']=function(f){if(a['currentReviewItem']['drawitem']['position']['length']>=0x2)return;if(e)return;const g=new c['Matrix4']()['copy'](b['Camera']['matMVP']);let h=0x3;f['fillStyle']='rgba(0,\x20255,\x200,\x201)';for(let j=0x0;j<a['currentReviewItem']['drawitem']['position']['length'];j++){let k=b['Renderer']['Util']['GetScreenPositionByMatrix'](g,a['currentReviewItem']['drawitem']['position'][j]);b['Renderer']['Util']['DrawPoint'](f,k['x'],k['y'],h);}},this['GetProcessFlag']=function(f){if(!e){if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}return![];switch(a['GetStep']()){case 0x0:{if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];if(f===c['Enum']['MARKUP_FLAG']['LINE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;case 0x1:{if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];if(f===c['Enum']['MARKUP_FLAG']['LINE'])return![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}return![];};};export default UIMarkup_Measure_LinkedDistance;