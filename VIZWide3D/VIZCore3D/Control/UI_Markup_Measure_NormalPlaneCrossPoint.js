let UIMarkup_Measure_NormalPlaneCrossPoint=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=undefined;this['Start']=function(){let f='MG0004';b['UIManager']['ShowMessage'](f),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){e=undefined,d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x1:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(f){switch(a['GetStep']()){case 0x0:{if(f===undefined)return;if(!f['pick'])return;if(f['body'])e=f;else{if(f['preselectKind']===c['Enum']['PRESELECT_PICK_KIND']['EDGE']){let g=new c['Vector3']()['copy'](f['preselect']['vData'][0x0]),h=new c['Vector3']()['copy'](f['preselect']['vData'][0x1]),i=new c['Vector3']()['subVectors'](h,g)['length']();if(i<0.00001)return;e=f;}}b['Renderer']['Render'](),a['NextStep']();}break;case 0x1:{if(f===undefined)return;if(!f['pick'])return;if(f['body']===undefined)return;let j=new c['Vector3']();if(e['body']){let l=new c['Vector3']()['copy'](e['normal']),m=new c['Plane']()['setFromNormalAndCoplanarPoint'](new c['Vector3']()['copy'](f['normal']),new c['Vector3']()['copy'](f['position'])),n=b['Util']['PlaneVectorCrossPosition'](new c['Vector3']()['copy'](e['position']),l,m,j);if(!n)return;}else{if(e['preselectKind']===c['Enum']['PRESELECT_PICK_KIND']['EDGE']){let o=new c['Vector3']()['subVectors'](e['preselect']['vData'][0x1],e['preselect']['vData'][0x0])['normalize'](),p=new c['Plane']()['setFromNormalAndCoplanarPoint'](new c['Vector3']()['copy'](f['normal']),new c['Vector3']()['copy'](f['position'])),q=b['Util']['PlaneVectorCrossPosition'](new c['Vector3']()['copy'](e['preselect']['vData'][0x0]),o,p,j);if(!q)return;}}a['currentReviewItem']['drawitem']['position'][0x0]=j;let k=[];k[0x0]=j,a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_NORMAL_PLANE_CROSS_POINT'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],k),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](f['position']),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x2:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}},this['mouseDown']=function(f,g,h){switch(a['GetStep']()){case 0x2:d['mouseAction']=![],a['actionEnabled']=![];break;}return a['base']['prototype']['mouseDown']['call'](a,f,g,h),a['actionEnabled']=!![],!![];},this['mouseMove']=function(f,g){a['base']['prototype']['mouseMove']['call'](a,f,g);switch(a['GetStep']()){case 0x2:{let h=new c['Matrix4']()['copy'](b['Camera']['matMVP']),i=b['Camera']['world2ScreenWithMatrix'](h,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),j=b['Camera']['screen2WorldWithMatrix'](h,new c['Vector3'](f,g,i['z']));a['currentReviewItem']['text']['position']['copy'](j),b['Renderer']['Render']();}break;}},this['mouseUp']=function(f,g,h){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,f,g,h),a['actionEnabled']=!![];if(h===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:case 0x1:{if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let j=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);if(j!==undefined){b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];break;}}let i=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(i!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==i['bodyId']){let k=function(l){let m=b['Pick']['MakeMeasurePreselectInfoByID'](l);m?b['ViewRefresh']():d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']);};b['Pick']['GetBodyCacheDownload'](i['bodyId'],k),d['mouseAction']=![];break;}}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];}}break;case 0x2:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(f,g,h){if(a['GetStep']()!==0x2)a['base']['prototype']['mouseWheel']['call'](a,f,g,h);},this['Render']=function(){},this['Render2D']=function(f){const g=new c['Matrix4']()['copy'](b['Camera']['matMVP']);switch(a['GetStep']()){case 0x0:break;case 0x1:{if(e===undefined)return;if(e['body']){let h=0x3;f['fillStyle']='rgba(0,\x20255,\x200,\x201)';let i=new c['Vector3']()['copy'](e['position']),j=b['Renderer']['Util']['GetScreenPositionByMatrix'](g,i);f['beginPath'](),f['arc'](j['x'],j['y'],h,0x0,Math['PI']*0x2),f['fill']();}else{if(e['preselectKind']===c['Enum']['PRESELECT_PICK_KIND']['EDGE']){f['strokeStyle']='rgba(0,\x20255,\x200,\x201)',f['lineWidth']=0x3;let k=new c['Vector3']()['copy'](e['preselect']['vData'][0x0]),l=new c['Vector3']()['copy'](e['preselect']['vData'][0x1]),m=b['Renderer']['Util']['GetScreenPositionByMatrix'](g,k),n=b['Renderer']['Util']['GetScreenPositionByMatrix'](g,l);b['Renderer']['Util']['DrawLine'](f,m['x'],m['y'],n['x'],n['y']);}}}break;case 0x2:break;}},this['GetProcessFlag']=function(f){switch(a['GetStep']()){case 0x0:{if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(f===c['Enum']['MARKUP_FLAG']['LINE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;case 0x1:{if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(f===c['Enum']['MARKUP_FLAG']['LINE'])return![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}return![];};};export default UIMarkup_Measure_NormalPlaneCrossPoint;