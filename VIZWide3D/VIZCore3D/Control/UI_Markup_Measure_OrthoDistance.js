let UIMarkup_Measure_OrthoDistance=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b),this['Start']=function(){let e='MG0004';b['UIManager']['ShowMessage'](e),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x1:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(e){switch(a['GetStep']()){case 0x0:{if(e===undefined)return;if(!e['pick'])return;if(e['body']===undefined)return;a['currentReviewItem']['drawitem']['position'][0x0]=e['position'],a['currentReviewItem']['drawitem']['position'][0x2]=e['normal'],b['Renderer']['Render'](),a['NextStep']();}break;case 0x1:{if(e===undefined)return;if(!e['pick'])return;if(e['body']===undefined)return;a['currentReviewItem']['drawitem']['position'][0x1]=e['position'];let f=[a['currentReviewItem']['drawitem']['position'][0x0],a['currentReviewItem']['drawitem']['position'][0x1],a['currentReviewItem']['drawitem']['position'][0x2]],g=new c['Plane']()['setFromNormalAndCoplanarPoint'](a['currentReviewItem']['drawitem']['position'][0x2],a['currentReviewItem']['drawitem']['position'][0x0]),h=g['projectPoint'](e['position']);a['currentReviewItem']['drawitem']['position'][0x3]=h,a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_ORTHODISTANCE'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],f),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](e['position']),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x2:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}},this['mouseDown']=function(e,f,g){switch(a['GetStep']()){case 0x2:d['mouseAction']=![],a['actionEnabled']=![];break;}return a['base']['prototype']['mouseDown']['call'](a,e,f,g),a['actionEnabled']=!![],!![];},this['mouseMove']=function(e,f){a['base']['prototype']['mouseMove']['call'](a,e,f);switch(a['GetStep']()){case 0x2:{let g=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),h=b['Camera']['world2ScreenWithMatrix'](g,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),i=b['Camera']['screen2WorldWithMatrix'](g,new c['Vector3'](e,f,h['z']));a['currentReviewItem']['text']['position']['copy'](i),b['Renderer']['Render']();}break;}},this['mouseUp']=function(e,f,g){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,e,f,g),a['actionEnabled']=!![];if(g===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:{let h=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);h!==undefined&&(b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![]);}break;case 0x1:{let i=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);i!==undefined&&(b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![]);}break;case 0x2:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(e,f,g){if(a['GetStep']()!==0x2)a['base']['prototype']['mouseWheel']['call'](a,e,f,g);},this['Render']=function(){},this['Render2D']=function(e){const f=new c['Matrix4']()['copy'](b['Camera']['matMVP']);switch(a['GetStep']()){case 0x0:break;case 0x1:{let g=0x3;e['fillStyle']='rgba(0,\x20255,\x200,\x201)';let h=new c['Matrix4']()['transformVector'](f['elements'],[a['currentReviewItem']['drawitem']['position'][0x0]['x'],a['currentReviewItem']['drawitem']['position'][0x0]['y'],a['currentReviewItem']['drawitem']['position'][0x0]['z'],0x1]);h[0x0]/=h[0x3],h[0x1]/=h[0x3];let i=(h[0x0]*0.5+0.5)*e['canvas']['width'],j=(h[0x1]*-0.5+0.5)*e['canvas']['height'];e['beginPath'](),e['arc'](i,j,g,0x0,Math['PI']*0x2),e['fill']();}break;case 0x2:break;}};};export default UIMarkup_Measure_OrthoDistance;