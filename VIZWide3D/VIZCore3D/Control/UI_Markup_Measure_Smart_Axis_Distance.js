let UIMarkup_Measure_Smart_Axis_Distance=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=undefined,f=[],g=new c['Vector3'](),h=undefined;function i(k){let l={'direction':new c['Vector3']()['copy'](k),'use':!![],'pick':![],'startPosition':new c['Vector3'](),'pickBodyID':0x0,'pickPosition':new c['Vector3'](),'pickDistance':0x0};return l;}function j(){if(e===undefined)return;if(g['equals'](e['center']))return;for(let k=0x0;k<0x6;k++){f[k]['pick']=![];if(f[k]['use']===![])continue;f[k]['startPosition']['copy'](e['center']);let l=!![],m=0x0,n=undefined,o=-0x1,p=new c['Vector3']()['copy'](f[k]['direction']),q=new c['Vector3']()['copy'](f[k]['startPosition']),r,s=function(t,u,v){let w=b['Data']['GetBBox'](t),x=new c['Vector3']()['subVectors'](w['center'],e['center']),y=x['length']();x=p,y+=w['radius'],r=new c['Vector3']()['addVectors'](q,new c['Vector3']()['copy'](x)['multiplyScalar'](y));let z=b['Data']['GetWorldPickByID'](u,q,r);if(z['pick']){let A=new c['Vector3']()['subVectors'](z['position'],q)['length']();if(l)l=![],m=A,n=z['position'],o=u;else A<m&&(m=A,n=z['position'],o=u);}};b['Data']['BodyMap']['forEach'](s),!l&&(f[k]['pick']=!![],f[k]['pickBodyID']=o,f[k]['pickPosition']=n,f[k]['pickDistance']=m);}g['copy'](e['center']);}this['Start']=function(){let k='MG0011';b['UIManager']['ShowMessage'](k);{let l=b['Data']['GetBBox'](),m=l['center'];e=b['Handle']['Add'](c['Enum']['HANDLER_TYPE']['MEASURE']),e['center']=m,e['object']=null,e['axis']['x']['enable']=!![],e['axis']['y']['enable']=!![],e['axis']['z']['enable']=!![],e['panel']['xy']['enable']=!![],e['panel']['yz']['enable']=!![],e['panel']['zx']['enable']=!![],e['sphere']['enable']=![],e['axis']['x']['visible']=!![],e['axis']['y']['visible']=!![],e['axis']['z']['visible']=!![],e['panel']['xy']['visible']=!![],e['panel']['yz']['visible']=!![],e['panel']['zx']['visible']=!![],e['sphere']['visible']=!![];}{f=[],f[0x0]=i(new c['Vector3'](-0x1,0x0,0x0)),f[0x1]=i(new c['Vector3'](0x1,0x0,0x0)),f[0x2]=i(new c['Vector3'](0x0,-0x1,0x0)),f[0x3]=i(new c['Vector3'](0x0,0x1,0x0)),f[0x4]=i(new c['Vector3'](0x0,0x0,-0x1)),f[0x5]=i(new c['Vector3'](0x0,0x0,0x1));}b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),d['base']['prototype']['Start']['call'](d);},this['Release']=function(){e!==undefined&&(b['Handle']['ClearStateById'](e['id']),b['Handle']['Delete'](e['id']),e=undefined);f=[];if(h!==undefined)clearInterval(h);h=undefined,g['set'](0x0,0x0,0x0),d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){},this['ProcessStep']=function(k){if(k===undefined)return;},this['mouseDown']=function(k,l,m){if(e!==undefined){if(e['enable']&&e['state']===c['Enum']['HANDLE_MOUSE_STATE']['OVER']){e['state']=c['Enum']['HANDLE_MOUSE_STATE']['DOWN'],a['actionEnabled']=![];if(h!==undefined)clearInterval(h);h=undefined,g['set'](0x0,0x0,0x0),b['Handle']['ReleaseInterval']();}}return a['base']['prototype']['mouseDown']['call'](a,k,l,m),a['actionEnabled']=!![],!![];},this['mouseMove']=function(k,l){if(e!==undefined&&e['state']===c['Enum']['HANDLE_MOUSE_STATE']['DOWN'])a['actionEnabled']=![],(k!==a['mouseLastPosition']['x']||l!==a['mouseLastPosition']['y'])&&(b['Handle']['UpdateTransformByMouseMove'](e,k,l,a['mouseLastPosition']['x'],a['mouseLastPosition']['y']),b['Renderer']['Render']());else{if(!a['mouseLeftDown']){if(e!==undefined&&e['state']===c['Enum']['HANDLE_MOUSE_STATE']['OVER'])b['Renderer']['Render']();b['Handle']['ClearStateById'](e['id']);let m=b['Handle']['Pick'](k,l);m!==undefined&&e['id']===m['id']&&(e['state']=c['Enum']['HANDLE_MOUSE_STATE']['OVER'],b['Renderer']['Render']());}}a['base']['prototype']['mouseMove']['call'](a,k,l),a['actionEnabled']=!![];},this['mouseUp']=function(k,l,m){if(e!==undefined){if(e['state']===c['Enum']['HANDLE_MOUSE_STATE']['DOWN']){a['actionEnabled']=![],b['Handle']['ClearStateById'](e['id']),b['Renderer']['Render'](),j();if(h!==undefined)clearInterval(h);h=undefined;}else{}}return a['base']['prototype']['mouseUp']['call'](a,k,l,m),a['actionEnabled']=!![],d['mouseAction'];},this['mouseWheel']=function(k,l,m){a['base']['prototype']['mouseWheel']['call'](a,k,l,m);},this['Render']=function(){if(e===undefined)return;const k=new c['Matrix4']()['copy'](b['Camera']['matMV']),l=new c['Matrix4']()['copy'](b['Camera']['matMVP']);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['Shader']['SetMatrix'](l,k),b['Handle']['RenderItem'](e),b['Shader']['EndShader']();},this['Render2D']=function(l){let m=b['Renderer']['GetReviewNearPlane'](),n=new c['Matrix4']()['copy'](b['Camera']['matMVP']);for(let o=0x0;o<0x6;o++){if(f[o]['use']===![])continue;if(f[o]['pick']===![])continue;if(b['Util']['IsRenderReivewNearPlane'](f[o]['startPosition'],m))continue;if(b['Util']['IsRenderReivewNearPlane'](f[o]['pickPosition'],m))continue;let p,q,r;{p=b['Renderer']['Util']['GetScreenPositionByMatrix'](n,f[o]['startPosition']),q=b['Renderer']['Util']['GetScreenPositionByMatrix'](n,f[o]['pickPosition']);let s=new c['Vector3']()['addVectors'](f[o]['startPosition'],f[o]['pickPosition'])['multiplyScalar'](0.5);r=b['Renderer']['Util']['GetScreenPositionByMatrix'](n,s);}{b['Renderer']['Util']['SetReviewLineOption'](l,a['currentReviewItem']),b['Renderer']['Util']['DrawLine'](l,p['x'],p['y'],q['x'],q['y']);a['currentReviewItem']['style']['point']['enable']&&(b['Renderer']['Util']['SetReviewPointOption'](l,a['currentReviewItem']),b['Renderer']['Util']['DrawPoint'](l,q['x'],q['y'],a['currentReviewItem']['style']['point']['size']));let t=[f[o]['startPosition'],f[o]['pickPosition']],u=[];b['Measure']['UpdateReviewTextByType'](c['Enum']['REVIEW_TYPES']['RK_MEASURE_DISTANCE'],u,t);let v=b['Renderer']['Util']['GetTextMetricsByText'](l,u,a['currentReviewItem']['style']['font']['size']),z=v['width']+a['currentReviewItem']['style']['border']['offset']*0x2,A=v['height']*u['length']+a['currentReviewItem']['style']['border']['offset']*0x2;{let B=r['x']-a['currentReviewItem']['style']['border']['offset'],C=r['y']-a['currentReviewItem']['style']['border']['offset'];b['Renderer']['Util']['SetReviewBgOption'](l,a['currentReviewItem']);if(a['currentReviewItem']['style']['border']['type']===0x0)b['Renderer']['Util']['DrawRect'](l,B,C,z,A,a['currentReviewItem']['style']['background']['enable'],a['currentReviewItem']['style']['border']['enable']);else{if(a['currentReviewItem']['style']['border']['type']===0x1)b['Renderer']['Util']['DrawRoundRect'](l,B,C,z,A,a['currentReviewItem']['style']['border']['round'],a['currentReviewItem']['style']['background']['enable'],a['currentReviewItem']['style']['border']['enable']);}}b['Renderer']['Util']['SetReviewFontOption'](l,a['currentReviewItem']);for(let D=0x0;D<u['length'];D++){l['fillText'](u[D],r['x'],r['y']+(v['ascent']*D+v['ascent']+a['currentReviewItem']['style']['border']['offset']*D));}}}};};export default UIMarkup_Measure_Smart_Axis_Distance;