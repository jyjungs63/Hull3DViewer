let UIScreenBox=function(a,b){let c=this;this['base']=b['UIBase'],this['base'](a,b);let d=![],e=![],f=![];g();function g(){}this['UIBegin']=function(){c['base']['prototype']['UIBegin']['call'](c);let i='MG0013';a['UIManager']['ShowMessage'](i);},this['UIEnd']=function(){a['UIManager']['HideMessage'](),c['base']['prototype']['UIEnd']['call'](c);},this['SetUIMode']=function(i){d=![],e=![];if(i!==undefined)switch(i){case b['Enum']['SCREENBOX_TYPES']['BOXZOOM']:{d=!![];}break;case b['Enum']['SCREENBOX_TYPES']['SELECTBOX']:{e=!![];}break;}else e=!![];},this['mouseDown']=function(i,j,k){c['actionEnabled']=![];let l=c['base']['prototype']['mouseDown']['call'](c,i,j,k);return c['actionEnabled']=!![],c['mouseLeftDown']&&a['Renderer']['Render'](),l;},this['mouseMove']=function(i,j){c['actionEnabled']=![],c['base']['prototype']['mouseMove']['call'](c,i,j),c['actionEnabled']=!![],c['mouseLeftDown']&&a['Renderer']['Render']();},this['mouseUp']=function(i,j,k){c['actionEnabled']=![];let l=c['base']['prototype']['mouseUp']['call'](c,i,j,k);c['actionEnabled']=!![];if(c['mouseDownPosition']['x']===i&&c['mouseDownPosition']['y']===j)return l;let m=Math['min'](c['mouseDownPosition']['x'],i),n=Math['min'](c['mouseDownPosition']['y'],j),o=Math['max'](c['mouseDownPosition']['x'],i),p=Math['max'](c['mouseDownPosition']['y'],j);if(d){let q=new b['Matrix4']()['copy'](a['Camera']['matMVP']),r=new b['Vector3']()['copy'](a['Camera']['pivot']),s=a['Data']['GetBBox'](),t=s['center'],u=a['Camera']['world2ScreenWithMatrix'](q,t),v=new b['Vector3']((o+m)/0x2,(p+n)/0x2,u['z']),w=a['Camera']['screen2WorldWithMatrix'](q,v),z=[];z[0x0]=new b['Vector3']((o+m)/0x2,(p+n)/0x2,u['z']),z[0x1]=new b['Vector3'](m,n,u['z']),z[0x2]=new b['Vector3'](o,n,u['z']),z[0x3]=new b['Vector3'](m,p,u['z']),z[0x4]=new b['Vector3'](o,p,u['z']),z[0x5]=new b['Vector3']((o+m)/0x2,n,u['z']),z[0x6]=new b['Vector3']((o+m)/0x2,p,u['z']),z[0x7]=new b['Vector3'](m,(p+n)/0x2,u['z']),z[0x8]=new b['Vector3'](o,(p+n)/0x2,u['z']);let A=![];for(let B=0x0;B<z['length'];B++){let C=function(E,F){if(E['view']['Browser']['IsMS'])E['view']['Camera']['SetPivot'](F['BBox']['center']),E['view']['Camera']['FocusViewBoxZoom'](m,n,o,p,F['BBox']['center']),a['ViewRefresh']();else{let G=function(H){if(H){if(H['pick']){let I=new b['Vector3']()['copy'](H['position']),J=E['view']['Camera']['world2ScreenWithMatrix'](q,I),K=new b['Vector3']((o+m)/0x2,(p+n)/0x2,J['z']),L=E['view']['Camera']['screen2WorldWithMatrix'](q,K);E['view']['Camera']['FocusViewBoxZoom'](m,n,o,p,L);}else a['Camera']['FocusViewBoxZoom'](m,n,o,p,w);}a['ViewRefresh']();};E['view']['Data']['GetPickByBodyCacheDownload'](z[B]['x'],z[B]['y'],G);}},D=a['Renderer']['ObjectIDCallback'](z[B]['x'],z[B]['y'],c,C,undefined);if(D){A=!![];break;}}return!A&&(a['Camera']['FocusViewBoxZoom'](m,n,o,p,w),a['ViewRefresh']()),a['Control']['RestoreMode'](),a['MeshBlock']['Reset'](),a['Renderer']['Render'](),l;}else{if(e){let E=new b['Matrix4']()['copy'](a['Camera']['matMVP']),F=a['Data']['GetBBox'](),G=F['center'],H=a['Camera']['world2ScreenWithMatrix'](E,G),I=new b['Vector3']((o+m)/0x2,(p+n)/0x2,H['z']),J=![];if(i>c['mouseDownPosition']['x'])J=!![];if(a['Configuration']['Model']['Selection']['Kind']!==this['VIZCore']['Enum']['SelectionObject3DTypes']['NONE']){a['Data']['ObjectsSelectBox'](m,n,o,p,J);let K=[],L=a['Data']['GetSelection']();L['length']>0x0&&(K=a['Tree']['GetDataToNode'](L),a['Tree']['EventHandler']['dispatchEvent'](b['Enum']['EVENT_TYPES']['Data']['Selected'],K));}a['Control']['RestoreMode'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();}}return l;},this['mouseDoubleClick']=function(i,j,k){},this['Render2D']=function(i){if(!c['mouseLeftDown'])return;let j=c['mouse']['x']-c['mouseDownPosition']['x'],k=c['mouse']['y']-c['mouseDownPosition']['y'],l=new b['Color'](0x0,0x0,0x0,0x64);i['fillStyle']='rgba('+l['r']+','+l['g']+','+l['b']+','+l['glAlpha']()+')',i['strokeStyle']='rgba('+l['r']+','+l['g']+','+l['b']+','+l['glAlpha']()+')',i['lineWidth']=0x2,a['Renderer']['Util']['DrawRect'](i,c['mouseDownPosition']['x'],c['mouseDownPosition']['y'],j,k,![],!![]);};let h={};this['touchStart']=function(i){let j=document['getElementById'](a['GetViewID']())['getBoundingClientRect']();h['x']=i[0x0]['pageX']-j['left'],h['y']=i[0x0]['pageY']-j['top'],c['mouseDown'](h['x'],h['y'],0x0);},this['touchMove']=function(i){let j=document['getElementById'](a['GetViewID']())['getBoundingClientRect']();h['x']=i[0x0]['pageX']-j['left'],h['y']=i[0x0]['pageY']-j['top'],c['mouseMove'](h['x'],h['y'],0x0);},this['touchEnd']=function(i){c['mouseUp'](h['x'],h['y'],0x0);};};export default UIScreenBox;