class Grid{constructor(a,b){let c=this,d=new b['Color'](0x80,0x80,0x80,0xc8),e=new b['Color'](0xff,0x0,0x0,0xc8),f=[];this['Visible']=!![],this['Loaded']=![],this['Info']={'BBox':undefined,'Items':[]},this['ElevationLine']=!![],this['PlanLine']=!![],this['SectionLine']=!![],this['ShowEvenNumber']=!![],this['ShowNumberAllStep']=![],this['ShowOddNumber']=!![],this['ShowFrameNumber']=![],this['XYPlane']=!![],this['YZPlane']=!![],this['ZXPlane']=!![],this['ShowFrameSectionFit']=![];let g=![];this['ShowCustomLevelGrid']=![],this['GridItem']=m=>{let n=undefined;return n={'axis':m===b['Enum']['Axis']['X']?'X':m===b['Enum']['Axis']['Y']?'Y':'Z','axisId':m===b['Enum']['Axis']['X']?0x0:m===b['Enum']['Axis']['Y']?0x1:0x2,'label':m===b['Enum']['Axis']['X']?'FR':m===b['Enum']['Axis']['Y']?'LP':'LV','items':[]},n;},h();function h(){}function i(m,n,o,p,q,r){let s=new b['Matrix4']()['copy'](a['Camera']['matMVP']),t=0x8,u=0x2;m['font']=t+'pt\x20Arial',m['fillStyle']='rgba(0,\x200,\x200,\x201.0)';if(r!==undefined)m['fillStyle']=r;let v=[0x1,0x0,0x0,0x0];{let E=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),F=new b['Matrix4']()['getInverse'](E),G=F['multiplyVector'](a['Camera']['cameraPosition']),H=F['multiplyVector'](a['Camera']['cameraTarget']),I=a['Camera']['near'],J=new b['Vector3']()['subVectors'](H,G);J['normalize'](),v[0x0]=J['x'],v[0x1]=J['y'],v[0x2]=J['z'];let K=new b['Vector3']()['addVectors'](G,J['multiplyScalar'](I));v[0x3]=-(v[0x0]*K['x']+v[0x1]*K['y']+v[0x2]*K['z']);}if(a['Util']['IsRenderReivewNearPlane'](n,v))return;const x=a['Renderer']['Util']['GetTextMetricsByText'](m,[p],t);let y=x['width']+u*0x2,z=x['height']+u*0x2,A=y/0x2;if(q===undefined)q=0x0;let B=a['Camera']['GetScreen1PixelLength'](n),C=new b['Vector3']()['addVectors'](n,new b['Vector3']()['copy'](o)['multiplyScalar'](B*A)),D=a['Camera']['world2ScreenWithMatrix'](s,C);m['fillText'](p,D['x']-A,D['y']+(z-x['ascent'])/0x2+q);}function j(m){c['Loaded']=!![],c['Info']['Items']=m;let n=new b['Vector3'](),o=new b['Vector3']();for(let p=0x0;p<m['length'];p++){const q=m[p];if(q['axisId']===0x0)for(let r=0x0;r<q['items']['length'];r++){let s=q['items'][r];r===0x0?(n['x']=s['offset'],o['x']=s['offset']):(n['x']=Math['min'](n['x'],s['offset']),o['x']=Math['max'](o['x'],s['offset']));if(s['label']===undefined)s['label']=s['id']+'';}else{if(q['axisId']===0x1)for(let t=0x0;t<q['items']['length'];t++){let u=q['items'][t];t===0x0?(n['y']=u['offset'],o['y']=u['offset']):(n['y']=Math['min'](n['y'],u['offset']),o['y']=Math['max'](o['y'],u['offset']));if(u['label']===undefined)u['label']=u['id']+'';}else{if(q['axisId']===0x2)for(let v=0x0;v<q['items']['length'];v++){let w=q['items'][v];v===0x0?(n['z']=w['offset'],o['z']=w['offset']):(n['z']=Math['min'](n['z'],w['offset']),o['z']=Math['max'](o['z'],w['offset']));if(w['label']===undefined)w['label']=w['id']+'';}}}}c['Info']['BBox']=new b['BBox']([n['x'],n['y'],n['z'],o['x'],o['y'],o['z']]),a['MeshBlock']['Reset'](),a['Renderer']['Render']();}function k(m,n,o,p){if(a['Data']['ObjectsBBox']===undefined)return;let q=new b['BBox']()['copy'](a['Data']['ObjectsBBox']);if(p!==undefined)q=new b['BBox']()['copy'](p);f=[],f[0x0]=[],f[0x1]=[];let r=0x0,s=0x0;m['enable'](m['DEPTH_TEST']),m['depthMask'](!![]),m['enable'](m['BLEND']),m['blendFunc'](m['SRC_ALPHA'],m['ONE_MINUS_SRC_ALPHA']);const t=new b['Matrix4']()['copy'](a['Camera']['matMV']),u=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let v=()=>{let w=0x5,A=0x3c,B=0x2,C=0x5,D=![],E=c['XYPlane'],F=c['YZPlane'],G=c['ZXPlane'],H=c['ShowNumberAllStep'],I=c['SectionLine'],J=c['ElevationLine'],K=c['PlanLine'],L=c['ShowFrameNumber'],M=c['ShowOddNumber'],N=c['ShowEvenNumber'],O=c['ShowFrameSectionFit'];if(O){const a8=a['Clipping']['Get']();if(a8&&a8['visible']){let a9=new b['Vector3']()['copy'](q['min']),aa=new b['Vector3']()['copy'](q['max']);if(a8['itemType']===b['Enum']['CLIPPING_MODES']['BOX']){for(let ab=0x0;ab<a8['planes']['length'];ab++){const ac=a8['planes'][ab];ab===0x0?(a9['copy'](ac['center']),aa['copy'](ac['center'])):(a9['min'](ac['center']),aa['max'](ac['center']));}q['min']['copy'](a9),q['max']['copy'](aa),q['update']();}else{let ad=a['Clipping']['RebuildClippingBoundBox'](q);if(ad)q=ad;else return;}}}let P=new b['BBox']()['copy'](q),Q=0x7530,R=0x0,S=[],T=0x0,U=[],V=-0x1,W=-0x1,X=0x1,Y=new b['Vector3']()['copy'](P['center']),Z=new b['Vector3']()['subVectors'](P['min'],Y)['multiplyScalar'](X),a0=new b['Vector3']()['subVectors'](P['max'],Y)['multiplyScalar'](X),a1=new b['Vector3']()['addVectors'](Y,Z),a2=new b['Vector3']()['addVectors'](Y,a0);P['min']['copy'](a1),P['max']['copy'](a2),P['update']();let a3=P['radius'],a4=new b['Vector3'](),a5=new b['Vector3']();const a6=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let a7=[];{a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['z']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let ae=0x0;if(a4['z']>a5['z'])ae=a2['x']+w;else ae=a1['x']-w;let af=0x0;a4['z']>a5['z']?af=a2['y']+w:af=a1['y']-w;let ag=0x0;if(D){if(a4['z']>a5['z']&&!D||a4['z']<a5['z']&&D)ag=a1['z'];else ag=a2['z'];}else ag=a1['z'];{let ah=0x0;if(c['Info']['Items'][0x0]!==undefined&&c['Info']['Items'][0x0]['items']['length']>0x0)ah=c['Info']['Items'][0x0]['items']['length'];if(I&&ah){const ak=c['Info']['Items'][0x0]['items'];let al=0x1,am=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ak[0x0]['offset'],af,ag)),an=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ak[ah-0x1]['offset'],af,ag));am['z']=an['z']=0x0;let ao=new b['Vector3']()['subVectors'](an,am)['length']();while(al<ah){if(ao/ah*al>A)break;al*=B;}V=-0x1,W=-0x1;if(al<ah){for(let ap=0x0;ap<ah;ap+=al){if(ak[ap]['offset']<a1['x'])continue;if(V<0x0)V=ap-0x1;if(ak[ap]['offset']>a2['x']){W=ap;break;}}if(V>=0x0)a1['x']=Math['min'](a1['x'],ak[V]['offset']);if(W>=0x0)a2['x']=Math['max'](a2['x'],ak[W]['offset']);}}let ai=0x0;if(c['Info']['Items'][0x1]!==undefined&&c['Info']['Items'][0x1]['items']['length']>0x0)ai=c['Info']['Items'][0x1]['items']['length'];if(J&&ai){const aq=c['Info']['Items'][0x1]['items'];let ar=0x1,as=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ae,aq[0x0]['offset'],ag)),at=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ae,aq[ai-0x1]['offset'],ag));as['z']=at['z']=0x0;let au=new b['Vector3']()['subVectors'](at,as)['length']();while(ar<ai){if(au/ai*ar>A)break;ar*=B;}if(H)ar=0x1;V=-0x1,W=-0x1;if(ar<ai)for(let av=0x0;av<ai;av+=ar){if(aq[av]['offset']<a1['y'])continue;if(V<0x0)V=av-0x1;if(aq[av]['offset']>a2['y']){W=av;break;}}if(V>=0x0)a1['y']=Math['min'](a1['y'],aq[V]['offset']);if(W>=0x0)a2['y']=Math['max'](a2['y'],aq[W]['offset']);}let aj=0x0;if(c['Info']['Items'][0x2]!==undefined&&c['Info']['Items'][0x2]['items']['length']>0x0)aj=c['Info']['Items'][0x2]['items']['length'];if(K&&aj>0x0){const aw=c['Info']['Items'][0x2]['items'];let ax=0x1,ay=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ae,af,aw[0x0]['offset'])),az=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](ae,af,aw[aj-0x1]['offset']));ay['z']=az['z']=0x0;let aA=new b['Vector3']()['subVectors'](az,ay)['length']();while(ax<aj){if(aA/aj*ax>A)break;ax*=B;}if(H)ax=0x1;V=-0x1,W=-0x1;if(ax<aj){for(let aB=0x0;aB<aj;aB+=ax){if(aw[aB]['offset']<a1['z'])continue;if(V<0x0)V=aB-0x1;if(aw[aB]['offset']>a2['z']){W=aB;break;}}if(V>=0x0)a1['z']=Math['min'](a1['z'],aw[V]['offset']);if(W>=0x0)a2['z']=Math['max'](a2['z'],aw[W]['offset']);}}P['min']['copy'](a1),P['max']['copy'](a2),P['update'](),a3=P['radius'];}}if(o){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](u,t),a['Shader']['SetClipping'](undefined);if(d===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let aC=e['glColor']();a['Shader']['SetGLColor'](aC['r'],aC['g'],aC['b'],aC['a']);}}if(E){a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['z']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let aD=0x0;if(D){if(a4['z']>a5['z']&&!D||a4['z']<a5['z']&&D)aD=a1['z'];else aD=a2['z'];}else aD=a1['z'];a7[0x0]=a7[0x4]=new b['Vector3'](a1['x'],a1['y'],aD),a7[0x1]=new b['Vector3'](a2['x'],a1['y'],aD),a7[0x2]=new b['Vector3'](a2['x'],a2['y'],aD),a7[0x3]=new b['Vector3'](a1['x'],a2['y'],aD);for(let aG=0x0;aG<a7['length'];aG++){if(aG===0x0)continue;S[R+0x0]=a7[aG-0x1]['x'],S[R+0x1]=a7[aG-0x1]['y'],S[R+0x2]=a7[aG-0x1]['z'],R+=0x3,S[R+0x0]=a7[aG]['x'],S[R+0x1]=a7[aG]['y'],S[R+0x2]=a7[aG]['z'],R+=0x3;}let aE=0x0;if(c['Info']['Items'][0x0]!==undefined&&c['Info']['Items'][0x0]['items']['length']>0x0)aE=c['Info']['Items'][0x0]['items']['length'];if(I&&aE){let aH=c['Info']['Items'][0x0]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['y']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let aI=0x0,aJ=![];a4['z']>a5['z']?(aI=a2['y']+w,aJ=!![]):aI=a1['y']-w;let aK=0x1,aL=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](aH[0x0]['offset'],aI,aD)),aM=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](aH[aE-0x1]['offset'],aI,aD));aL['z']=aM['z']=0x0;let aN=new b['Vector3']()['subVectors'](aM,aL)['length']();while(aK<aE){if(aN/aE*aK>A)break;aK*=B;}if(H)aK=0x1;let aO=0x0;if(aK<aE)for(let aP=0x0;aP<aE;aP+=aK){if(aH[aP]['offset']<a1['x']||aH[aP]['offset']>a2['x'])continue;aO++;if(!M&&aO%0x2)continue;if(!N&&!(aO%0x2))continue;a7[0x0]=new b['Vector3'](aH[aP]['offset'],a1['y'],aD),a7[0x1]=new b['Vector3'](aH[aP]['offset'],a2['y'],aD);let aQ=undefined,aR=undefined;L?aR=c['Info']['Items'][0x0]['label']+'\x20'+aH[aP]['id']+'':aR=aH[aP]['offset']+'';g&&(aR=aH[aP]['label']);aJ?(aQ=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),aQ['normalize'](),i(n,a7[0x1],aQ,aR)):(aQ=new b['Vector3']()['subVectors'](a7[0x0],a7[0x1]),aQ['normalize'](),i(n,a7[0x0],aQ,aR));if(aP%(aK*C)!=0x0)for(let aS=0x0;aS<a7['length'];aS++){if(aS===0x0)continue;S[R+0x0]=a7[aS-0x1]['x'],S[R+0x1]=a7[aS-0x1]['y'],S[R+0x2]=a7[aS-0x1]['z'],R+=0x3,S[R+0x0]=a7[aS]['x'],S[R+0x1]=a7[aS]['y'],S[R+0x2]=a7[aS]['z'],R+=0x3;}else for(let aT=0x0;aT<a7['length'];aT++){if(aT===0x0)continue;U[T+0x0]=a7[aT-0x1]['x'],U[T+0x1]=a7[aT-0x1]['y'],U[T+0x2]=a7[aT-0x1]['z'],T+=0x3,U[T+0x0]=a7[aT]['x'],U[T+0x1]=a7[aT]['y'],U[T+0x2]=a7[aT]['z'],T+=0x3;}}}let aF=0x0;if(c['Info']['Items'][0x1]!==undefined&&c['Info']['Items'][0x1]['items']['length']>0x0)aF=c['Info']['Items'][0x1]['items']['length'];if(J&&aF){let aU=c['Info']['Items'][0x1]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['x']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let aV=0x0,aW=![];if(a4['z']>a5['z'])aV=a2['x']+w,aW=!![];else aV=a1['x']-w;let aX=0x1,aY=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](aV,aU[0x0]['offset'],aD)),aZ=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](aV,aU[aF-0x1]['offset'],aD));aY['z']=aZ['z']=0x0;let b0=new b['Vector3']()['subVectors'](aZ,aY)['length']();while(aX<aF){if(b0/aF*aX>A)break;aX*=B;}if(H)aX=0x1;let b1=0x0;if(aX<aF)for(let b2=0x0;b2<aF;b2+=aX){if(aU[b2]['offset']<a1['y']||aU[b2]['offset']>a2['y'])continue;b1++;if(!M&&b1%0x2)continue;if(!N&&!(b1%0x2))continue;a7[0x0]=new b['Vector3'](a1['x'],aU[b2]['offset'],aD),a7[0x1]=new b['Vector3'](a2['x'],aU[b2]['offset'],aD);let b3=undefined;L?b3=c['Info']['Items'][0x1]['label']+'\x20'+aU[b2]['id']+'':b3=aU[b2]['offset']+'';g&&(b3=aU[b2]['label']);let b4=undefined;aW?(b4=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),b4['normalize'](),i(n,a7[0x1],b4,b3)):(b4=new b['Vector3']()['subVectors'](a7[0x0],a7[0x1]),b4['normalize'](),i(n,a7[0x0],b4,b3));if(b2%(aX*C)!=0x0)for(let b5=0x0;b5<a7['length'];b5++){if(b5===0x0)continue;S[R+0x0]=a7[b5-0x1]['x'],S[R+0x1]=a7[b5-0x1]['y'],S[R+0x2]=a7[b5-0x1]['z'],R+=0x3,S[R+0x0]=a7[b5]['x'],S[R+0x1]=a7[b5]['y'],S[R+0x2]=a7[b5]['z'],R+=0x3;}else for(let b6=0x0;b6<a7['length'];b6++){if(b6===0x0)continue;U[T+0x0]=a7[b6-0x1]['x'],U[T+0x1]=a7[b6-0x1]['y'],U[T+0x2]=a7[b6-0x1]['z'],T+=0x3,U[T+0x0]=a7[b6]['x'],U[T+0x1]=a7[b6]['y'],U[T+0x2]=a7[b6]['z'],T+=0x3;}}}}if(F){a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['y']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let b7=0x0;if(a4['z']>a5['z']&&!D||a4['z']<a5['z']&&D)b7=a1['y'];else b7=a2['y'];a7[0x0]=a7[0x4]=new b['Vector3'](a1['x'],b7,a1['z']),a7[0x1]=new b['Vector3'](a2['x'],b7,a1['z']),a7[0x2]=new b['Vector3'](a2['x'],b7,a2['z']),a7[0x3]=new b['Vector3'](a1['x'],b7,a2['z']);for(let ba=0x0;ba<a7['length'];ba++){if(ba===0x0)continue;S[R+0x0]=a7[ba-0x1]['x'],S[R+0x1]=a7[ba-0x1]['y'],S[R+0x2]=a7[ba-0x1]['z'],R+=0x3,S[R+0x0]=a7[ba]['x'],S[R+0x1]=a7[ba]['y'],S[R+0x2]=a7[ba]['z'],R+=0x3;}let b8=0x0;if(c['Info']['Items'][0x2]!==undefined&&c['Info']['Items'][0x2]['items']['length']>0x0)b8=c['Info']['Items'][0x2]['items']['length'];if(K&&b8>0x0){let bb=c['Info']['Items'][0x2]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['x']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let bc=0x0,bd=![];if(a4['z']>a5['z'])bc=a2['x']+w,bd=!![];else bc=a1['x']-w;let be=0x1,bf=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bc,b7,bb[0x0]['offset'])),bg=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bc,b7,bb[b8-0x1]['offset']));bf['z']=bg['z']=0x0;let bh=new b['Vector3']()['subVectors'](bg,bf)['length']();while(be<b8){if(bh/b8*be>A)break;be*=B;}if(H)be=0x1;let bi=0x0;if(be<b8)for(let bj=0x0;bj<b8;bj+=be){if(bb[bj]['offset']<a1['z']||bb[bj]['offset']>a2['z'])continue;bi++;if(!M&&bi%0x2)continue;if(!N&&!(bi%0x2))continue;a7[0x0]=new b['Vector3'](a1['x'],b7,bb[bj]['offset']),a7[0x1]=new b['Vector3'](a2['x'],b7,bb[bj]['offset']);let bk=undefined;L?bk=c['Info']['Items'][0x2]['label']+'\x20'+bb[bj]['id']+'':bk=bb[bj]['offset']+'';g&&(bk=bb[bj]['label']);let bl=undefined;bd?(bl=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),bl['normalize'](),i(n,a7[0x1],bl,bk,-0xa)):(bl=new b['Vector3']()['subVectors'](a7[0x0],a7[0x1]),bl['normalize'](),i(n,a7[0x0],bl,bk,-0xa));if(bj%(be*C)!=0x0)for(let bm=0x0;bm<a7['length'];bm++){if(bm===0x0)continue;S[R+0x0]=a7[bm-0x1]['x'],S[R+0x1]=a7[bm-0x1]['y'],S[R+0x2]=a7[bm-0x1]['z'],R+=0x3,S[R+0x0]=a7[bm]['x'],S[R+0x1]=a7[bm]['y'],S[R+0x2]=a7[bm]['z'],R+=0x3;}else for(let bn=0x0;bn<a7['length'];bn++){if(bn===0x0)continue;U[T+0x0]=a7[bn-0x1]['x'],U[T+0x1]=a7[bn-0x1]['y'],U[T+0x2]=a7[bn-0x1]['z'],T+=0x3,U[T+0x0]=a7[bn]['x'],U[T+0x1]=a7[bn]['y'],U[T+0x2]=a7[bn]['z'],T+=0x3;}}}let b9=0x0;if(c['Info']['Items'][0x0]!==undefined&&c['Info']['Items'][0x0]['items']['length']>0x0)b9=c['Info']['Items'][0x0]['items']['length'];if(I&&b9){let bo=c['Info']['Items'][0x0]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['z']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let bp=a2['z']+w,bq=0x1,br=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bo[0x0]['offset'],b7,bp)),bs=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bo[b9-0x1]['offset'],b7,bp));br['z']=bs['z']=0x0;let bt=new b['Vector3']()['subVectors'](bs,br)['length']();while(bq<b9){if(bt/b9*bq>A)break;bq*=B;}if(H)bq=0x1;let bu=0x0;if(bq<b9)for(let bv=0x0;bv<b9;bv+=bq){if(bo[bv]['offset']<a1['x']||bo[bv]['offset']>a2['x'])continue;bu++;if(!M&&bu%0x2)continue;if(!N&&!(bu%0x2))continue;a7[0x0]=new b['Vector3'](bo[bv]['offset'],b7,a1['z']),a7[0x1]=new b['Vector3'](bo[bv]['offset'],b7,a2['z']);let bw=undefined;L?bw=c['Info']['Items'][0x0]['label']+'\x20'+bo[bv]['id']+'':bw=bo[bv]['offset']+'';g&&(bw=bo[bv]['label']);let bx=undefined;!![]&&(bx=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),bx['normalize'](),i(n,a7[0x1],bx,bw));if(bv%(bq*C)!=0x0)for(let by=0x0;by<a7['length'];by++){if(by===0x0)continue;S[R+0x0]=a7[by-0x1]['x'],S[R+0x1]=a7[by-0x1]['y'],S[R+0x2]=a7[by-0x1]['z'],R+=0x3,S[R+0x0]=a7[by]['x'],S[R+0x1]=a7[by]['y'],S[R+0x2]=a7[by]['z'],R+=0x3;}else for(let bz=0x0;bz<a7['length'];bz++){if(bz===0x0)continue;U[T+0x0]=a7[bz-0x1]['x'],U[T+0x1]=a7[bz-0x1]['y'],U[T+0x2]=a7[bz-0x1]['z'],T+=0x3,U[T+0x0]=a7[bz]['x'],U[T+0x1]=a7[bz]['y'],U[T+0x2]=a7[bz]['z'],T+=0x3;}}}}if(G){a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['x']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let bA=0x0;if(a4['z']>a5['z']&&!D||a4['z']<a5['z']&&D)bA=a1['x'];else bA=a2['x'];a7[0x0]=a7[0x4]=new b['Vector3'](bA,a1['y'],a1['z']),a7[0x1]=new b['Vector3'](bA,a2['y'],a1['z']),a7[0x2]=new b['Vector3'](bA,a2['y'],a2['z']),a7[0x3]=new b['Vector3'](bA,a1['y'],a2['z']);for(let bD=0x0;bD<a7['length'];bD++){if(bD===0x0)continue;S[R+0x0]=a7[bD-0x1]['x'],S[R+0x1]=a7[bD-0x1]['y'],S[R+0x2]=a7[bD-0x1]['z'],R+=0x3,S[R+0x0]=a7[bD]['x'],S[R+0x1]=a7[bD]['y'],S[R+0x2]=a7[bD]['z'],R+=0x3;}let bB=0x0;if(c['Info']['Items'][0x2]!==undefined&&c['Info']['Items'][0x2]['items']['length']>0x0)bB=c['Info']['Items'][0x2]['items']['length'];if(K&&bB>0x0){let bE=c['Info']['Items'][0x2]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['y']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let bF=0x0,bG=![];if(a4['z']>a5['z'])bF=a2['y']+w,bG=!![];else bF=a1['y']-w;let bH=0x1,bI=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bA,bF,bE[0x0]['offset'])),bJ=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bA,bF,bE[bB-0x1]['offset']));bI['z']=bJ['z']=0x0;let bK=new b['Vector3']()['subVectors'](bJ,bI)['length']();while(bH<bB){if(bK/bB*bH>A)break;bH*=B;}if(H)bH=0x1;let bL=0x0;if(bH<bB)for(let bM=0x0;bM<bB;bM+=bH){if(bE[bM]['offset']<a1['z']||bE[bM]['offset']>a2['z'])continue;bL++;if(!M&&bL%0x2)continue;if(!N&&!(bL%0x2))continue;a7[0x0]=new b['Vector3'](bA,a1['y'],bE[bM]['offset']),a7[0x1]=new b['Vector3'](bA,a2['y'],bE[bM]['offset']);let bN=undefined;L?bN=c['Info']['Items'][0x2]['label']+'\x20'+bE[bM]['id']+'':bN=bE[bM]['offset']+'';g&&(bN=bE[bM]['label']);let bO=undefined;bG?(bO=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),bO['normalize'](),i(n,a7[0x1],bO,bN,-0xa)):(bO=new b['Vector3']()['subVectors'](a7[0x0],a7[0x1]),bO['normalize'](),i(n,a7[0x0],bO,bN,-0xa));if(bM%(bH*C)!=0x0)for(let bP=0x0;bP<a7['length'];bP++){if(bP===0x0)continue;S[R+0x0]=a7[bP-0x1]['x'],S[R+0x1]=a7[bP-0x1]['y'],S[R+0x2]=a7[bP-0x1]['z'],R+=0x3,S[R+0x0]=a7[bP]['x'],S[R+0x1]=a7[bP]['y'],S[R+0x2]=a7[bP]['z'],R+=0x3;}else for(let bQ=0x0;bQ<a7['length'];bQ++){if(bQ===0x0)continue;U[T+0x0]=a7[bQ-0x1]['x'],U[T+0x1]=a7[bQ-0x1]['y'],U[T+0x2]=a7[bQ-0x1]['z'],T+=0x3,U[T+0x0]=a7[bQ]['x'],U[T+0x1]=a7[bQ]['y'],U[T+0x2]=a7[bQ]['z'],T+=0x3;}}}let bC=0x0;if(c['Info']['Items'][0x1]!==undefined&&c['Info']['Items'][0x1]['items']['length']>0x0)bC=c['Info']['Items'][0x1]['items']['length'];if(J&&bC){let bR=c['Info']['Items'][0x1]['items'];a7=[],a4=new b['Vector3']()['copy'](P['center']),a5=new b['Vector3']()['copy'](a4),a5['z']+=a3,a4=a['Camera']['world2ScreenWithMatrix'](a6,a4),a5=a['Camera']['world2ScreenWithMatrix'](a6,a5);let bS=0x0;bS=a2['z']+w;let bT=0x1,bU=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bA,bR[0x0]['offset'],bS)),bV=a['Camera']['world2ScreenWithMatrix'](a6,new b['Vector3'](bA,bR[bC-0x1]['offset'],bS));bU['z']=bV['z']=0x0;let bW=new b['Vector3']()['subVectors'](bV,bU)['length']();while(bT<bC){if(bW/bC*bT>A)break;bT*=B;}if(H)bT=0x1;let bX=0x0;if(bT<bC)for(let bY=0x0;bY<bC;bY+=bT){if(bR[bY]['offset']<a1['y']||bR[bY]['offset']>a2['y'])continue;bX++;if(!M&&bX%0x2)continue;if(!N&&!(bX%0x2))continue;a7[0x0]=new b['Vector3'](bA,bR[bY]['offset'],a1['z']),a7[0x1]=new b['Vector3'](bA,bR[bY]['offset'],a2['z']);let bZ=undefined;L?bZ=c['Info']['Items'][0x1]['label']+'\x20'+bR[bY]['id']+'':bZ=bR[bY]['offset']+'';g&&(bZ=bR[bY]['label']);let c0=undefined;!![]&&(c0=new b['Vector3']()['subVectors'](a7[0x1],a7[0x0]),c0['normalize'](),i(n,a7[0x1],c0,bZ,0xf));if(bY%(bT*C)!=0x0)for(let c1=0x0;c1<a7['length'];c1++){if(c1===0x0)continue;S[R+0x0]=a7[c1-0x1]['x'],S[R+0x1]=a7[c1-0x1]['y'],S[R+0x2]=a7[c1-0x1]['z'],R+=0x3,S[R+0x0]=a7[c1]['x'],S[R+0x1]=a7[c1]['y'],S[R+0x2]=a7[c1]['z'],R+=0x3;}else for(let c2=0x0;c2<a7['length'];c2++){if(c2===0x0)continue;U[T+0x0]=a7[c2-0x1]['x'],U[T+0x1]=a7[c2-0x1]['y'],U[T+0x2]=a7[c2-0x1]['z'],T+=0x3,U[T+0x0]=a7[c2]['x'],U[T+0x1]=a7[c2]['y'],U[T+0x2]=a7[c2]['z'],T+=0x3;}}}}if(o){let c3=undefined;c3=m['createBuffer'](),m['bindBuffer'](m['ARRAY_BUFFER'],c3),m['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,m['FLOAT'],![],0x0,0x0);let c4=new b['Color'](0xff,0xff,0xff,0xff)['glColor']();if(a['Configuration']['Frame']['LineColor']!==undefined)c4=a['Configuration']['Frame']['LineColor']['glColor']();a['Shader']['SetGLColor'](c4['r'],c4['g'],c4['b'],c4['a']);R>0x0&&(m['bindBuffer'](m['ARRAY_BUFFER'],c3),m['bufferData'](m['ARRAY_BUFFER'],new Float32Array(S),m['STATIC_DRAW']),m['drawArrays'](m['LINES'],0x0,R/0x3));m['deleteBuffer'](c3),c3=m['createBuffer'](),m['bindBuffer'](m['ARRAY_BUFFER'],c3),m['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,m['FLOAT'],![],0x0,0x0),c4=new b['Color'](0xff,0x0,0x0,0xff)['glColor']();if(a['Configuration']['Frame']['SplitLineColor']!==undefined)c4=a['Configuration']['Frame']['SplitLineColor']['glColor']();a['Shader']['SetGLColor'](c4['r'],c4['g'],c4['b'],c4['a']),T>0x0&&(m['bindBuffer'](m['ARRAY_BUFFER'],c3),m['bufferData'](m['ARRAY_BUFFER'],new Float32Array(U),m['STATIC_DRAW']),m['drawArrays'](m['LINES'],0x0,T/0x3)),m['deleteBuffer'](c3),a['Shader']['EndShader']();}};v();}this['Add']=m=>{let n=a['Data']['FileData']();return n['Url']=m,n['DataType']=-0x1,a['Loader']['LoadGrid'](n,function(o){if(o===null)return;j(o);},undefined),n;},this['AddString']=m=>{let n=JSON['parse'](m);j(n);},this['Clear']=()=>{this['Info']={'BBox':undefined,'Items':[]},this['Loaded']=![];},this['AddGridLine']=(m,n,o)=>{let p=undefined;if(m===b['Enum']['Axis']['X'])c['Info']['Items'][0x0]===undefined&&(c['Info']['Items'][0x0]=this['GridItem'](m)),p=c['Info']['Items'][0x0];else{if(m===b['Enum']['Axis']['Y'])c['Info']['Items'][0x1]===undefined&&(c['Info']['Items'][0x1]=this['GridItem'](m)),p=c['Info']['Items'][0x1];else m===b['Enum']['Axis']['Z']&&(c['Info']['Items'][0x2]===undefined&&(c['Info']['Items'][0x2]=this['GridItem'](m)),p=c['Info']['Items'][0x2]);}p['items']['push']({'id':n,'offset':o,'label':n+''}),this['Loaded']=!![];},this['AddGridLineCustom']=(m,n,o,p)=>{let q=undefined;if(m===b['Enum']['Axis']['X'])c['Info']['Items'][0x0]===undefined&&(c['Info']['Items'][0x0]=this['GridItem'](m)),q=c['Info']['Items'][0x0];else{if(m===b['Enum']['Axis']['Y'])c['Info']['Items'][0x1]===undefined&&(c['Info']['Items'][0x1]=this['GridItem'](m)),q=c['Info']['Items'][0x1];else m===b['Enum']['Axis']['Z']&&(c['Info']['Items'][0x2]===undefined&&(c['Info']['Items'][0x2]=this['GridItem'](m)),q=c['Info']['Items'][0x2]);}q['items']['push']({'id':n,'offset':o,'label':p}),this['Loaded']=!![];},this['Render']=(m,n,o)=>{c['Visible']&&c['Loaded']&&k(m,n,o);if(c['ShowCustomLevelGrid'])c['RenderLevelPlan'](m,n,o);},this['GetFrameBBox']=()=>{let m=new b['Vector3'](),n=new b['Vector3'](),o=function(q){let r={'min':undefined,'max':undefined};for(let s=0x0;s<q['length'];s++){let t=q[s];r['min']===undefined?r['min']=t['offset']:r['min']=Math['min'](r['min'],t['offset']),r['max']===undefined?r['max']=t['offset']:r['max']=Math['max'](r['max'],t['offset']);}if(r['min']!==undefined&&r['max']!==undefined)return r;else return undefined;},p=!![];for(let q=0x0;q<c['Info']['Items']['length'];q++){let r=c['Info']['Items'][q],s=o(r['items']);if(s===undefined){p=![];continue;}if(r['axisId']===b['Enum']['Axis']['X'])m['x']=s['min'],n['x']=s['max'];else{if(r['axisId']===b['Enum']['Axis']['Y'])m['y']=s['min'],n['y']=s['max'];else r['axisId']===b['Enum']['Axis']['Z']&&(m['z']=s['min'],n['z']=s['max']);}}return p?new b['BBox']([m['x'],m['y'],m['z'],n['x'],n['y'],n['z']]):undefined;};let l=undefined;this['ShowLevelGrid']=m=>{c['ShowCustomLevelGrid']=m;if(m)l=new b['BBox']()['copy'](a['Data']['ObjectsBBox']);else{if(l!==undefined)a['Data']['ObjectsBBox']=new b['BBox']()['copy'](l);}a['ViewRefresh']();},this['RenderLevelPlan']=(m,n,o)=>{if(a['Data']['ObjectsBBox']===undefined)return;let p=c['GetFrameBBox']();p['min']['z']=a['Data']['ObjectsBBox']['min']['z'],p['max']['z']=a['Data']['ObjectsBBox']['max']['z'];if(p===undefined||p['radius']===0x0)return;let q=new b['Color'](0xff,0xff,0xff,0xff),r=new b['Color'](0x96,0x96,0x96,0xc8),s=r['glColor'](),t='rgba('+r['r']+','+r['g']+','+r['b']+','+r['glAlpha']()+')';if(c['Visible']&&c['Loaded']){f=[],f[0x0]=[],f[0x1]=[];let u=0x0,v=0x0;m['enable'](m['DEPTH_TEST']),m['depthMask'](!![]),m['enable'](m['BLEND']),m['blendFunc'](m['SRC_ALPHA'],m['ONE_MINUS_SRC_ALPHA']);const w=new b['Matrix4']()['copy'](a['Camera']['matMV']),x=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let y=()=>{if(o){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](x,w),a['Shader']['SetClipping'](undefined);if(q===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let a6=q['glColor']();a['Shader']['SetGLColor'](a6['r'],a6['g'],a6['b'],a6['a']);}}let A=0x5,B=0x3c,C=0x2,D=0x5,E=![],F=!![],G=!![],H=!![],I=!![],J=!![],K=!![],L=!![],M=!![],N=!![],O=!![],P=new b['BBox']()['copy'](p),Q=0x7530,R=0x0,S=[],T=0x0,U=[],V=0x1,W=new b['Vector3']()['copy'](P['center']),X=new b['Vector3']()['subVectors'](P['min'],W)['multiplyScalar'](V),Y=new b['Vector3']()['subVectors'](P['max'],W)['multiplyScalar'](V),Z=new b['Vector3']()['addVectors'](W,X),a0=new b['Vector3']()['addVectors'](W,Y),a1=P['min']['z'],a2=new b['Vector3'](),a3=new b['Vector3'](),a4=new b['Matrix4']()['copy'](a['Camera']['matMVP']),a5=[];if(F){a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['z']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let a7=P['min']['z'];a5[0x0]=a5[0x4]=new b['Vector3'](Z['x'],Z['y'],a7),a5[0x1]=new b['Vector3'](a0['x'],Z['y'],a7),a5[0x2]=new b['Vector3'](a0['x'],a0['y'],a7),a5[0x3]=new b['Vector3'](Z['x'],a0['y'],a7);for(let aa=0x0;aa<a5['length'];aa++){if(aa===0x0)continue;S[R+0x0]=a5[aa-0x1]['x'],S[R+0x1]=a5[aa-0x1]['y'],S[R+0x2]=a5[aa-0x1]['z'],R+=0x3,S[R+0x0]=a5[aa]['x'],S[R+0x1]=a5[aa]['y'],S[R+0x2]=a5[aa]['z'],R+=0x3;}let a8=0x0;if(c['Info']['Items'][0x0]!==undefined&&c['Info']['Items'][0x0]['items']['length']>0x0)a8=c['Info']['Items'][0x0]['items']['length'];if(J&&a8){let ab=c['Info']['Items'][0x0]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['y']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let ac=0x0,ad=![];a2['z']>a3['z']?(ac=a0['y']+A,ad=!![]):ac=Z['y']-A;let ae=0x1,af=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](ab[0x0]['offset'],ac,a7)),ag=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](ab[a8-0x1]['offset'],ac,a7));af['z']=ag['z']=0x0;let ah=new b['Vector3']()['subVectors'](ag,af)['length']();while(ae<a8){if(ah/a8*ae>B)break;ae*=C;}if(I)ae=0x1;let ai=0x0;if(ae<a8)for(let aj=0x0;aj<a8;aj+=ae){if(ab[aj]['offset']<Z['x']||ab[aj]['offset']>a0['x'])continue;ai++;if(!N&&ai%0x2)continue;if(!O&&!(ai%0x2))continue;a5[0x0]=new b['Vector3'](ab[aj]['offset'],Z['y'],a7),a5[0x1]=new b['Vector3'](ab[aj]['offset'],a0['y'],a7);let ak=undefined,al=undefined;M?al=c['Info']['Items'][0x0]['label']+'\x20'+ab[aj]['id']+'':al=ab[aj]['offset']+'';g&&(al=ab[aj]['label']);ad?(ak=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),ak['normalize'](),i(n,a5[0x1],ak,al,0x0,t)):(ak=new b['Vector3']()['subVectors'](a5[0x0],a5[0x1]),ak['normalize'](),i(n,a5[0x0],ak,al,0x0,t));if(aj%(ae*D)!=0x0)for(let am=0x0;am<a5['length'];am++){if(am===0x0)continue;S[R+0x0]=a5[am-0x1]['x'],S[R+0x1]=a5[am-0x1]['y'],S[R+0x2]=a5[am-0x1]['z'],R+=0x3,S[R+0x0]=a5[am]['x'],S[R+0x1]=a5[am]['y'],S[R+0x2]=a5[am]['z'],R+=0x3;}else for(let an=0x0;an<a5['length'];an++){if(an===0x0)continue;U[T+0x0]=a5[an-0x1]['x'],U[T+0x1]=a5[an-0x1]['y'],U[T+0x2]=a5[an-0x1]['z'],T+=0x3,U[T+0x0]=a5[an]['x'],U[T+0x1]=a5[an]['y'],U[T+0x2]=a5[an]['z'],T+=0x3;}}}let a9=0x0;if(c['Info']['Items'][0x1]!==undefined&&c['Info']['Items'][0x1]['items']['length']>0x0)a9=c['Info']['Items'][0x1]['items']['length'];if(K&&a9){let ao=c['Info']['Items'][0x1]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['x']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let ap=0x0,aq=![];if(a2['z']>a3['z'])ap=a0['x']+A,aq=!![];else ap=Z['x']-A;let ar=0x1,as=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](ap,ao[0x0]['offset'],a7)),at=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](ap,ao[a9-0x1]['offset'],a7));as['z']=at['z']=0x0;let au=new b['Vector3']()['subVectors'](at,as)['length']();while(ar<a9){if(au/a9*ar>B)break;ar*=C;}if(I)ar=0x1;let av=0x0;if(ar<a9)for(let aw=0x0;aw<a9;aw+=ar){if(ao[aw]['offset']<Z['y']||ao[aw]['offset']>a0['y'])continue;av++;if(!N&&av%0x2)continue;if(!O&&!(av%0x2))continue;a5[0x0]=new b['Vector3'](Z['x'],ao[aw]['offset'],a7),a5[0x1]=new b['Vector3'](a0['x'],ao[aw]['offset'],a7);let ax=undefined;M?ax=c['Info']['Items'][0x1]['label']+'\x20'+ao[aw]['id']+'':ax=ao[aw]['offset']+'';g&&(ax=ao[aw]['label']);let ay=undefined;aq?(ay=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),ay['normalize'](),i(n,a5[0x1],ay,ax,0x0,t)):(ay=new b['Vector3']()['subVectors'](a5[0x0],a5[0x1]),ay['normalize'](),i(n,a5[0x0],ay,ax,0x0,t));if(aw%(ar*D)!=0x0)for(let az=0x0;az<a5['length'];az++){if(az===0x0)continue;S[R+0x0]=a5[az-0x1]['x'],S[R+0x1]=a5[az-0x1]['y'],S[R+0x2]=a5[az-0x1]['z'],R+=0x3,S[R+0x0]=a5[az]['x'],S[R+0x1]=a5[az]['y'],S[R+0x2]=a5[az]['z'],R+=0x3;}else for(let aA=0x0;aA<a5['length'];aA++){if(aA===0x0)continue;U[T+0x0]=a5[aA-0x1]['x'],U[T+0x1]=a5[aA-0x1]['y'],U[T+0x2]=a5[aA-0x1]['z'],T+=0x3,U[T+0x0]=a5[aA]['x'],U[T+0x1]=a5[aA]['y'],U[T+0x2]=a5[aA]['z'],T+=0x3;}}}}if(![]){if(G){a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['y']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let aB=0x0;if(a2['z']>a3['z']&&!E||a2['z']<a3['z']&&E)aB=Z['y'];else aB=a0['y'];a5[0x0]=a5[0x4]=new b['Vector3'](Z['x'],aB,Z['z']),a5[0x1]=new b['Vector3'](a0['x'],aB,Z['z']),a5[0x2]=new b['Vector3'](a0['x'],aB,a0['z']),a5[0x3]=new b['Vector3'](Z['x'],aB,a0['z']);for(let aE=0x0;aE<a5['length'];aE++){if(aE===0x0)continue;S[R+0x0]=a5[aE-0x1]['x'],S[R+0x1]=a5[aE-0x1]['y'],S[R+0x2]=a5[aE-0x1]['z'],R+=0x3,S[R+0x0]=a5[aE]['x'],S[R+0x1]=a5[aE]['y'],S[R+0x2]=a5[aE]['z'],R+=0x3;}let aC=0x0;if(c['Info']['Items'][0x2]!==undefined&&c['Info']['Items'][0x2]['items']['length']>0x0)aC=c['Info']['Items'][0x2]['items']['length'];if(L&&aC>0x0){let aF=c['Info']['Items'][0x2]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['x']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let aG=0x0,aH=![];if(a2['z']>a3['z'])aG=a0['x']+A,aH=!![];else aG=Z['x']-A;let aI=0x1,aJ=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](aG,aB,aF[0x0]['offset'])),aK=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](aG,aB,aF[aC-0x1]['offset']));aJ['z']=aK['z']=0x0;let aL=new b['Vector3']()['subVectors'](aK,aJ)['length']();while(aI<aC){if(aL/aC*aI>B)break;aI*=C;}if(I)aI=0x1;let aM=0x0;if(aI<aC)for(let aN=0x0;aN<aC;aN+=aI){if(aF[aN]['offset']<Z['z']||aF[aN]['offset']>a0['z'])continue;aM++;if(!N&&aM%0x2)continue;if(!O&&!(aM%0x2))continue;a5[0x0]=new b['Vector3'](Z['x'],aB,aF[aN]['offset']),a5[0x1]=new b['Vector3'](a0['x'],aB,aF[aN]['offset']);let aO=undefined;M?aO=c['Info']['Items'][0x2]['label']+'\x20'+aF[aN]['id']+'':aO=aF[aN]['offset']+'';g&&(aO=aF[aN]['label']);let aP=undefined;aH?(aP=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),aP['normalize'](),i(n,a5[0x1],aP,aO,-0xa)):(aP=new b['Vector3']()['subVectors'](a5[0x0],a5[0x1]),aP['normalize'](),i(n,a5[0x0],aP,aO,-0xa));if(aN%(aI*D)!=0x0)for(let aQ=0x0;aQ<a5['length'];aQ++){if(aQ===0x0)continue;S[R+0x0]=a5[aQ-0x1]['x'],S[R+0x1]=a5[aQ-0x1]['y'],S[R+0x2]=a5[aQ-0x1]['z'],R+=0x3,S[R+0x0]=a5[aQ]['x'],S[R+0x1]=a5[aQ]['y'],S[R+0x2]=a5[aQ]['z'],R+=0x3;}else for(let aR=0x0;aR<a5['length'];aR++){if(aR===0x0)continue;U[T+0x0]=a5[aR-0x1]['x'],U[T+0x1]=a5[aR-0x1]['y'],U[T+0x2]=a5[aR-0x1]['z'],T+=0x3,U[T+0x0]=a5[aR]['x'],U[T+0x1]=a5[aR]['y'],U[T+0x2]=a5[aR]['z'],T+=0x3;}}}let aD=0x0;if(c['Info']['Items'][0x0]!==undefined&&c['Info']['Items'][0x0]['items']['length']>0x0)aD=c['Info']['Items'][0x0]['items']['length'];if(J&&aD){let aS=c['Info']['Items'][0x0]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['z']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let aT=a0['z']+A,aU=0x1,aV=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](aS[0x0]['offset'],aB,aT)),aW=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](aS[aD-0x1]['offset'],aB,aT));aV['z']=aW['z']=0x0;let aX=new b['Vector3']()['subVectors'](aW,aV)['length']();while(aU<aD){if(aX/aD*aU>B)break;aU*=C;}if(I)aU=0x1;let aY=0x0;if(aU<aD)for(let aZ=0x0;aZ<aD;aZ+=aU){if(aS[aZ]['offset']<Z['x']||aS[aZ]['offset']>a0['x'])continue;aY++;if(!N&&aY%0x2)continue;if(!O&&!(aY%0x2))continue;a5[0x0]=new b['Vector3'](aS[aZ]['offset'],aB,Z['z']),a5[0x1]=new b['Vector3'](aS[aZ]['offset'],aB,a0['z']);let b0=undefined;M?b0=c['Info']['Items'][0x0]['label']+'\x20'+aS[aZ]['id']+'':b0=aS[aZ]['offset']+'';g&&(b0=aS[aZ]['label']);let b1=undefined;!![]&&(b1=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),b1['normalize'](),i(n,a5[0x1],b1,b0));if(aZ%(aU*D)!=0x0)for(let b2=0x0;b2<a5['length'];b2++){if(b2===0x0)continue;S[R+0x0]=a5[b2-0x1]['x'],S[R+0x1]=a5[b2-0x1]['y'],S[R+0x2]=a5[b2-0x1]['z'],R+=0x3,S[R+0x0]=a5[b2]['x'],S[R+0x1]=a5[b2]['y'],S[R+0x2]=a5[b2]['z'],R+=0x3;}else for(let b3=0x0;b3<a5['length'];b3++){if(b3===0x0)continue;U[T+0x0]=a5[b3-0x1]['x'],U[T+0x1]=a5[b3-0x1]['y'],U[T+0x2]=a5[b3-0x1]['z'],T+=0x3,U[T+0x0]=a5[b3]['x'],U[T+0x1]=a5[b3]['y'],U[T+0x2]=a5[b3]['z'],T+=0x3;}}}}if(H){a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['x']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let b4=0x0;if(a2['z']>a3['z']&&!E||a2['z']<a3['z']&&E)b4=Z['x'];else b4=a0['x'];a5[0x0]=a5[0x4]=new b['Vector3'](b4,Z['y'],Z['z']),a5[0x1]=new b['Vector3'](b4,a0['y'],Z['z']),a5[0x2]=new b['Vector3'](b4,a0['y'],a0['z']),a5[0x3]=new b['Vector3'](b4,Z['y'],a0['z']);for(let b7=0x0;b7<a5['length'];b7++){if(b7===0x0)continue;S[R+0x0]=a5[b7-0x1]['x'],S[R+0x1]=a5[b7-0x1]['y'],S[R+0x2]=a5[b7-0x1]['z'],R+=0x3,S[R+0x0]=a5[b7]['x'],S[R+0x1]=a5[b7]['y'],S[R+0x2]=a5[b7]['z'],R+=0x3;}let b5=0x0;if(c['Info']['Items'][0x2]!==undefined&&c['Info']['Items'][0x2]['items']['length']>0x0)b5=c['Info']['Items'][0x2]['items']['length'];if(L&&b5>0x0){let b8=c['Info']['Items'][0x2]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['y']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let b9=0x0,ba=![];if(a2['z']>a3['z'])b9=a0['y']+A,ba=!![];else b9=Z['y']-A;let bb=0x1,bc=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](b4,b9,b8[0x0]['offset'])),bd=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](b4,b9,b8[b5-0x1]['offset']));bc['z']=bd['z']=0x0;let be=new b['Vector3']()['subVectors'](bd,bc)['length']();while(bb<b5){if(be/b5*bb>B)break;bb*=C;}if(I)bb=0x1;let bf=0x0;if(bb<b5)for(let bg=0x0;bg<b5;bg+=bb){if(b8[bg]['offset']<Z['z']||b8[bg]['offset']>a0['z'])continue;bf++;if(!N&&bf%0x2)continue;if(!O&&!(bf%0x2))continue;a5[0x0]=new b['Vector3'](b4,Z['y'],b8[bg]['offset']),a5[0x1]=new b['Vector3'](b4,a0['y'],b8[bg]['offset']);let bh=undefined;M?bh=c['Info']['Items'][0x2]['label']+'\x20'+b8[bg]['id']+'':bh=b8[bg]['offset']+'';g&&(bh=b8[bg]['label']);let bi=undefined;ba?(bi=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),bi['normalize'](),i(n,a5[0x1],bi,bh,-0xa)):(bi=new b['Vector3']()['subVectors'](a5[0x0],a5[0x1]),bi['normalize'](),i(n,a5[0x0],bi,bh,-0xa));if(bg%(bb*D)!=0x0)for(let bj=0x0;bj<a5['length'];bj++){if(bj===0x0)continue;S[R+0x0]=a5[bj-0x1]['x'],S[R+0x1]=a5[bj-0x1]['y'],S[R+0x2]=a5[bj-0x1]['z'],R+=0x3,S[R+0x0]=a5[bj]['x'],S[R+0x1]=a5[bj]['y'],S[R+0x2]=a5[bj]['z'],R+=0x3;}else for(let bk=0x0;bk<a5['length'];bk++){if(bk===0x0)continue;U[T+0x0]=a5[bk-0x1]['x'],U[T+0x1]=a5[bk-0x1]['y'],U[T+0x2]=a5[bk-0x1]['z'],T+=0x3,U[T+0x0]=a5[bk]['x'],U[T+0x1]=a5[bk]['y'],U[T+0x2]=a5[bk]['z'],T+=0x3;}}}let b6=0x0;if(c['Info']['Items'][0x1]!==undefined&&c['Info']['Items'][0x1]['items']['length']>0x0)b6=c['Info']['Items'][0x1]['items']['length'];if(K&&b6){let bl=c['Info']['Items'][0x1]['items'];a5=[],a2=new b['Vector3']()['copy'](P['center']),a3=new b['Vector3']()['copy'](a2),a3['z']+=a1,a2=a['Camera']['world2ScreenWithMatrix'](a4,a2),a3=a['Camera']['world2ScreenWithMatrix'](a4,a3);let bm=0x0;bm=a0['z']+A;let bn=0x1,bo=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](b4,bl[0x0]['offset'],bm)),bp=a['Camera']['world2ScreenWithMatrix'](a4,new b['Vector3'](b4,bl[b6-0x1]['offset'],bm));bo['z']=bp['z']=0x0;let bq=new b['Vector3']()['subVectors'](bp,bo)['length']();while(bn<b6){if(bq/b6*bn>B)break;bn*=C;}if(I)bn=0x1;let br=0x0;if(bn<b6)for(let bs=0x0;bs<b6;bs+=bn){if(bl[bs]['offset']<Z['y']||bl[bs]['offset']>a0['y'])continue;br++;if(!N&&br%0x2)continue;if(!O&&!(br%0x2))continue;a5[0x0]=new b['Vector3'](b4,bl[bs]['offset'],Z['z']),a5[0x1]=new b['Vector3'](b4,bl[bs]['offset'],a0['z']);let bt=undefined;M?bt=c['Info']['Items'][0x1]['label']+'\x20'+bl[bs]['id']+'':bt=bl[bs]['offset']+'';g&&(bt=bl[bs]['label']);let bu=undefined;!![]&&(bu=new b['Vector3']()['subVectors'](a5[0x1],a5[0x0]),bu['normalize'](),i(n,a5[0x1],bu,bt,0xf));if(bs%(bn*D)!=0x0)for(let bv=0x0;bv<a5['length'];bv++){if(bv===0x0)continue;S[R+0x0]=a5[bv-0x1]['x'],S[R+0x1]=a5[bv-0x1]['y'],S[R+0x2]=a5[bv-0x1]['z'],R+=0x3,S[R+0x0]=a5[bv]['x'],S[R+0x1]=a5[bv]['y'],S[R+0x2]=a5[bv]['z'],R+=0x3;}else for(let bw=0x0;bw<a5['length'];bw++){if(bw===0x0)continue;U[T+0x0]=a5[bw-0x1]['x'],U[T+0x1]=a5[bw-0x1]['y'],U[T+0x2]=a5[bw-0x1]['z'],T+=0x3,U[T+0x0]=a5[bw]['x'],U[T+0x1]=a5[bw]['y'],U[T+0x2]=a5[bw]['z'],T+=0x3;}}}}}if(o){let bx=undefined;bx=m['createBuffer'](),m['bindBuffer'](m['ARRAY_BUFFER'],bx),m['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,m['FLOAT'],![],0x0,0x0);let by=new b['Color'](0xff,0xff,0xff,0xff)['glColor']();if(q!==undefined)by=q['glColor']();a['Shader']['SetGLColor'](by['r'],by['g'],by['b'],by['a']);R>0x0&&(m['bindBuffer'](m['ARRAY_BUFFER'],bx),m['bufferData'](m['ARRAY_BUFFER'],new Float32Array(S),m['STATIC_DRAW']),m['drawArrays'](m['LINES'],0x0,R/0x3));m['deleteBuffer'](bx),bx=m['createBuffer'](),m['bindBuffer'](m['ARRAY_BUFFER'],bx),m['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,m['FLOAT'],![],0x0,0x0),by=new b['Color'](0xff,0x0,0x0,0xff)['glColor']();if(q!==undefined)by=q['glColor']();a['Shader']['SetGLColor'](by['r'],by['g'],by['b'],by['a']),T>0x0&&(m['bindBuffer'](m['ARRAY_BUFFER'],bx),m['bufferData'](m['ARRAY_BUFFER'],new Float32Array(U),m['STATIC_DRAW']),m['drawArrays'](m['LINES'],0x0,T/0x3)),m['deleteBuffer'](bx),a['Shader']['EndShader']();}};y();}},this['GetGridItem']=m=>{let n=undefined;if(m===b['Enum']['Axis']['X']){if(c['Info']['Items'][0x0])n=c['Info']['Items'][0x0];}else{if(m===b['Enum']['Axis']['Y']){if(c['Info']['Items'][0x1])n=c['Info']['Items'][0x1];}else{if(m===b['Enum']['Axis']['Z']){if(c['Info']['Items'][0x2])n=c['Info']['Items'][0x2];}}}return n;},this['GetSnap']=(m,n)=>{let o=this['GetGridItem'](m);if(o===undefined)return undefined;let p=o['items'],q=-0x1,r=-0x1,s=-0x1,t=0x0;for(let u=0x0,v=p['length'];u<v;u++){if(u===0x0)q=u,r=u,s=u,t=n-p[s]['offset'];else{if(p[u]['offset']<p[q]['offset'])q=u;if(p[u]['offset']>p[r]['offset'])r=u;let w=n-p[u]['offset'];w<t&&(t=w,s=u);}}if(q>=0x0&&n<=p[q]['offset'])return p[q];if(r>=0x0&&n>=p[r]['offset'])return p[r];if(s<0x0)return undefined;return p[s];},this['GetSnapItem']=(m,n)=>{let o=c['GetSnap'](m,n);if(o===undefined)return undefined;let p=o['label'];if(!c['GetShowCustomLabel']()){let q=c['GetGridItem'](m);p=q['label']+'\x20'+p;}return{'Axis':m,'GridID':o['id'],'Label':p,'Offset':n-o['offset']};},this['GetSnapLabel']=(m,n)=>{let o=this['GetSnap'](m,n);if(o===undefined)return undefined;let p=this['GetGridItem'](m);if(p===undefined)return undefined;return g?o['label']:p['label']+'\x20'+o['label'];},this['SetShowCustomLabel']=m=>{g=m;},this['GetShowCustomLabel']=()=>{return g;},this['HasFrame']=()=>{let m=![];return c['Info']['Items']['length']>0x0&&(m=!![]),m;};}}export default Grid;