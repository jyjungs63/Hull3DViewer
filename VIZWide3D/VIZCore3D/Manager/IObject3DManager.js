import a from'./IFindManager.js';import b from'./IColorManager.js';import c from'./IMaterialManager.js';import d from'./IGeometryPropertyManager.js';import e from'./ITransformManager.js';import f from'./IUDAManager.js';import g from'./IObject3DCustomEdgeManager.js';class Object3D{constructor(h,i){let j=this;this['Main']=h;let k=function(){let n={'id':undefined,'index':undefined,'kind':undefined,'kindStr':undefined,'parentId':undefined,'name':undefined,'level':undefined,'selection':undefined,'visible':undefined,'boundBox':undefined,'fileId':undefined,'originId':undefined};return n;};j['Find']=new a(h,i,this),j['Color']=new b(h,i),j['Material']=new c(h,i,this),j['GeometryProperty']=new d(h,i,this),j['Transform']=new e(h,i),j['CustomEdge']=new g(h,i['this']),j['UDA']=new f(h,i),this['GetExportNodeInfo']=function(n){return l(n);};function l(n){let o=undefined;if(n!==undefined)o=j['Main']['Tree']['GetParentNodeInfo'](n);let p=undefined;if(n['node_type']===i['Enum']['ENTITY_TYPES']['EntAssembly'])p='Assembly';else{if(n['node_type']===i['Enum']['ENTITY_TYPES']['EntPart'])p='Part';else{if(n['node_type']===i['Enum']['ENTITY_TYPES']['EntBody'])p='Body';}}let q=j['Main']['Tree']['GetInfo2Node'](n),r=k();return r['id']=n['node_id'],r['index']=n['index'],r['kind']=n['node_type'],r['kindStr']=p,r['parentId']=o!==undefined?o['node_id']:undefined,r['name']=n['name'],r['level']=n['level'],r['selection']=q['selection'],r['visible']=q['visible'],r['boundBox']=n['bbox'],r['fileId']=n['file_id'],r['originId']=n['origin_id'],r;}this['FromID']=function(n){let o=j['Main']['Tree']['GetNodeInfo'](n);if(o===undefined)return undefined;let p=l(o);return p;},this['FromOrigin']=function(n,o){let p=j['Main']['Tree']['GetNodeIDByOrigin'](n,o);return j['FromID'](p);},this['FromFile']=function(n){let o=j['Main']['Tree']['GetNodeInfoByFile'](n),p=[];if(o!==undefined)for(let q=0x0;q<o['length'];q++){let r=o[q];p['push'](l(r));}return p;},this['FromLevel']=function(n){let o=j['Main']['Tree']['GetNodeByLevel'](n,!![]),p=[];if(o!==undefined)for(let q=0x0;q<o['length'];q++){let r=o[q];p['push'](l(r));}return p;},this['GetNodeStructure']=function(n,o){let p=[],q=j['FromID'](n);if(q===undefined)return p;let r=undefined;if(q['parentId']!==undefined)r=j['FromID'](q['parentId']);p['push'](q);while(r!==undefined){p['push'](r);if(r['parentId']!==undefined)r=j['FromID'](r['parentId']);else break;}return o===![]?p:p['reverse']();},this['SelectAll']=function(n){if(n===!![])j['Main']['Data']['SelectAll'](!![]);else j['Main']['Data']['DeselectAll'](![]);},this['GetSelectedObject3D']=function(){return j['Main']['Data']['GetSelection']();},this['SelectByNode']=function(n,o,p){j['Main']['Renderer']['Lock']();let q=[];for(let r=0x0;r<n['length'];r++){q['push'](n[r]['id']);}j['Main']['Tree']['SelectMulti'](q,o,p),j['Main']['Renderer']['Unlock']();},this['SelectByNodeID']=function(n,o,p){j['Main']['Renderer']['Lock'](),j['Main']['Tree']['SelectMulti'](n,o,p),j['Main']['Renderer']['Unlock']();},this['SelectByOrigin']=function(n,o,p,q,r){j['Main']['Renderer']['Lock']();let s=j['Main']['Tree']['GetNodeIDsByOrigin'](n,o);j['Main']['Tree']['EventHandler']['Enable']=![],j['Main']['Tree']['SelectMulti'](s,p,q),j['Main']['Tree']['EventHandler']['Enable']=!![];if(r!==undefined&&r===!![]){let t=[];t=j['Main']['Tree']['GetDataToNode'](s),j['Main']['Tree']['EventHandler']['dispatchEvent'](i['Enum']['EVENT_TYPES']['Data']['Selected'],t);}j['Main']['Renderer']['Unlock']();},this['SelectByFile']=function(n,o,p){j['Main']['Tree']['EventHandler']['Enable']=![];if(Array['isArray'](n)){let q=[];for(let r=0x0;r<n['length'];r++){let s=this['FromFile'](n[r]);q=q['concat'](s);}j['SelectByNode'](q,o,p);}else{let t=this['FromFile'](n);j['SelectByNode'](t,o,p);}j['Main']['Tree']['EventHandler']['Enable']=!![];},this['SetSelectionColor']=function(n){j['Main']['Data']['SetSelectedObjectsColor'](n);},this['ShowByNode']=function(n,o){j['Main']['Renderer']['Lock']();let p=[];for(let q=0x0;q<n['length'];q++){p['push'](n[q]['id']);}j['Main']['Data']['ShowMulti'](p,o),j['Main']['Renderer']['Unlock']();},this['ShowByNodeID']=function(n,o){j['Main']['Renderer']['Lock'](),j['Main']['Data']['ShowMulti'](n,o),j['Main']['Renderer']['Unlock']();},this['ShowByOrigin']=function(n,o,p){let q=j['Main']['Tree']['GetNodeIDsByOrigin'](n,o);j['ShowByNodeID'](q,p);},this['ShowByFile']=function(n,o){if(Array['isArray'](n)){let p=[];for(let q=0x0;q<n['length'];q++){let r=this['FromFile'](n[q]);p=p['concat'](r);}j['ShowByNode'](p,o);}else{let s=this['FromFile'](n);j['ShowByNode'](s,o);}},this['ShowAll']=function(n){j['Main']['Data']['ShowAll'](n);},this['ShowSelectedObject']=function(n){j['Main']['Data']['ShowSelection'](n);},this['HideUnselectedObject']=function(){j['Main']['Data']['UnselectHide']();},this['SelectByType']=function(n){switch(n){case i['Enum']['SelectionModes']['SELECT_ALL']:{j['SelectAll'](!![]);}break;case i['Enum']['SelectionModes']['INVERT_SELECTION']:{j['InvertSelection']();}break;case i['Enum']['SelectionModes']['DESELECT_ALL']:{j['SelectAll'](![]);}break;default:break;}},this['InvertSelection']=function(){j['Main']['Data']['InvertSelection']();},this['GetBodiesByNode']=function(n){let o=[];for(let p=0x0;p<n['length'];p++){o['push'](n[p]['id']);}return j['GetBodiesByNodeID'](o);},this['GetBodiesByNodeID']=function(n){let o=undefined;return j['Main']['useTree']?o=j['Main']['Tree']['GetBodies'](n):o=j['Main']['Data']['GetBodies'](n),o;},this['GetBodiesByFile']=function(n){let o=undefined;return o=j['Main']['Data']['GetBodiesByFile'](n),o;},this['GetBodyIdsByNode']=function(n){let o=[];for(let p=0x0;p<n['length'];p++){o['push'](n[p]['id']);}return j['GetBodyIdsByNodeID'](o);},this['GetBodyIdsByNodeID']=function(n){let o=[];return j['Main']['useTree']?o=j['Main']['Tree']['GetBodyIds'](n):o=j['Main']['Data']['GetBodyIdsByNodeIds'](fileKey),o;},this['GetBodyIdsByNodeOriginID']=function(n,o){let p=undefined;if(j['Main']['useTree']){let q=[];for(let s=0x0;s<o['length'];s++)q[s]=n;let r=j['Main']['Tree']['GetNodeIDsByOrigin'](q,o);p=j['Main']['Tree']['GetBodyIds'](r);}else p=j['Main']['Data']['GetBodyIdsByOriginID'](n,o);return p;},this['GetBodyIdsByFile']=function(n){let o=undefined;return o=j['Main']['Data']['GetBodyIdsByFile'](n),o;},this['GetBoundBoxByNode']=function(n){if(j['Main']['useTree']){let o=[];for(let q=0x0;q<n['length'];q++){o['push'](n[q]['id']);}let p=j['Main']['Tree']['GetBodyIds'](o);return j['Main']['Tree']['GetBBoxArrayID'](p);}else{let r=j['GetBodiesByNode'](n);return j['Main']['Data']['GetBBox'](r);}},this['GetBoundBoxByNodeID']=function(n){if(j['Main']['useTree']){let o=j['Main']['Tree']['GetBodyIds'](n);return j['Main']['Tree']['GetBBoxArrayID'](o);}else{let p=j['GetBodiesByNodeID'](n);return j['Main']['Data']['GetBBox'](p);}},this['GetExtremeAxisBBoxsByNodeID']=function(n){if(j['Main']['useTree']){let o=j['Main']['Tree']['GetBodyIds'](n);return j['Main']['Tree']['GetExtremeAxisBBoxs'](o);}else{let p=j['GetBodiesByNodeID'](n);return j['Main']['Data']['GetExtremeAxisBBoxs'](p);}},this['GetOriginBoundBox']=function(n){if(j['Main']['useTree']){let o=[];for(let q=0x0;q<n['length'];q++){o['push'](n[q]['id']);}let p=j['Main']['Tree']['GetBodyIds'](o);return j['Main']['Tree']['GetBBoxOriginalArrayID'](p);}else{let r=j['GetBodiesByNode'](n);return j['Main']['Data']['GetBBoxFormOriginal'](r);}},this['GetBoundBox']=function(){return new i['BBox']()['copy'](j['Main']['Data']['ObjectsBBox']);},this['RefreshBBox']=function(){j['Main']['Data']['UpdateAllObjectsBBox']();};function m(n){if(n===i['Enum']['OBJECT3D_FILTER']['LEAF_ASSEMBLY']){let o=[];o=j['Main']['Tree']['GetNodeByType'](i['Enum']['ENTITY_TYPES']['EntPart']);let p=new Map(),q=[];for(let r=0x0;r<o['length'];r++){let s=o[r];if(s['parent_id']===undefined)continue;if(p['has'](s['parent_id'])==![]){let t=j['Main']['Tree']['GetNodeByID'](s['parent_id']);p['set'](s['parent_id'],t);}}return q=Array['from'](p['values']()),q;}else{if(n===i['Enum']['OBJECT3D_FILTER']['PARENT_LEAF_ASSEMBLY']){let u=[];u=m(i['Enum']['OBJECT3D_FILTER']['LEAF_ASSEMBLY']);let v=new Map(),w=[];for(let x=0x0;x<u['length'];x++){let y=u[x];if(y['parent_id']===undefined)continue;if(v['has'](y['parent_id'])==![]){let z=j['Main']['Tree']['GetNodeByID'](y['parent_id']);v['set'](y['parent_id'],z);}}return w=Array['from'](v['values']()),w;}else{if(n===i['Enum']['OBJECT3D_FILTER']['ROOT']){let A=j['FromRoot']();return A;}else{if(n===i['Enum']['OBJECT3D_FILTER']['ALL']){let B=j['Main']['Tree']['GetAllNode']();return B;}else{if(n===i['Enum']['OBJECT3D_FILTER']['PART']){let C=j['Main']['Tree']['GetNodeByType'](i['Enum']['ENTITY_TYPES']['EntPart']);return C;}else{if(n===i['Enum']['OBJECT3D_FILTER']['VISIBLE_PART']){let D=[],E=j['Main']['Tree']['GetNodeByType'](i['Enum']['ENTITY_TYPES']['EntPart']);for(let F=0x0;F<E['length'];F++){if(!E[F]['visible'])continue;D['push'](E[F]);}return E;}else{if(n===i['Enum']['OBJECT3D_FILTER']['ALL_INCLUDE_BODY']){let G=j['Main']['Tree']['GetNodeByType'](i['Enum']['ENTITY_TYPES']['EntBody']);return G;}else{if(n===i['Enum']['OBJECT3D_FILTER']['SELECTED_TOP']){let H=j['Main']['Tree']['GetSelectionTopNode']();return H;}else{if(n===i['Enum']['OBJECT3D_FILTER']['SELECTED_ALL']){let I=[],J=j['Main']['Tree']['GetAllNode']();for(let K=0x0;K<J['length'];K++){if(!J[K]['visible'])continue;if(!J[K]['selection'])continue;I['push'](J[K]);}return I;}else{}}}}}}}}}};this['FromFilter']=function(n){let o=[],p=m(n);for(let q=0x0;q<p['length'];q++){let r=undefined;if(p[q]['node_id']===undefined)r=j['FromID'](p[q]['id']);else r=j['FromID'](p[q]['node_id']);o['push'](r);}return o;},this['FromRoot']=function(){let n=[],o=j['Main']['Tree']['GetRootNode']();for(let p=0x0;p<o['length'];p++){n['push'](l(o[p]));}return n;},this['FromRootByUrl']=function(n){let o=[],p=j['Main']['Tree']['GetRootNodeByFile'](n);for(let q=0x0;q<p['length'];q++){o['push'](l(p[q]));}return o;},this['FromRootByKey']=function(n){let o=[],p=j['Main']['Tree']['GetRootNodeByFileKey'](n);for(let q=0x0;q<p['length'];q++){o['push'](l(p[q]));}return o;},this['GetNodeIDsByCustomColor']=function(n){let o=[];return j['Main']['useTree']?o=j['Main']['Tree']['GetNodeIDsByCustomColor'](n):o=j['Main']['Data']['GetNodeIDsByCustomColor'](n),o;},this['EnableUseSelectionMulti']=function(n,o){let p=[];return j['Main']['useTree']?p=j['Main']['Tree']['EnableUseSelectionMulti'](n,o):p=j['Main']['Data']['EnableUseSelectionMulti'](n,o),p;},this['LockMeshCache']=function(n){j['Main']['Data']['ModelFileManager']['LockMeshCache'](n);},this['UnlockMeshCache']=function(n){j['Main']['Data']['ModelFileManager']['UnlockMeshCache'](n);},this['SetViewDistanceBox']=function(n,o){j['Main']['Data']['ModelFileManager']['SetMeshViewDistance'](n,o);},this['DisableViewDistanceBox']=function(n){j['Main']['Data']['ModelFileManager']['SetMeshViewDistance'](n,-0x1);},this['GetInnerObjects']=function(n,o){let p=j['Main']['Tree']['GetInnerObjectsByBBox'](n,o),q=[];for(let r=0x0;r<p['length'];r++){q['push'](l(p[r]));}return q;},this['SetObjectDisableViewDistanceBBox']=function(n,o,p){j['SetObjectDisableViewDistanceBBoxByArray'](n,[o],p);},this['SetObjectDisableViewDistanceBBoxByArray']=function(n,o,p){j['Main']['Data']['ModelFileManager']['SetDisableViewDistanceBBox'](n,o,p,![]),j['Main']['ViewRefresh']();},this['OnObject3DSelected']=function(n){j['Main']['EventHandler']['addEventListener'](i['Enum']['EVENT_TYPES']['Model']['Select'],n);},this['OnBoxSelected']=function(n){j['Main']['EventHandler']['addEventListener'](i['Enum']['EVENT_TYPES']['Model']['BoxSelect'],n);},this['OnObject3DSelectedPostion']=function(n){j['Main']['EventHandler']['addEventListener'](i['Enum']['EVENT_TYPES']['Model']['Select_Position'],n);};}}export default Object3D;