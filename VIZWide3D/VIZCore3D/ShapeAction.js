class ShapeAction{constructor(a,b){let c=this,d=0x0,e=0x0,f=0x0;this['FileActionMap']=new Map(),this['DownloadFileActionMap']=new Map(),g();function g(){let n=0x0;n+=0x1,n+=0x1,n+=0x10*0x4,n+=0x10*0x4,n+=0x4,n+=0x4*0x4,n+=0x1,n+=0x4,n+=0x4,e=0x4,f=0x10+0x10+0x1+0x4+0x1+0x1,d=n;}this['Clear']=function(){c['FileActionMap']['clear'](),c['DownloadFileActionMap']['clear']();},this['CreateAddFileAction_v1']=function(n,o){let p=c['FileActionMap']['get'](n);p===undefined&&(p=a['Data']['ShapeActionBufferItem'](),c['FileActionMap']['set'](n,p));let q=a['Data']['ActionItem'](),r=h(q),s=o['length'],t=new ArrayBuffer(d*s);p['buffer']=t;let u=new Uint8Array(t);for(let v=0x0;v<s;v++){let w=r;if(c['DownloadFileActionMap']['has'](n)){let z=c['DownloadFileActionMap']['get'](n);if(z!==undefined){let A=z['get'](o[v]);A!==undefined&&(z['delete'](o[v]),w=h(A));}}let x=v*d,y=new Uint8Array(w);u['set'](y,x),p['OffsetID']['set'](o[v],x);}c['DownloadFileActionMap']['has'](n)&&c['DownloadFileActionMap']['delete'](n);},this['CreateAddFileAction']=function(n,o){let p=c['FileActionMap']['get'](n);p===undefined&&(p=a['Data']['ShapeActionBufferItem'](),c['FileActionMap']['set'](n,p));let q=o['length'];for(let r=0x0;r<q;r++){let s=undefined;if(c['DownloadFileActionMap']['has'](n)){let t=c['DownloadFileActionMap']['get'](n);if(t!==undefined){let u=t['get'](o[r]);u!==undefined&&(t['delete'](o[r]),s=u);}}s===undefined&&(s=a['Data']['ActionItem']()),p['listAction'][r]=s,p['mapAction']['set'](o[r],s);}c['DownloadFileActionMap']['has'](n)&&c['DownloadFileActionMap']['delete'](n);},this['DeleteFileAction']=function(n){if(c['DownloadFileActionMap']['has'](n)){c['DownloadFileActionMap']['delete'](n);return;}if(!c['FileActionMap']['has'](n))return;c['FileActionMap']['delete'](n);},this['GetAction']=function(n,o){let p=c['FileActionMap']['get'](n);if(p!==undefined){let r=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(r===undefined)return undefined;return p['listAction'][r];return undefined;}let q=c['GetLoadingShapeAction'](n,o);if(q!==undefined)return q;return q=a['Data']['ActionItem'](),c['SetAction'](n,o,q),q;},this['GetSelection']=function(n,o){let p=c['FileActionMap']['get'](n);if(p!==undefined){let r=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(r===undefined)return![];return p['listAction'][r]['selection'];}let q=c['GetLoadingShapeAction'](n,o);if(q!==undefined)return q['selection'];return![];},this['GetVisible']=function(n,o){let p=c['FileActionMap']['get'](n);if(p!==undefined){let r=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(r===undefined)return![];return p['listAction'][r]['visible'];}let q=c['GetLoadingShapeAction'](n,o);if(q!==undefined)return q['visible'];return![];},this['GetLoadingShapeAction']=function(n,o){if(!c['DownloadFileActionMap']['has'](n))return undefined;let p=c['DownloadFileActionMap']['get'](n);return p['get'](o);},this['SetAction']=function(n,o,p){let q=c['FileActionMap']['get'](n);if(q){let s=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(s===undefined)return![];if(s>=0x0){let t=q['listAction'][s];if(c['EqualAction'](t,p))return![];return q['listAction'][s]=p,!![];}}let r=c['DownloadFileActionMap']['get'](n);return r===undefined&&(r=new Map(),c['DownloadFileActionMap']['set'](n,r)),r['set'](o,p),!![];},this['SetSelection']=function(n,o,p){let q=c['FileActionMap']['get'](n);if(q){let s=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(s===undefined)return![];if(s>=0x0){let t=q['listAction'][s];if(t['selection']===p)return![];return t['selection']=p,!![];}return![];if(q['OffsetID']['get'](o)!==undefined){let u=q['OffsetID']['get'](o);if(p){let w=c['GetAction'](n,o);w['selection']=p;let x=c['GetAction'](n,o),y=j(q['buffer'],u);;}let v=l(q['buffer'],u,p);return v;}}let r=c['GetLoadingShapeAction'](n,o);if(r!==undefined){if(r['selection']===p)return![];return r['selection']=p,!![];}return![];},this['SetVisible']=function(n,o,p){let q=c['FileActionMap']['get'](n);if(q){let s=a['Data']['ModelFileManager']['GetNodeOriginIndex'](n,o);if(s===undefined)return![];if(s>=0x0){let t=q['listAction'][s];if(t['visible']===p)return![];return t['visible']=p,!![];}return![];}let r=c['GetLoadingShapeAction'](n,o);if(r!==undefined){if(r['visible']===p)return![];return r['visible']=p,!![];}return![];},this['EqualAction']=function(n,o){if(n['visible']!==o['visible'])return![];if(n['selection']!==o['selection'])return![];if(n['material']!==o['material'])return![];if(n['shaderType']!==o['shaderType'])return![];if(n['multiViewIdx']!==o['multiViewIdx'])return![];if(n['disableViewDistaceBBox']!==o['disableViewDistaceBBox'])return![];if(n['drawViewDistanceBBox']!==o['drawViewDistanceBBox'])return![];if(n['useEffectMode']!==o['useEffectMode'])return![];if(n['useSelection']!==o['useSelection'])return![];if(n['useCustomEdge']!==o['useCustomEdge'])return![];if(n['groupIdx']!==o['groupIdx'])return![];if(n['color']===undefined&&o['color']===undefined){}else{if(n['color']!==undefined&&o['color']!==undefined){if(n['color']['equals'](o['color'])===![])return![];}else return![];}if(a['Shader']['GetUseUpdateMatrixManager']()===!![]){if(n['transformIdx']!==o['transformIdx']){let p=a['Shader']['GetUpdateMatrixGroup'](n['transformIdx']),q=a['Shader']['GetUpdateMatrixGroup'](o['transformIdx']);if(p!==q)return![];}}else{if(!n['transform']['equals'](o['transform']))return![];}return!![];},this['EqualActionUint8Array']=function(n,o){for(let p=0x0;p<o['length'];p++){if(n[p]!==o[p])return![];}return!![];},this['EqualNodeActionBuffer']=function(n,o,p,q){let r=c['FileActionMap']['get'](n),s=c['FileActionMap']['get'](p);if(r===undefined||s===undefined)return![];if(a['Shader']['GetUseUpdateMatrixManager']()===!![]){let t=c['GetAction'](n,o),u=c['GetAction'](p,q);return c['EqualAction'](t,u);}else{let v=c['FileActionMap']['get'](n),w=c['FileActionMap']['get'](p);if(v===undefined||w===undefined)return![];let x=saitem['OffsetID']['get'](o),y=w['OffsetID']['get'](q),z=new Uint8Array(v['buffer'],x,d),A=new Uint8Array(w['buffer'],y,d);for(let B=0x0;B<A['length'];B++){if(z[B]!==A[B])return![];}return!![];}},this['CopyAction']=function(n,o){n['visible']=o['visible'],n['selection']=o['selection'],n['transform']['copy'](o['transform']),n['instance']['copy'](o['instance']),n['material']=o['material'],n['shaderType']=o['shaderType'],n['customColor']=o['customColor'];if(n['color']!==undefined&&o['color']!==undefined)n['color']['copy'](o['color']);else n['color']===undefined&&o['color']!==undefined?n['color']=new b['Color']()['copy'](o['color']):n['color']=undefined;n['transformIdx']=o['transformIdx'],n['multiViewIdx']=o['multiViewIdx'],n['useEffectMode']=o['useEffectMode'],n['useSelection']=o['useSelection'],n['useCustomEdge']=o['useCustomEdge'],n['groupIdx']=o['groupIdx'],n['disableViewDistaceBBox']=o['disableViewDistaceBBox'],n['drawViewDistanceBBox']=o['drawViewDistanceBBox'];},this['CopyActionBuffer']=function(n,o,p,q){let r=c['FileActionMap']['get'](n),s=c['FileActionMap']['get'](p);if(r===undefined||s===undefined)return![];let t=saitem['OffsetID']['get'](o),u=s['OffsetID']['get'](q),v=new Uint8Array(r['buffer'],t,d),w=new Uint8Array(s['buffer'],u,d);for(let x=0x0;x<w['length'];x++){v[x]=w[x];}};function h(n){let o=0x0,p=new ArrayBuffer(d),q=new Uint8Array(p,o,e);q['set']([n['visible'],n['selection'],n['customColor']],o),o+=0x3;let r=0x0,s=new Float32Array(p,o,f);return s['set'](n['transform']['elements'],r),r+=0x10,s['set'](n['instance']['elements'],r),r+=0x10,n['customColor']?(s['set']([n['color']['r'],n['color']['g'],n['color']['b'],n['color']['a']],r),r+=0x4):(s['set']([0x0,0x0,0x0,0x0],r),r+=0x4),s['set']([n['material'],n['transformIdx'],n['multiViewIdx']],r),r+=0x3,o+=r*0x4,p;};function i(n,o){let p=a['Data']['ActionItem'](),q=new Uint8Array(n,o,e);o+=0x4;let r=new Float32Array(n,o,f);p['visible']=q[0x0]===0x1?!![]:![],p['selection']=q[0x1]===0x1?!![]:![],p['customColor']=q[0x2]===0x1?!![]:![],p['transform']['set2'](r[0x0],r[0x1],r[0x2],r[0x3],r[0x4],r[0x5],r[0x6],r[0x7],r[0x8],r[0x9],r[0xa],r[0xb],r[0xc],r[0xd],r[0xe],r[0xf]),p['instance']['set2'](r[0x10],r[0x11],r[0x12],r[0x13],r[0x14],r[0x15],r[0x16],r[0x17],r[0x18],r[0x19],r[0x1a],r[0x1b],r[0x1c],r[0x1d],r[0x1e],r[0x1f]);if(p['customColor'])p['color']=new b['Color']()['set'](r[0x20],r[0x21],r[0x22],r[0x23]);return p['material']=r[0x24],p['transformIdx']=r[0x25],p['multiViewIdx']=r[0x26],p;};function j(n,o){let p=new Uint8Array(n,o+0x1,0x1);return p[0x0]===0x1?!![]:![];};function k(n,o){let p=new Uint8Array(n,o+0x0,0x1);return p[0x0]===0x1?!![]:![];};function l(n,o,p){let q=new Uint8Array(n,o+0x1,0x1),r=p===!![]?0x1:0x0;if(r===q[0x0])return![];return q[0x0]=r,!![];};function m(n,o,p){let q=new Uint8Array(n,o+0x0,0x1),r=p===!![]?0x1:0x0;if(r===q[0x0])return![];return q[0x0]=r,!![];};}}export default ShapeAction;