let VIZWLoader=function(a,b){let c=this;const d={'CTUnknown':0x0,'CTGeneralBinaryBlock':0x1,'CTStructure':0x2,'CTMeshBlock':0x3,'CTClashTestData':0x4,'CTImageData':0x5,'CTImageIdxTable':0x6,'CTMeshBlockTable':0x7,'CTEntityBinaryBlock':0x8,'CTBodyMeshData':0x9,'CTPropDic':0xa,'CTUserDefGroups':0xb,'CTFileMetaData':0xc,'CTAuthority':0xd,'CTNodePropTable':0xe,'CTNodePropTableIndices':0xf,'CTInitialInfo':0x10,'CTUserCustom':0x11,'CTEdgeTable':0x12,'CTThumbnail':0x13,'CTMisc':0x14,'CTStructureHeader':0x15,'CTMeshBlockSub':0x16,'CTStructureNameData':0x18,'CTSplitStructureMeshBlockFile':0x22,'CTSplitAreaMeshBlockList':0x23,'CTTreeInfo':0x26};function e(f){let g='',h={'dom':/(http(s)?:\/\/|www.)([a-z0-9\w]+\.*)+[a-z0-9]{2,4}\//gi,'par':/(http(s)?:\/\/|www.)([a-z0-9\w]+\.*)+[a-z0-9]{2,4}([\/a-z0-9-%#?&=\w])+(\.[a-z0-9]{2,4}(\?[\/a-z0-9-%#?&=\w]+)*)*/gi};f['replace'](h['dom'],function(l){g=l;});let i=f['replace'](h['dom'],''),j=encodeURIComponent(i),k=g+j;return k;}this['parsetype']=0x1,this['load']=function(f,g,h){c['parse'](f,g,h);},this['parse']=function(f,g,h,i,j){let k=g,l=0x0,m=f;if(j!==undefined){v(j);return;}async function n(B,C){v(B);}function o(B,C,D){if(B['z']+C<=D)B['z']+=C;else B['y']+C<=D?(B['y']+=C,B['z']=0x0):(B['x']+=C,B['y']=0x0,B['z']=0x0);return this;}const p=window['BigInt'],q=p(0x20),r=p(0x0);function s(B,C,D){const E=p(B['getUint32'](C|0x0,!!D)>>>0x0),F=p(B['getUint32']((C|0x0)+0x4|0x0,!!D)>>>0x0);return D?F<<q|E:E<<q|F;}function t(B,C,D){if(0x1){const E=B['getUint32'](C,D),F=B['getUint32'](C+0x4,D),G=D?E+0x2**0x20*F:0x2**0x20*E+F;if(!Number['isSafeInteger'](G))console['warn'](G,'exceeds\x20MAX_SAFE_INTEGER.\x20Precision\x20may\x20be\x20lost');return G;}return s(a,C,D);}function u(B){console['log']('Data\x20Loading\x20Start');let C=new DataView(B),D=0x0,E={'typeStr':null,'version':null,'sizeTocItem':null,'nToc':null,'tocPos':null},F=new Uint8Array(B,D,0x10);E['typeStr']=String['fromCharCode']['apply'](null,F),D+=0x10,E['version']=C['getInt32'](D,!![]),D+=0x4,E['sizeTocItem']=C['getInt32'](D,!![]),D+=0x4,E['nToc']=C['getInt32'](D,!![]),D+=0x4,E['tocPos']=t(C,D,!![]),D+=0x8;let G=[],H=0x0,I=0x0,J=E['tocPos'];H=C['getInt32'](J,!![]),J+=0x4,I=t(C,J,!![]),J+=0x8;for(let a0=0x0;a0<H;a0++){K(a0);}function K(a1){let a2=E['tocPos']+0xc+a1*E['sizeTocItem'],a3=C['getInt32'](a2,!![]);a2+=0x8;let a4=t(C,a2,!![]);a2+=0x8;let a5=C['getUint32'](a2,!![]);a2+=0x4;let a6=C['getUint32'](a2,!![]);a2+=0x4;let a7=0x0;a['Loader']['parsetype']===0x1&&(a7=C['getUint32'](a2,!![]),a2+=0x4);let a8={'itemType':a3,'position':a4,'datasize':a5,'uncompsize':a6,'parsetype':a7};G['push'](a8);}function L(a1){let a2=-0x1;for(let a3=G['length']-0x1;a3>=0x0;a3--){if(G[a3]['itemType']===a1){a2=a3;break;}}return a2;}function M(a1){let a2=-0x1;for(let a3=0x0;a3<G['length'];a3++){if(G[a3]['itemType']===a1){a2=a3;break;}}return a2;}function N(a1,a2){try{let a3=a1['position'],a4;return a2===undefined?(a4=new DataView(B,a3,a1['datasize']),a4):(a=new DataView(a2,a3,a1['datasize']),a);}catch(a5){return undefined;}}let O=L(d['CTMeshBlock']),P=G[O];function Q(a1,a2){let a3=0x0,a4;a4=a1['getInt32'](a3,!![]),a3+=0x4;for(let a5=0x0;a5<a4;a5++){let a6=new b['Color']();a6['r']=a1['getUint8'](a3,!![]),a6['g']=a1['getUint8'](a3+0x1,!![]),a6['b']=a1['getUint8'](a3+0x2,!![]),a6['a']=a1['getUint8'](a3+0x3,!![]),a3+=0x4;let a7=a1['getUint32'](a3,!![]);a3+=0x4;let a8=a1['getUint32'](a3,!![]);a3+=0x4;let a9=a1['getUint32'](a3,!![]);a3+=0x4;if(a1['Loader']['parsetype']===0x1){let aj=a1['getUint32'](a3,!![]);a3+=0x4;}let aa=a7/0xf,ab=new Float32Array(B,a3+a1['byteOffset'],a7);a3+=a7*0x4;let ac=new Float32Array(B,a3+a1['byteOffset'],a8);a3+=a8*0x4;let ad=new Uint32Array(B,a3+a1['byteOffset'],a9);a3+=a9*0x4;let ae=a1['Data']['Object3D']();ae['id_file']=m['Key'],ae['attribs']['a_index']['array']=ad,ae['numElements']=ae['attribs']['a_index']['array']['length'],ae['attribs']['a_position']['array']=ab,ae['attribs']['a_normal']['array']=ac;let af=a1['getUint32'](a3,!![]);a3+=0x4;let ag=[],ah=[],ai=0x0;for(let ak=0x0;ak<af;ak++){let al=a1['getUint32'](a3,!![]);a3+=0x4;let am=a1['getUint32'](a3,!![]);a3+=0x4;let an=am,ao=a1['getUint32'](a3,!![]);a3+=0x4;let ap=a1['getUint32'](a3,!![]);a3+=0x4;let aq=a1['getUint16'](a3,!![]);a3+=0x2;let ar=a1['getUint16'](a3,!![]);a3+=0x2;let as=new Float32Array(C['buffer'],a3+a1['byteOffset'],0x6);a3+=0x18;let at={'partId':al+a1['Data']['GetStartID'](m['Key']),'bodyId':am+a1['Data']['GetStartID'](m['Key']),'origin_id':an,'color':a6,'material':undefined,'m_vnIdx':ao*0x3,'m_triIdx':ap*0x3,'m_nVtx':aq*0x3,'m_nTris':ar*0x3,'BBox':new b['BBox'](as),'colorIdx':null,'object':null};a1['Data']['IDColor']['new'](),at['colorIdx']=a1['Data']['IDColor']['r']+(a1['Data']['IDColor']['g']<<0x8)+(a1['Data']['IDColor']['b']<<0x10)+a1['Data']['IDColor']['a']*0x1000000;let au=at['m_nVtx']/0x3*0x4;for(let aw=0x0;aw<au;aw=aw+0x4){ah[ai+aw+0x0]=a1['Data']['IDColor']['r'],ah[ai+aw+0x1]=a1['Data']['IDColor']['g'],ah[ai+aw+0x2]=a1['Data']['IDColor']['b'],ah[ai+aw+0x3]=a1['Data']['IDColor']['a'];}ai+=au,at['object']=ae,ag['push'](at),a1['Data']['AddBody'](at);let av=a1['Data']['ShapeAction']['GetAction'](m['Key'],an);av===undefined&&(av=a1['Data']['ActionItem']());{a1['Data']['ShapeAction']['SetAction'](m['Key'],an,av);}}ae['attribs']['a_color']['array']=new Uint8Array(ah,0x0,ai),a1['Data']['Objects']['push'](ae),ae['tag']=ag;}}let R=L(d['CTStructure']),S=G[R],T=N(S);function U(a1,a2){let a3=0x0,a4=a1['getUint32'](a3,!![]);a3+=0x4;let a5=a1['getUint32'](a3,!![]);a3+=0x4;let a6=a1['getUint32'](a3,!![]);a3+=0x4;let a7=[];for(let ad=0x0;ad<a6;ad++){let ae={'index':-0x1,'itemType':0x0,'entFlags':0x0,'iNameIndex':-0x1,'attFlags':0x0,'transfrom':[],'bBox':[],'BBox':null,'cCount':-0x1,'pIndex':-0x1,'orgNodeID':-0x1,'pNameBuff':null,'tocId':0x0,'btype':0x0,'name':null},af=a1['getUint32'](a3,!![]);ae['index']=af===-0x1?af:af+a1['Data']['GetStartID'](m['Key']),a3+=0x4,ae['itemType']=a1['getInt32'](a3,!![]),a3+=0x4,ae['entFlags']=a1['getUint16'](a3,!![]),a3+=0x4,ae['iNameIndex']=a1['getInt32'](a3,!![]),a3+=0x4,ae['attFlags']=a1['getUint16'](a3,!![]),a3+=0x4,ae['transfrom']=[];for(let ah=0x0;ah<0x10;ah++){ae['transfrom'][ah]=a1['getFloat32'](a3,!![]),a3+=0x4;}ae['bBox']=[];for(let ai=0x0;ai<0x6;ai++){ae['bBox'][ai]=a1['getFloat32'](a3,!![]),a3+=0x4;}ae['BBox']=new b['BBox'](ae['bBox']),ae['cCount']=a1['getInt32'](a3,!![]),a3+=0x4;let ag=a1['getInt32'](a3,!![]);ae['pIndex']=ag===-0x1?ag:ag+a1['Data']['GetStartID'](m['Key']),a3+=0x4,ae['orgNodeID']=a1['getInt32'](a3,!![]),a3+=0x4;if(E['version']<0x12e)a3+=0x8;ae['tocId']=a1['getInt32'](a3,!![]),a3+=0x4,ae['btype']=a1['getInt32'](a3,!![]),a3+=0x4;if(ae['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&ae['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&ae['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody']){a5--;continue;}a7['push'](ae);}a1['Data']['AddNodes'](a7);let a8=a1['getInt32'](a3,!![]);a3+=0x4;let a9=function(aj){try{return decodeURIComponent(escape(aj));}catch(ak){return aj;}},aa=[],ab=0x0;for(let aj=0x0;aj<a5;aj++){if(a7[aj]['iNameIndex']<=0x0)continue;let ak={'nStringNum':0x0,'pos':0x0,'name':null};ak['pos']=ab,ak['nStringNum']=a7[aj]['iNameIndex'];let al=new Uint8Array(ak['nStringNum']);for(let an=0x0;an<ak['nStringNum'];an++){al[an]=a1['getUint8'](ab+a3+an,!![]);}let am=String['fromCharCode']['apply'](null,al);am=a9(am),a7[aj]['name']=am['replace'](/\0/gi,''),ak['name']=am['replace'](/\0/gi,''),ab+=a7[aj]['iNameIndex'],aa['push'](ak);}a3+=a8;let ac=function(){let ao=a1['getUint32'](a3,!![]);a3+=0x4;for(let ap=0x0;ap<a6;ap++){let aq={'nodeTreeOrderID':-0x1,'hasColor':![],'color':[],'cacheidx':-0x1,'hasLayerNumber':![],'layerNum':-0x1,'attrCount':-0x1,'attrType':[],'volume':0x0,'area':0x0,'centroid':[],'desbyteLength':-0x1,'fdensity':-0x1,'edgeStartidx':-0x1,'edgeIdxNum':-0x1};aq['nodeTreeOrderID']=a1['getInt32'](a3,!![]),a3+=0x4,aq['hasColor']=a1['getUint8'](a3,!![]),a3+=0x4;for(let ar=0x0;ar<0x4;ar++){aq['color'][ar]=a1['getFloat32'](a3,!![]),a3+=0x4;}aq['cacheidx']=a1['getInt32'](a3,!![]),a3+=0x4,aq['hasLayerNumber']=a1['getUint8'](a3,!![]),a3+=0x4,aq['layerNum']=a1['getInt32'](a3,!![]),a3+=0x4,aq['attrCount']=a1['getInt32'](a3,!![]),a3+=0x4;for(let as=0x0;as<0x2;as++){aq['attrType'][as]=a1['getInt32'](a3,!![]),a3+=0x4;}aq['volume']=t(a1,a3,!![]),a3+=0x8,aq['area']=t(a1,a3,!![]),a3+=0x8;for(let at=0x0;at<0x3;at++){aq['centroid'][at]=t(a1,a3,!![]),a3+=0x8;}aq['desbyteLength']=a1['getInt32'](a3,!![]),a3+=0x4,aq['fdensity']=a1['getInt32'](a3,!![]),a3+=0x4,aq['edgeStartidx']=a1['getInt32'](a3,!![]),a3+=0x4,aq['edgeIdxNum']=a1['getInt32'](a3,!![]),a3+=0x4;}};}function V(a1,a2){let a3=0x8,a4=a1['getUint32'](a3,!![]);a3+=0x4;let a5=0x0;for(let a6=0x0;a6<a4;a6++){let a7=a1['getUint32'](a3,!![]);if(a5<a7)a5=a7;a3+=0x20;if(E['version']<0x12e)a3+=0x8;}return a5;}let W=L(d['CTNodePropTableIndices']),X=G[W],Y=N(X);function Z(a1,a2){let a3=0x0,a4=a1['getUint32'](a3,!![]);a3+=0x4;let a5=[];for(let a7=0x0;a7<a4;a7++){let a8=a1['getUint32'](a3,!![]);a3+=0x4;let a9={'tableTocIdx':a8,'nLoadedNodes':0x0};a5['push'](a9);}for(let aa=0x0;aa<a5['length'];aa++){let ab=a5[aa],ac=G[ab['tableTocIdx']];if(ac===undefined){setTimeout(function(){k(null,f);},0x1);return;}else{let ad=N(ac,C['buffer']);a6(ad,ac,ab);}}function a6(ae,af,ag){let ah=0x0,ai=ae['getUint32'](ah,!![]);ah+=0x4;if(ag['nLoadedNodes']===ai)return![];let aj=[];for(let ak=0x0;ak<ai;ak++){let al={'nodeId':-0x1,'nNodeProps':0x0,'items':[]};aj['push'](al),al['nodeId']=ae['getUint32'](ah,!![]),al['nodeId']+=l,ah+=0x4,al['nNodeProps']=ae['getInt16'](ah,!![]),ah+=0x2;let am=function(ao){return unescape(encodeURIComponent(ao));},an=function(ao){return decodeURIComponent(escape(ao));};for(let ao=0x0;ao<al['nNodeProps'];ao++){let ap={'key':null,'value':null},aq=ae['getUint32'](ah,!![]);ah+=0x4;let ar=new Uint8Array(aq);for(let at=0x0;at<aq;at++){ar[at]=ae['getUint8'](ah+at,!![]);}ap['key']=String['fromCharCode']['apply'](null,ar),ap['key']=an(ap['key']),ah+=aq,aq=ae['getUint16'](ah,!![]),ah+=0x2,aq=ae['getUint32'](ah,!![]),ah+=0x4;let as=new Uint8Array(aq);for(let au=0x0;au<aq;au++){as[au]=ae['getUint8'](ah+au,!![]);}ap['value']=String['fromCharCode']['apply'](null,as),ap['value']=an(ap['value']),ah+=aq,ah+=0x2,al['items']['push'](ap);}}ae['Data']['AddUserProperty'](aj),setTimeout(function(){k(null,f);},0x1);}}if(P===undefined){if(!a['useFramebuffer'])h(0x1,0x1);B=null,S===undefined?setTimeout(function(){k(null,f);},0x1):setTimeout(function(){U(T,S),X===undefined?setTimeout(function(){k(null,f);},0x1):setTimeout(function(){Z(Y,X);},0x1);},0x1);}else{let a1=V(T,S);a['Data']['SetStartID'](m['Key'],a1);let a2=N(P);D=0x0;let a3=a2['getInt32'](D,!![]);D+=0x4;let a4=0x0,a5=function(){for(let a6=a4;a6<a3;a6++){let a7=a4/a3;if(a7===Infinity)a7=0x0;if(!a['useFramebuffer'])h(0x1,a7);console['log']('ReadMeshBlock\x20:\x20'+a6);let a8=0x0;a8=a['getInt32'](D,!![]),D+=0x4;let a9=G[a8],aa=N(a9);Q(aa,a8),a4++;if(a4!==a3){setTimeout(function(){if(!a['useFramebuffer'])h(0x1,a7);a5();},0x1);break;}else setTimeout(function(){if(!a['useFramebuffer'])h(0x1,0x1);B=null,S===undefined?setTimeout(function(){k(null,f);},0x1):setTimeout(function(){U(T,S),X===undefined?setTimeout(function(){k(null,f);},0x1):setTimeout(function(){Z(Y,X);},0x1);},0x1);},0x1);}};setTimeout(function(){if(!a['useFramebuffer'])h(0x1,0x0);a5();},0x1);}}function v(B,C){let D=![],E=![],F=![],G=0x0,H=new DataView(B),I=0x0,J={'typeStr':null,'version':null,'sizeTocItem':null,'nToc':null,'tocPos':null},K=new Uint8Array(B,I,0x10);J['typeStr']=String['fromCharCode']['apply'](null,K),I+=0x10,J['version']=H['getInt32'](I,!![]),I+=0x4,J['sizeTocItem']=H['getInt32'](I,!![]),I+=0x4,J['nToc']=H['getInt32'](I,!![]),I+=0x4,J['tocPos']=t(H,I,!![]),I+=0x8;let L=[],M=0x0,N=0x0,O=J['tocPos'];M=H['getInt32'](O,!![]),O+=0x4,N=t(H,O,!![]),O+=0x8;for(let ad=0x0;ad<M;ad++){P(ad);}function P(ae){let af=J['tocPos']+0xc+ae*J['sizeTocItem'],ag=H['getInt32'](af,!![]);af+=0x8;let ah=t(H,af,!![]);af+=0x8;let ai=H['getUint32'](af,!![]);af+=0x4;let aj=H['getUint32'](af,!![]);af+=0x4;let ak=0x0;a['Loader']['parsetype']===0x1&&(ak=H['getUint32'](af,!![]),af+=0x4);let al={'itemType':ag,'position':ah,'datasize':ai,'uncompsize':aj,'parsetype':ak};L['push'](al);}function Q(ae){let af=-0x1;for(let ag=L['length']-0x1;ag>=0x0;ag--){if(L[ag]['itemType']===ae){af=ag;break;}}return af;}function R(ae){let af=-0x1;for(let ag=0x0;ag<L['length'];ag++){if(L[ag]['itemType']===ae){af=ag;break;}}return af;}function S(ae,af){try{if(ae===undefined)return undefined;let ag=ae['position'],ah;return af===undefined?(ah=new DataView(B,ag,ae['datasize']),ah):(ah=new DataView(af,ag,ae['datasize']),ah);}catch(ai){return undefined;}}function T(ae,af){let ag=0x0,ah;ah=ae['getInt32'](ag,!![]),ag+=0x4;let ai=![];(J['version']>=0x131||m['headerVersion']!==undefined&&m['headerVersion']>=0x10011)&&(ai=!![]);for(let aj=0x0;aj<ah;aj++){let ak=![];if(m['headerVersion']!==undefined&&m['headerVersion']>=0x10011){let aD=ae['getInt32'](ag,!![]);if(aD===0x1)ak=!![];ag+=0x4;}let al=-0x1,am=new b['Color']();if(ak){am['set'](0xff,0xff,0xff,0xff);let aE=ae['getUint8'](ag,!![]),aF=ae['getUint8'](ag+0x1,!![]),aG=ae['getUint8'](ag+0x2,!![]),aH=ae['getUint8'](ag+0x3,!![]);al=aH+(aG<<0x8)+(aF<<0x10)+aE*0x1000000;}else am['r']=ae['getUint8'](ag,!![]),am['g']=ae['getUint8'](ag+0x1,!![]),am['b']=ae['getUint8'](ag+0x2,!![]),am['a']=ae['getUint8'](ag+0x3,!![]);ag+=0x4;let an=ae['getUint32'](ag,!![]);ag+=0x4;let ao=ae['getUint32'](ag,!![]);ag+=0x4;let ap=ae['getUint32'](ag,!![]);ag+=0x4;let aq=0x0;ai&&(aq=ae['getUint32'](ag,!![]),ag+=0x4);let ar,as=0.5,at=0x0;if(a['DemoType']===0x4&&ar===undefined){ar=a['Data']['MaterialGLItem'](b['Enum']['SHADER_TYPES']['PBR']);if(aq>0x0){let aI=-0x1;if(am['r']===0xff)aI=0x64,as=0.8,at=0x0,ar['tiling']['x']=0xa,ar['tiling']['y']=-0xa,ar['offset']['x']=-0x2,ar['offset']['y']=0x2,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0xff;else{if(am['r']===0xfe)aI=0x65,as=0.3,at=0.05,ar['tiling']['x']=0x3,ar['tiling']['y']=-0x3,ar['offset']['x']=-0x4,ar['offset']['y']=-0x4,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0xff;else{if(am['r']===0xfd)aI=0x66,as=0.3,at=0.05,ar['tiling']['x']=0x1e,ar['tiling']['y']=-0x1e,ar['offset']['x']=0x0,ar['offset']['y']=0x0,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0xff;else{if(am['r']===0xfc)aI=0x67,as=0.3,at=0.4,ar['tiling']['x']=0x14,ar['tiling']['y']=-0x14,ar['offset']['x']=-4.5,ar['offset']['y']=-4.5,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0xff;else{if(am['r']===0x96)aI=0x68,as=0.3,at=0.05,ar['tiling']['x']=0xa,ar['tiling']['y']=-0xa,ar['offset']['x']=0x0,ar['offset']['y']=0x0,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0xff;else{if(am['r']===0xcc)aI=0x69,as=0x0,at=0x0,ar['tiling']['x']=0x1,ar['tiling']['y']=-0x1,ar['offset']['x']=0x0,ar['offset']['y']=0x0,am['r']=0xff,am['g']=0xff,am['b']=0xff,am['a']=0x64;else{}}}}}}ar['color']['copy'](am),ar['tag']['u_Roughness']['value']=as,ar['tag']['u_Metallic']['value']=at;let aJ=a['Util']['GetTESTTextureData64Src'](aI),aK=a['Util']['GetTESTTextureData64Src'](aI+0x64);if(aJ['localeCompare']('')!==0x0){let aL=new Image();aL['src']=aJ,aL['onload']=function(){ar['diffuseSrc']=aL,ar['diffuseWidth']=aL['width'],ar['diffuseHeight']=aL['height'],setTimeout(function(){a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0xa);};}if(aK['localeCompare']('')!==0x0){let aM=new Image();aM['src']=aK,aM['onload']=function(){ar['normalSrc']=aM,ar['normalWidth']=aM['width'],ar['normalHeight']=aM['height'],setTimeout(function(){a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0xa);};}}if(materialId===0x0)a['Shader']['AddMaterial'](ar);else ar=a['Shader']['GetMaterial'](materialId);}else{if(a['DemoType']===0x3){}else{if(a['UV_DEBUG']){}}}if(a['Loader']['parsetype']===0x1){let aN=ae['getUint32'](ag,!![]);ag+=0x4;}let au=new Float32Array(B,ag+ae['byteOffset'],an);ag+=an*0x4;let av=new Float32Array(B,ag+ae['byteOffset'],ao);ag+=ao*0x4;let aw=new Uint32Array(B,ag+ae['byteOffset'],ap);ag+=ap*0x4;let ax;aq>0x0&&(ax=new Float32Array(B,ag+ae['byteOffset'],aq),ag+=aq*0x4);let ay=a['Data']['Object3D']();ay['index']=G,ay['id_file']=m['Key'],ay['link']=m['Url'],ay['attribs']['a_index']['array']=aw,ay['numElements']=ay['attribs']['a_index']['array']['length'],ay['attribs']['a_position']['array']=au,ay['attribs']['a_normal']['array']=av;if(a['DemoType']===0x2){let aO=new Uint16Array(av['length']);for(let aP=0x0;aP<av['length'];aP++){aO[aP]=0x0;}ay['attribs']['a_matrixIndex']['array']=aO;}aq>0x0&&a['UV_DEBUG']&&(ay['attribs']['a_uv']['array']=ax);let az=ae['getUint32'](ag,!![]);ag+=0x4;let aA=[],aB=[],aC=0x0;for(let aQ=0x0;aQ<az;aQ++){let aR=ae['getUint32'](ag,!![]);ag+=0x4;let aS=ae['getUint32'](ag,!![]);ag+=0x4;let aT=aS,aU=ae['getUint32'](ag,!![]);ag+=0x4;let aV=ae['getUint32'](ag,!![]);ag+=0x4;let aW=0x0;ai&&(aW=ae['getUint32'](ag,!![]),ag+=0x4);let aX=ae['getUint16'](ag,!![]);ag+=0x2;let aY=ae['getUint16'](ag,!![]);ag+=0x2;let aZ=0x0;ai&&(aZ=ae['getUint32'](ag,!![]),ag+=0x4);let b0=new Float32Array(ae['buffer'],ag+ae['byteOffset'],0x6);ag+=0x18;let b1,b2;if(a['UV_DEBUG']){let b4=new b['BBox'](b0);b1={'partId':aR+a['Data']['GetStartID'](m['Key']),'bodyId':aS+a['Data']['GetStartID'](m['Key']),'origin_id':aT,'color':am,'material':-0x1,'m_vnIdx':aU*0x3,'m_triIdx':aV*0x3,'m_uvIdx':aW*0x2,'m_nVtx':aX*0x3,'m_nTris':aY*0x3,'m_nUV':aZ*0x2,'BBox':b4,'colorIdx':null,'object':null},b2=a['Data']['ShapeAction']['GetAction'](m['Key'],aT),b2===undefined&&(b2=a['Data']['ActionItem']()),b2['material']=al;}else{if(a['DemoType']===0x3){let b5=new b['BBox'](b0);if(m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0){}b1={'partId':aR+a['Data']['GetStartID'](m['Key']),'bodyId':aS+a['Data']['GetStartID'](m['Key']),'origin_id':aT,'color':am,'material':-0x1,'m_vnIdx':aU*0x3,'m_triIdx':aV*0x3,'m_nVtx':aX*0x3,'m_nTris':aY*0x3,'BBox':b5,'colorIdx':null,'object':null},b2=a['Data']['ShapeAction']['GetAction'](m['Key'],aT),b2===undefined&&(b2=a['Data']['ActionItem']());}else b1={'partId':aR+a['Data']['GetStartID'](m['Key']),'bodyId':aS+a['Data']['GetStartID'](m['Key']),'origin_id':aT,'color':am,'m_vnIdx':aU*0x3,'m_triIdx':aV*0x3,'m_nVtx':aX*0x3,'m_nTris':aY*0x3,'BBox':new b['BBox'](b0),'colorIdx':null,'object':null},b2=a['Data']['ShapeAction']['GetAction'](m['Key'],aT),b2===undefined&&(b2=a['Data']['ActionItem']());}b2!==undefined&&b2['customColor']&&(b2['color']!==undefined&&(b2['color']['r']===undefined&&(b2['color']['r']=am['r']),b2['color']['g']===undefined&&(b2['color']['g']=am['g']),b2['color']['b']===undefined&&(b2['color']['b']=am['b']),b2['color']['a']===undefined&&(b2['color']['a']=am['a'])));if(m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0)b1['partid']=a['Animation']['GetAnimationBodyID'](m['Url']),b1['bodyId']=a['Animation']['GetAnimationBodyID'](m['Url']);else{if(m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0)b1['partid']=a['Animation']['GetAnimationBodyID'](m['Url']),b1['bodyId']=a['Animation']['GetAnimationBodyID'](m['Url']);else{if(m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0){b1['partid']=a['Animation']['GetAnimationBodyID'](m['Url']),b1['bodyId']=a['Animation']['GetAnimationBodyID'](m['Url']);if(b1['bodyId']<0x30d54)console['log']('');}else m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0&&(b1['partid']=a['Animation']['GetAnimationBodyID'](m['Url']),b1['bodyId']=a['Animation']['GetAnimationBodyID'](m['Url']));}}a['Data']['IDColor']['new'](),b1['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let b3=b1['m_nVtx']/0x3*0x4;for(let b6=0x0;b6<b3;b6=b6+0x4){aB[aC+b6+0x0]=a['Data']['IDColor']['r'],aB[aC+b6+0x1]=a['Data']['IDColor']['g'],aB[aC+b6+0x2]=a['Data']['IDColor']['b'],aB[aC+b6+0x3]=a['Data']['IDColor']['a'];}aC+=b3,b1['object']=ay,aA['push'](b1),a['Data']['AddBody'](b1);{a['Data']['ShapeAction']['SetAction'](m['Key'],aT,b2);}if(a['DemoType']===0x2){let b7=a['MeshProcess']['GetAABBFromMatrix']([b1]);b1['BBox']=b7;}}ay['attribs']['a_color']['array']=new Uint8Array(aB,0x0,aC),a['Data']['Objects']['push'](ay),ay['tag']=aA;if(a['DataSplit']!==0x0){let b8=a['Data']['ModelFileManager']['GetFileAreaData'](m['Key'],m['Url']);b8['objects']['push'](ay);}G++;}}function U(ae,af){m['ID']+=af;let ag=0x0,ah;ah=ae['getInt32'](ag,!![]),ag+=0x4;for(let ai=0x0;ai<ah;ai++){let aj=new b['Color']();aj['r']=ae['getUint8'](ag,!![]),aj['g']=ae['getUint8'](ag+0x1,!![]),aj['b']=ae['getUint8'](ag+0x2,!![]),aj['a']=ae['getUint8'](ag+0x3,!![]),ag+=0x4;let ak=ae['getUint32'](ag,!![]);ag+=0x4;let al=ae['getUint32'](ag,!![]);ag+=0x4;let am=ae['getUint32'](ag,!![]);ag+=0x4;let an=0x0;J['version']>=0x131&&(an=ae['getUint32'](ag,!![]),ag+=0x4);let ao,ap=0.5,aq=0x0,ar=0x0;if(a['Loader']['parsetype']===0x1){let aB=ae['getUint32'](ag,!![]);ag+=0x4;}let as=new Float32Array(B,ag+ae['byteOffset'],ak);ag+=ak*0x4;let at=new Float32Array(B,ag+ae['byteOffset'],al);ag+=al*0x4;let au=new Uint32Array(B,ag+ae['byteOffset'],am);ag+=am*0x4;let av;J['version']>=0x131&&an>0x0&&(av=new Float32Array(B,ag+ae['byteOffset'],an),ag+=an*0x4);let aw=a['Data']['Object3D']();aw['index']=G,aw['attribs']['a_index']['array']=au,aw['numElements']=aw['attribs']['a_index']['array']['length'],aw['attribs']['a_position']['array']=as,aw['attribs']['a_normal']['array']=at;an>0x0&&a['UV_DEBUG']&&(aw['attribs']['a_uv']['array']=av);let ax=ae['getUint32'](ag,!![]);ag+=0x4;let ay=[],az=[],aA=0x0;for(let aC=0x0;aC<ax;aC++){let aD=ae['getUint32'](ag,!![]);ag+=0x4;let aE=ae['getUint32'](ag,!![]);ag+=0x4;let aF=ae['getUint32'](ag,!![]);ag+=0x4;let aG=ae['getUint32'](ag,!![]);ag+=0x4;let aH=0x0;J['version']>=0x131&&(aH=ae['getUint32'](ag,!![]),ag+=0x4);let aI=ae['getUint16'](ag,!![]);ag+=0x2;let aJ=ae['getUint16'](ag,!![]);ag+=0x2;let aK=0x0;J['version']>=0x131&&(aK=ae['getUint32'](ag,!![]),ag+=0x4);let aL=new Float32Array(ae['buffer'],ag+ae['byteOffset'],0x6);ag+=0x18;if(a['UV_DEBUG']){let aM={'partId':aD+a['Data']['GetStartID'](m['Key']),'bodyId':aE+a['Data']['GetStartID'](m['Key']),'color':aj,'material':ao['id'],'m_vnIdx':aF*0x3,'m_triIdx':aG*0x3,'m_uvIdx':aH*0x2,'m_nVtx':aI*0x3,'m_nTris':aJ*0x3,'m_nUV':aK*0x2,'BBox':new b['BBox'](aL),'colorIdx':null,'object':null};a['Data']['IDColor']['new'](),aM['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let aN=aM['m_nVtx']/0x3*0x4;for(let aO=0x0;aO<aN;aO=aO+0x4){az[aA+aO+0x0]=a['Data']['IDColor']['r'],az[aA+aO+0x1]=a['Data']['IDColor']['g'],az[aA+aO+0x2]=a['Data']['IDColor']['b'],az[aA+aO+0x3]=a['Data']['IDColor']['a'];}aA+=aN,aM['object']=aw,ay['push'](aM),a['Data']['AddBody'](aM);}else{let aP={'partId':aD+a['Data']['GetStartID'](m['Key'])+af*0x2710,'bodyId':aE+a['Data']['GetStartID'](m['Key'])+af*0x2710,'color':aj,'m_vnIdx':aF*0x3,'m_triIdx':aG*0x3,'m_nVtx':aI*0x3,'m_nTris':aJ*0x3,'BBox':new b['BBox'](aL),'colorIdx':null,'object':null};a['Data']['IDColor']['new']();let aQ,aR=0x0,aS=0x0,aT=0x1,aU=0x1;af<0x5?(aR=0x4e20,aS=0x0,aT=af,aU=0x1):(aR=0x4e20,aS=0x15f90,aT=af%0x5,aU=0x1);aQ=new b['Vector3'](aR*aT,aS*aU,0x0),aP['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let aV=aP['m_nVtx']/0x3*0x4;for(let aW=0x0;aW<aV;aW=aW+0x4){az[aA+aW+0x0]=a['Data']['IDColor']['r'],az[aA+aW+0x1]=a['Data']['IDColor']['g'],az[aA+aW+0x2]=a['Data']['IDColor']['b'],az[aA+aW+0x3]=a['Data']['IDColor']['a'];}aA+=aV,aP['object']=aw,ay['push'](aP),a['Data']['AddBody'](aP);if(a['DemoType']===0x2){let aX=a['MeshProcess']['GetAABBFormMatrix']([aP]);aP['BBox']=aX;}}}aw['attribs']['a_color']['array']=new Uint8Array(az,0x0,aA),a['Data']['Objects']['push'](aw),aw['tag']=ay;if(a['DataSplit']!==0x0){let aY=a['Data']['ModelFileManager']['GetFileAreaData'](m['Key'],m['Url']);aY['objects']['push'](aw);}G++;}}function V(ae,af){let ag=0x0,ah=ae['getUint32'](ag,!![]);ag+=0x4;let ai=ae['getUint32'](ag,!![]);ag+=0x4;let aj=ae['getUint32'](ag,!![]);ag+=0x4;let ak=[],al=[];for(let ar=0x0;ar<aj;ar++){let as=a['Data']['NodeItem'](),at=ae['getUint32'](ag,!![]);as['origin_id']=at,as['index']=at===-0x1?at:at+a['Data']['GetStartID'](m['Key']),ag+=0x4,as['itemType']=ae['getInt32'](ag,!![]),ag+=0x4,ag+=0x4;let au=ae['getInt32'](ag,!![]);ag+=0x4,ag+=0x4;for(let aw=0x0;aw<0x10;aw++){ag+=0x4;}for(let ax=0x0;ax<0x6;ax++){ag+=0x4;}ag+=0x4;let av=ae['getInt32'](ag,!![]);as['origin_pid']=av,as['pIndex']=av===-0x1?av:av+a['Data']['GetStartID'](m['Key']),ag+=0x4,ag+=0x4;if(J['version']<0x12e)ag+=0x8;ag+=0x4,ag+=0x4;if(as['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&as['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&as['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody']){ai--;continue;}ak['push'](as),al['push'](au);}let am=ae['getInt32'](ag,!![]);ag+=0x4;let an=function(ay){try{return decodeURIComponent(escape(ay));}catch(az){return ay;}},ao=[],ap=ag,aq=0x0;for(let ay=0x0;ay<ai;ay++){if(al[ay]<=0x0)continue;let az={'nStringNum':0x0,'pos':0x0,'name':null};az['pos']=aq,az['nStringNum']=al[ay];let aA=new Uint8Array(az['nStringNum']);for(let aC=0x0;aC<az['nStringNum'];aC++){aA[aC]=ae['getUint8'](aq+ap+aC,!![]);}let aB=String['fromCharCode']['apply'](null,aA);aB=an(aB),ak[ay]['name']=aB['replace'](/\0/gi,''),az['name']=aB['replace'](/\0/gi,''),aq+=al[ay],ao[ay]=az;}ag+=am;{let aD=function(){let aS={'readIdx':-0x1,'index':-0x1,'offset':-0x1,'parentOffset':-0x1,'lastOffset':-0x1,'siblingOffset':-0x1,'level':0x0,'expand':0x0,'nameOffset':0x0,'nameLength':0x0,'node_id':0x0,'node_type':0x0,'parent':undefined,'child':[]};return aS;},aE=[],aF=[],aG=0x8,aH=0x20,aI=new Map(),aJ=[];for(let aS=0x0;aS<aj;aS++){let aT=ak[aS];if(aT===undefined)continue;let aU=aD();aU['readIdx']=aS,aU['node_id']=aT['origin_id'],aU['node_type']=aT['itemType'],aJ[aS]=aU,aI['set'](aU['node_id'],aS);}for(let aV=0x0;aV<aj;aV++){let aW=ak[aV];if(aW===undefined)continue;let aX=aJ[aV];if(aI['has'](aW['origin_pid'])){let aY=aJ[aI['get'](aW['origin_pid'])];aX['parent']=aY,aY['child']['push'](aX);}}{let aZ=[],b0=function(b1){aZ['push'](b1);for(let b2=0x0;b2<b1['child']['length'];b2++)b0(b1['child'][b2]);};for(let b1=0x0;b1<aJ['length'];b1++){let b2=aJ[b1];if(b2['parent']!==undefined)continue;b0(b2);}aJ=aZ;}for(let b3=0x0;b3<aJ['length'];b3++){let b4=aJ[b3];b4['index']=b3,b4['offset']=b3*aH;}let aK=function(b5,b6){if(b6['parent']===undefined)return;b5['level']++,aK(b5,b6['parent']);},aL=function(b5){return b5['child']['length']>0x0?aL(b5['child'][b5['child']['length']-0x1]):b5['offset'];};for(let b5=0x0;b5<aJ['length'];b5++){let b6=aJ[b5];if(b6['parent']!==undefined)b6['parentOffset']=b6['parent']['offset'];aK(b6,b6),b6['child']['length']>0x0?(b6['siblingOffset']=b6['child'][b6['child']['length']-0x1]['offset'],b6['lastOffset']=aL(b6)):(b6['siblingOffset']=b6['offset'],b6['lastOffset']=b6['offset']);}let aM=0x0,aN=0x0,aO=new ArrayBuffer(aj*aH),aP=new Int32Array(aO,0x0,aj*aG);aM=0x0;let aQ=new ArrayBuffer(am),aR=new Uint8Array(aQ,0x0,am);for(let b7=0x0;b7<aJ['length'];b7++){let b8=aJ[b7];if(ao[b8['readIdx']]!==undefined){let b9=ao[b8['readIdx']],ba=unescape(encodeURIComponent(b9['name'])),bb=new ArrayBuffer(ba['length']),bc=new Uint8Array(bb);for(let bd=0x0,be=ba['length'];bd<be;bd++){bc[bd]=ba['charCodeAt'](bd);}b8['nameOffset']=aM,b8['nameLength']=ba['length'],aR['set'](bc,aM),aM+=b8['nameLength'];}aP['set']([b8['parentOffset'],b8['lastOffset'],b8['siblingOffset'],b8['level'],b8['nameOffset'],b8['nameLength'],b8['node_id'],b8['node_type']],aN),aN+=aG,aE[b7]=b8['node_id'],aF[b8['node_id']]=b7;}{let bf=a['Data']['ModelFileManager']['GetFileInfo'](m['Key']),bg=a['Data']['ModelFileManager']['AddFileDataInfo'](bf,m['Key'],b['Enum']['FILEINFOTYPE']['STRUCTURE']);if(bg!==undefined){let bh=a['Data']['TreeBinaryInfoItem']();bh['key']=m['Key'],bh['idx_start']=0x0,bh['idx_end']=aj,bh['offset_start']=0x0,bh['structure']=new DataView(aO),bh['name']=new DataView(aQ),bh['size']=aH,bh['listNodeID']=aE,bh['listIndexByID']=aF,bg['tag']=bh,bf['listNodeID']=aE,bf['listIndexByID']=aF,bg['Download']=!![];}}}D=!![],ac();}function W(ae,af){let ag=0x0,ah=ae['getUint32'](ag,!![]);ag+=0x4;let ai=function(ak){try{return decodeURIComponent(escape(ak));}catch(al){return ak;}},aj=[];switch(a['DataSplit']){case 0x2:{for(let ak=0x0;ak<ah;ak++){let al=a['Data']['NodeItem'](),am=ae['getUint32'](ag,!![]);al['index']=am===-0x1?am:am+a['Data']['GetStartID'](m['Key']),ag+=0x4,al['itemType']=ae['getInt32'](ag,!![]),ag+=0x4;let an=ae['getInt32'](ag,!![]);al['pIndex']=an===-0x1?an:an+a['Data']['GetStartID'](m['Key']),ag+=0x4;if(al['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&al['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&al['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody'])continue;a['Data']['AddNode'](al);}}break;default:{for(let ao=0x0;ao<ah;ao++){let ap=a['Data']['NodeItem'](),aq=ae['getUint32'](ag,!![]);ap['index']=aq===-0x1?aq:aq+a['Data']['GetStartID'](m['Key']),ag+=0x4,ap['itemType']=ae['getInt32'](ag,!![]),ag+=0x4,ag+=0x2;let ar=ae['getInt32'](ag,!![]);ag+=0x4;if(ar>0x0){let at=new Uint8Array(ar);for(let av=0x0;av<ar;av++){at[av]=ae['getUint8'](ag+av,!![]);}let au=String['fromCharCode']['apply'](null,at);au=ai(au),ap['name']=au['replace'](/\0/gi,'');}ag+=ar,ag+=0x2;for(let aw=0x0;aw<0x10;aw++){ag+=0x4;}for(let ax=0x0;ax<0x6;ax++){ag+=0x4;}ag+=0x4;let as=ae['getInt32'](ag,!![]);ap['pIndex']=as===-0x1?as:as+a['Data']['GetStartID'](m['Key']),ag+=0x4,ag+=0x4;if(J['version']<0x12e)ag+=0x8;ag+=0x4,ag+=0x4;if(ap['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&ap['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&ap['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody'])continue;a['Data']['AddNode'](ap);}}break;}D=!![],ac();}function X(ae,af){let ag=0x0,ah=ae['getInt32'](ag,!![]);ag+=0x4;let ai=ae['getInt32'](ag,!![]);ag+=0x4;let aj=ae['getInt32'](ag,!![]);ag+=0x4;let ak=ae['getInt32'](ag,!![]);ag+=0x4;let al=ae['getInt32'](ag,!![]);ag+=0x4;let am=ae['getInt32'](ag,!![]);return ag+=0x4,[ai,aj,ak,al,am];}function Y(ae,af){let ag=0x0,ah=ae['getInt32'](ag,!![]);ag+=0x4;let ai=[];for(let aj=0x0;aj<ah;aj++){let ak=new Float32Array(ae['buffer'],ag+a['byteOffset'],0x6);ag+=0x18;let al=ae['getInt32'](ag,!![]);ag+=0x4;let am=new Int32Array(ae['buffer'],ag+a['byteOffset'],al);ag+=0x4*al;let an={'bbox':new b['BBox'](ak),'list':am};ai[aj]=an;}a['Data']['AddAreaListMap'](m['Url'],ai);}function Z(ae,af){let ag=0x8,ah=ae['getUint32'](ag,!![]);ag+=0x4;let ai=0x0;for(let aj=0x0;aj<ah;aj++){let ak=ae['getUint32'](ag,!![]);if(ai<ak)ai=ak;ag+=0x4,ag+=0x4,ag+=0x4,ag+=0x4,ag+=0x4;for(let al=0x0;al<0x10;al++){ag+=0x4;}for(let am=0x0;am<0x6;am++){ag+=0x4;}ag+=0x4,ag+=0x4,ag+=0x4;if(J['version']<0x12e)ag+=0x8;ag+=0x4,ag+=0x4;}return ai;}function a0(ae,af){let ag=0x0,ah=ae['getUint32'](ag,!![]);ag+=0x4;let ai=0x0;switch(a['DataSplit']){case 0x2:{for(let aj=0x0;aj<ah;aj++){let ak=ae['getUint32'](ag,!![]);if(ai<ak)ai=ak;ag+=0xc;}}break;default:{for(let al=0x0;al<ah;al++){let am=ae['getUint32'](ag,!![]);if(ai<am)ai=am;ag+=0xa;let an=ae['getInt32'](ag,!![]);ag+=0x4,ag+=an,ag+=0x6e;if(J['version']<0x12e)ag+=0x8;}}break;}return ai;}function a1(ae,af){let ag=0x0,ah=ae['getUint32'](ag,!![]);ag+=0x4;let ai=[];for(let ak=0x0;ak<ah;ak++){let al=ae['getUint32'](ag,!![]);ag+=0x4;let am={'tableTocIdx':al,'nLoadedNodes':0x0};ai['push'](am);}for(let an=0x0;an<ai['length'];an++){let ao=ai[an],ap=L[ao['tableTocIdx']];if(ap===undefined){setTimeout(function(){k(null,C);},0x1);return;}else{let aq=S(ap,ae['buffer']);aj(aq,ap,ao);}}function aj(ar,as,at){let au=0x0,av=ar['getUint32'](au,!![]);au+=0x4;if(at['nLoadedNodes']===av)return![];let aw=[];for(let ax=0x0;ax<av;ax++){let ay={'nodeId':-0x1,'nNodeProps':0x0,'items':[],'key':m['ID'],'offset':-0x1,'id_file':m['Key']};aw[ax]=ay;let az=ar['getUint32'](au,!![]);ay['nodeId']=az+a['Data']['GetStartID'](m['Key']),au+=0x4,ay['nNodeProps']=ar['getInt16'](au,!![]),au+=0x2,ay['offset']=au;let aA=function(aC){return unescape(encodeURIComponent(aC));},aB=function(aC){try{return decodeURIComponent(escape(aC));}catch(aD){return aC;}};if(a['Configuration']['Property']['UseArrayBuffer'])for(let aC=0x0;aC<ay['nNodeProps'];aC++){let aD=ar['getUint32'](au,!![]);au+=0x4,au+=aD,au+=0x2,aD=ar['getUint32'](au,!![]),au+=0x4,au+=aD,au+=0x2;}else for(let aE=0x0;aE<ay['nNodeProps'];aE++){let aF={'key':null,'value':null},aG=ar['getUint32'](au,!![]);au+=0x4;let aH=new Uint8Array(aG);for(let aJ=0x0;aJ<aG;aJ++){aH[aJ]=ar['getUint8'](au+aJ,!![]);}aF['key']=String['fromCharCode']['apply'](null,aH),aF['key']=aB(aF['key']),au+=aG,au+=0x2,aG=ar['getUint32'](au,!![]),au+=0x4;let aI=new Uint8Array(aG);for(let aK=0x0;aK<aG;aK++){aI[aK]=ar['getUint8'](au+aK,!![]);}aF['value']=String['fromCharCode']['apply'](null,aI),aF['value']=aB(aF['value']),au+=aG,au+=0x2,ay['items']['push'](aF);}}a['Property']['Add'](aw,m['ID'],ar,m);{let aL=a['Data']['ModelFileManager']['GetFileInfo'](m['Key']),aM=a['Data']['ModelFileManager']['AddFileDataInfo'](aL,b['Enum']['FILEINFOTYPE']['PROPERTY'],b['Enum']['FILEINFOTYPE']['PROPERTY']);aM['Download']=!![];}F=!![],ac();}}let a2=Q(d['CTSplitStructureMeshBlockFile']);if(a2!==-0x1&&J['version']>=0x12f){let ae=L[a2],af=S(ae),ag=X(af,ae),ah=ag[0x0];if(ah!==0x0){let ai=ag[0x1],aj=ag[0x2],ak=ag[0x3],al=ag[0x4],am=a['Data']['GetStringLeft'](m['Url'],0x0,m['Url']['length']-0x5),an=0x0,ao=0x0,ap=0x0,aq=0x0,ar=[],as=Math['max'](Math['max'](ai,aj),ak);for(let at=0x0;at<as;++at){an<ai&&(ar[aq++]=am+'_s_'+an+'.vizw',an++),ap<ak&&(ar[aq++]=am+'_u_'+ap+'.vizw',ap++),ao<aj&&(ar[aq++]=am+'_'+ao+'.vizw',ao++);}if(!a['useLOD']){let au=Q(d['CTSplitAreaMeshBlockList']);if(au!==-0x1){let av=L[au],aw=S(av);Y(aw,av);}}a['DataSplit']=ah,a['resizeGLWindowSkip']=!![],a['currentSplitDownloadCnt']=0x0,a['totalSplitDownloadCnt']=ai+aj+ak,a['Data']['ApplyStartID'](),a['Model']['SplitAdd'](ar),k(null,m);return;}}let a3=Q(d['CTStructure']),a4=L[a3],a5=S(a4),a6=Q(d['CTMeshBlock']),a7=L[a6],a8=S(a7),a9=Q(d['CTNodePropTableIndices']),aa=L[a9],ab=S(aa);{let ax=a['Data']['ModelFileManager']['CreateFileInfoEmpty'](m);a['Data']['ModelFileManager']['AddFileInfo'](m['Key'],ax);}if(a4!==undefined){if(a['DataSplit']===0x0){let ay=Z(a5,a4);a['Data']['SetStartID'](m['Key'],ay);}else{let az=a0(a5,a4);a['Data']['SetCurrentStartID'](az);}}if(a4===undefined&&a7===undefined&&aa===undefined){if(!a['useFramebuffer'])h(0x1,0x1);B=null,k(null,m);}else a4!==undefined?setTimeout(function(){a['DataSplit']===0x0?V(a5,a4):W(a5,a4);},0x1):(D=!![],ac()),a7!==undefined?setTimeout(function(){I=0x0;let aA=a8['getInt32'](I,!![]);I+=0x4;let aB=0x0,aC=function(){for(let aD=aB;aD<aA;aD++){let aE=aB/aA;if(aE===Infinity)aE=0x0;let aF=0x0;aF=a8['getInt32'](I,!![]),I+=0x4;let aG=L[aF],aH=S(aG);T(aH,aF);if(a['DemoType']===0x3){if(m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0||m['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0)for(let aI=0x1;aI<0x14;aI++){a['Animation']['BackupUrl']='',T(aH,aF);}}if(a['DemoType']==0x2)for(let aJ=0x1;aJ<0xa;aJ++){a['MeshProcess']['Copy'](aH,aJ,B,m,J,G);}aB++;if(aB!==aA){setTimeout(function(){if(!a['useFramebuffer'])h(0x1,aE);aC();},0x1);break;}else setTimeout(function(){if(!a['useFramebuffer'])h(0x1,0x1);E=!![],ac();},0x1);}};setTimeout(function(){if(!a['useFramebuffer'])h(0x1,0x0);aC();},0x1);},0x1):(E=!![],ac()),aa!==undefined?setTimeout(function(){a1(ab,aa);},0x1):(F=!![],ac());function ac(){if(D&&E&&F)k(null,m);}}function w(B,C){let D=a['Configuration']['Default']['EncodeURI']['Enable']===!![]?e(B):B,E='';if(a['Configuration']['Default']['File']!==undefined&&a['Configuration']['Default']['File']['EnableCache']===!![]){if(C===undefined||C===![])E=a['Configuration']['Default']['File']['RequestParam']+new Date()['getTime']();}return D+E;};function x(B,C,D,E,F){let G=w(B['Url']),H=function(I){let J=new Date();{let K=(L,M)=>{let N=new Date(),O=new Uint8Array(L);const P=O['byteLength'],Q=a['ShdCore']['_malloc'](P);var R=new Uint8Array(O);a['ShdCore']['HEAPU8']['set'](R,Q);const S=a['ShdCore']['ccall']('GetDecompressedSize','BigInt',['number','number'],[Q,P]);if(S<=0x0){console['log']('Decompressed\x20::\x20It\x20is\x20not\x20a\x20compressed\x20file.'),a['ShdCore']['_free'](Q),M(L,B);return;}const T=a['ShdCore']['_malloc'](S),U=a['ShdCore']['ccall']('Decompress','number',['number','number','number','number'],[Q,P,T,S]);try{var V=new Uint8Array(U);a['useAssemblyLoader']?V['set'](new Uint8Array(a['ShdCore']['wasmMemory']['buffer'],T,U),0x0):V['set'](new Uint8Array(a['ShdCore']['asm']['memory']['buffer'],T,U),0x0),L=V['buffer'];}catch(W){console['log']('allocation\x20::\x20',W),a['ShdCore']['_free'](Q),a['ShdCore']['_free'](T),M(undefined,B);return;}a['ShdCore']['_free'](Q),a['ShdCore']['_free'](T),M(L,B);};if(F!==undefined){let L=(M,N)=>{E(M,N),I=null;};setTimeout(()=>{K(I,L);},0x1),F(B,undefined);}else K(I,E);}if(F===undefined)I=null;};fetch(G,{'method':'GET','mode':'cors','cache':'default','credentials':'same-origin'})['then'](I=>{if(!I['ok'])E(undefined,B),a['EventHandler']['dispatchEvent'](b['Enum']['EXCEPTION_CODE']['DOWNLOAD_FAIL'],{'key':B['Key'],'url':B['Url'],'error':I['status']});else return I['arrayBuffer']();})['then'](I=>H(I));}function y(){if(a['useJquery']===![]){let B=C=>{if(C==undefined||C['byteLength']===0x0){console['log']('File\x20Loading\x20Error\x20:\x20'+m['Url']),m['Status']=0x3,g(undefined,m);return;}else try{n(C,m,undefined),C=null;}catch(D){console['log']('File\x20Loading\x20Error\x20:\x20'+m['Url']),m['Status']=0x3,g(undefined,m);return;}};x(f,g,h,B,undefined);}else $['ajax']({'complete':function(){h(0x2,0x1);},'url':f['Url'],'type':'GET','beforeSend':function(){h(0x2,0x0,0x0,0x0);},'xhr':function(){let C=this,D=$['ajaxSettings']['xhr']();return D['responseType']='arraybuffer',D['onprogress']=function(E){let F=E['loaded']/E['total'];h(0x2,F,E['loaded'],E['total']);},D['addEventListener']('load',function(){let E=$()['jquery'],F=E['split']('.'),G=F[0x0]*0x1,H=F[0x1]*0x1;if(G<=0x2&&H<0x2)C['success'](D['response']);}),D;},'responseType':'arraybuffer','processData':![],'async':!![],'success':function(C){function D(H){var I='',J=new Uint8Array(H),K=J['byteLength'];for(var L=0x0;L<K;L++){I+=String['fromCharCode'](J[L]);}return window['btoa'](I);}function E(H){var I=window['atob'](H),J=I['length'],K=new Uint8Array(J);for(var L=0x0;L<J;L++){K[L]=I['charCodeAt'](L);}return K['buffer'];}let F=(H,I)=>{let J=new Date(),K=new Uint8Array(H);const L=K['byteLength'],M=a['ShdCore']['_malloc'](L);var N=new Uint8Array(K);a['ShdCore']['HEAPU8']['set'](N,M);const O=a['ShdCore']['ccall']('GetDecompressedSize','BigInt',['number','number'],[M,L]);if(O<=0x0){console['log']('Decompressed\x20::\x20It\x20is\x20not\x20a\x20compressed\x20file.'),a['ShdCore']['_free'](M),I(H,f);return;}const P=a['ShdCore']['_malloc'](O),Q=a['ShdCore']['ccall']('Decompress','number',['number','number','number','number'],[M,L,P,O]);try{var R=new Uint8Array(Q);R['set'](new Uint8Array(a['ShdCore']['asm']['memory']['buffer'],P,Q),0x0),H=R['buffer'];}catch(S){console['log']('allocation\x20::\x20',S),a['ShdCore']['_free'](M),a['ShdCore']['_free'](P),I(H,f);return;}a['ShdCore']['_free'](M),a['ShdCore']['_free'](P),I(H,f);},G=H=>{if(H['byteLength']===0x0)console['log']('File\x20Loading\x20Error\x20:\x20'+m['Url']),m['Status']=0x3,g(undefined,m);else try{n(H,m,undefined),C=null;}catch(I){console['log']('File\x20Loading\x20Error\x20:\x20'+m['Url']),m['Status']=0x3,g(undefined,m);}};F(C,G);},'error':function(C,D,E){console['log'](C['status']),console['log'](E),m['Status']=0x3,g(undefined,m);}});}function z(){$['ajax']({'url':encodeURIComponent(f['Url']),'type':'GET','dataType':'binary','responseType':'arraybuffer','processData':![],'async':![],'success':function(B){n(B);},'error':function(B,C,D){console['log'](B['status']),console['log'](D);}});}y();function A(){const B='<?xml\x20version=\x221.0\x22?><person><name>Arun</name></person>';let C=new XMLHttpRequest(),D='http://VIZCoredaelim.s3-website.ap-northeast-2.amazonaws.com/Daelim.vizw';C['open']('POST',D,!![]),C['setRequestHeader']('Ping-Other','pingpong'),C['setRequestHeader']('Content-Type','application/xml'),C['onreadystatechange']=function(){this['readyState']===0x4&&this['status']===0xc8&&y();},C['onload']=function(){if(this['readyState']===0x4&&this['status']===0xc8){let E=JSON['parse'](C['response']);}},C['send'](B);}},this['SetData']=function(f,g,h,i,j,k){let l=h,m=0x0,n=g;async function o(z,A){w(z);}function p(z,A,B){if(z['z']+A<=B)z['z']+=A;else z['y']+A<=B?(z['y']+=A,z['z']=0x0):(z['x']+=A,z['y']=0x0,z['z']=0x0);return this;}const q=window['BigInt'],r=q(0x20),s=q(0x0);function t(z,A,B){const C=q(z['getUint32'](A|0x0,!!B)>>>0x0),D=q(z['getUint32']((A|0x0)+0x4|0x0,!!B)>>>0x0);return B?D<<r|C:C<<r|D;}function u(z,A,B){if(0x1){const C=z['getUint32'](A,B),D=z['getUint32'](A+0x4,B),E=B?C+0x2**0x20*D:0x2**0x20*C+D;if(!Number['isSafeInteger'](E))console['warn'](E,'exceeds\x20MAX_SAFE_INTEGER.\x20Precision\x20may\x20be\x20lost');return E;}return t(a,A,B);}function v(z){console['log']('Data\x20Loading\x20Start');let A=new DataView(z),B=0x0,C={'typeStr':null,'version':null,'sizeTocItem':null,'nToc':null,'tocPos':null},D=new Uint8Array(z,B,0x10);C['typeStr']=String['fromCharCode']['apply'](null,D),B+=0x10,C['version']=A['getInt32'](B,!![]),B+=0x4,C['sizeTocItem']=A['getInt32'](B,!![]),B+=0x4,C['nToc']=A['getInt32'](B,!![]),B+=0x4,C['tocPos']=u(A,B,!![]),B+=0x8;let E=[],F=0x0,G=0x0,H=C['tocPos'];F=A['getInt32'](H,!![]),H+=0x4,G=u(A,H,!![]),H+=0x8;for(let Y=0x0;Y<F;Y++){I(Y);}function I(Z){let a0=C['tocPos']+0xc+Z*C['sizeTocItem'],a1=A['getInt32'](a0,!![]);a0+=0x8;let a2=u(A,a0,!![]);a0+=0x8;let a3=A['getUint32'](a0,!![]);a0+=0x4;let a4=A['getUint32'](a0,!![]);a0+=0x4;let a5=0x0;a['Loader']['parsetype']===0x1&&(a5=A['getUint32'](a0,!![]),a0+=0x4);let a6={'itemType':a1,'position':a2,'datasize':a3,'uncompsize':a4,'parsetype':a5};E['push'](a6);}function J(Z){let a0=-0x1;for(let a1=E['length']-0x1;a1>=0x0;a1--){if(E[a1]['itemType']===Z){a0=a1;break;}}return a0;}function K(Z){let a0=-0x1;for(let a1=0x0;a1<E['length'];a1++){if(E[a1]['itemType']===Z){a0=a1;break;}}return a0;}function L(Z,a0){try{let a1=Z['position'],a2;return a0===undefined?(a2=new DataView(z,a1,Z['datasize']),a2):(a=new DataView(a0,a1,Z['datasize']),a);}catch(a3){return undefined;}}let M=J(d['CTMeshBlock']),N=E[M];function O(Z,a0){let a1=0x0,a2;a2=Z['getInt32'](a1,!![]),a1+=0x4;for(let a3=0x0;a3<a2;a3++){let a4=new b['Color']();a4['r']=Z['getUint8'](a1,!![]),a4['g']=Z['getUint8'](a1+0x1,!![]),a4['b']=Z['getUint8'](a1+0x2,!![]),a4['a']=Z['getUint8'](a1+0x3,!![]),a1+=0x4;let a5=Z['getUint32'](a1,!![]);a1+=0x4;let a6=Z['getUint32'](a1,!![]);a1+=0x4;let a7=Z['getUint32'](a1,!![]);a1+=0x4;if(Z['Loader']['parsetype']===0x1){let ah=Z['getUint32'](a1,!![]);a1+=0x4;}let a8=a5/0xf,a9=new Float32Array(z,a1+Z['byteOffset'],a5);a1+=a5*0x4;let aa=new Float32Array(z,a1+Z['byteOffset'],a6);a1+=a6*0x4;let ab=new Uint32Array(z,a1+Z['byteOffset'],a7);a1+=a7*0x4;let ac=Z['Data']['Object3D']();ac['id_file']=n['Key'],ac['attribs']['a_index']['array']=ab,ac['numElements']=ac['attribs']['a_index']['array']['length'],ac['attribs']['a_position']['array']=a9,ac['attribs']['a_normal']['array']=aa;let ad=Z['getUint32'](a1,!![]);a1+=0x4;let ae=[],af=[],ag=0x0;for(let ai=0x0;ai<ad;ai++){let aj=Z['getUint32'](a1,!![]);a1+=0x4;let ak=Z['getUint32'](a1,!![]);a1+=0x4;let al=ak,am=Z['getUint32'](a1,!![]);a1+=0x4;let an=Z['getUint32'](a1,!![]);a1+=0x4;let ao=Z['getUint16'](a1,!![]);a1+=0x2;let ap=Z['getUint16'](a1,!![]);a1+=0x2;let aq=new Float32Array(A['buffer'],a1+Z['byteOffset'],0x6);a1+=0x18;let ar={'partId':aj+Z['Data']['GetStartID'](n['Key']),'bodyId':ak+Z['Data']['GetStartID'](n['Key']),'origin_id':al,'color':a4,'material':undefined,'m_vnIdx':am*0x3,'m_triIdx':an*0x3,'m_nVtx':ao*0x3,'m_nTris':ap*0x3,'BBox':new b['BBox'](aq),'colorIdx':null,'object':null};Z['Data']['IDColor']['new'](),ar['colorIdx']=Z['Data']['IDColor']['r']+(Z['Data']['IDColor']['g']<<0x8)+(Z['Data']['IDColor']['b']<<0x10)+Z['Data']['IDColor']['a']*0x1000000;let as=ar['m_nVtx']/0x3*0x4;for(let au=0x0;au<as;au=au+0x4){af[ag+au+0x0]=Z['Data']['IDColor']['r'],af[ag+au+0x1]=Z['Data']['IDColor']['g'],af[ag+au+0x2]=Z['Data']['IDColor']['b'],af[ag+au+0x3]=Z['Data']['IDColor']['a'];}ag+=as,ar['object']=ac,ae['push'](ar),Z['Data']['AddBody'](ar);let at=Z['Data']['ShapeAction']['GetAction'](n['Key'],al);at===undefined&&(at=Z['Data']['ActionItem']());{Z['Data']['ShapeAction']['SetAction'](n['Key'],al,at);}}ac['attribs']['a_color']['array']=new Uint8Array(af,0x0,ag),Z['Data']['Objects']['push'](ac),ac['tag']=ae;}}let P=J(d['CTStructure']),Q=E[P],R=L(Q);function S(Z,a0){let a1=0x0,a2=Z['getUint32'](a1,!![]);a1+=0x4;let a3=Z['getUint32'](a1,!![]);a1+=0x4;let a4=Z['getUint32'](a1,!![]);a1+=0x4;let a5=[];for(let ab=0x0;ab<a4;ab++){let ac={'index':-0x1,'itemType':0x0,'entFlags':0x0,'iNameIndex':-0x1,'attFlags':0x0,'transfrom':[],'bBox':[],'BBox':null,'cCount':-0x1,'pIndex':-0x1,'orgNodeID':-0x1,'pNameBuff':null,'tocId':0x0,'btype':0x0,'name':null},ad=Z['getUint32'](a1,!![]);ac['index']=ad===-0x1?ad:ad+Z['Data']['GetStartID'](n['Key']),a1+=0x4,ac['itemType']=Z['getInt32'](a1,!![]),a1+=0x4,ac['entFlags']=Z['getUint16'](a1,!![]),a1+=0x4,ac['iNameIndex']=Z['getInt32'](a1,!![]),a1+=0x4,ac['attFlags']=Z['getUint16'](a1,!![]),a1+=0x4,ac['transfrom']=[];for(let af=0x0;af<0x10;af++){ac['transfrom'][af]=Z['getFloat32'](a1,!![]),a1+=0x4;}ac['bBox']=[];for(let ag=0x0;ag<0x6;ag++){ac['bBox'][ag]=Z['getFloat32'](a1,!![]),a1+=0x4;}ac['BBox']=new b['BBox'](ac['bBox']),ac['cCount']=Z['getInt32'](a1,!![]),a1+=0x4;let ae=Z['getInt32'](a1,!![]);ac['pIndex']=ae===-0x1?ae:ae+Z['Data']['GetStartID'](n['Key']),a1+=0x4,ac['orgNodeID']=Z['getInt32'](a1,!![]),a1+=0x4;if(C['version']<0x12e)a1+=0x8;ac['tocId']=Z['getInt32'](a1,!![]),a1+=0x4,ac['btype']=Z['getInt32'](a1,!![]),a1+=0x4;if(ac['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&ac['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&ac['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody']){a3--;continue;}a5['push'](ac);}Z['Data']['AddNodes'](a5);let a6=Z['getInt32'](a1,!![]);a1+=0x4;let a7=function(ah){try{return decodeURIComponent(escape(ah));}catch(ai){return ah;}},a8=[],a9=0x0;for(let ah=0x0;ah<a3;ah++){if(a5[ah]['iNameIndex']<=0x0)continue;let ai={'nStringNum':0x0,'pos':0x0,'name':null};ai['pos']=a9,ai['nStringNum']=a5[ah]['iNameIndex'];let aj=new Uint8Array(ai['nStringNum']);for(let al=0x0;al<ai['nStringNum'];al++){aj[al]=Z['getUint8'](a9+a1+al,!![]);}let ak=String['fromCharCode']['apply'](null,aj);ak=a7(ak),a5[ah]['name']=ak['replace'](/\0/gi,''),ai['name']=ak['replace'](/\0/gi,''),a9+=a5[ah]['iNameIndex'],a8['push'](ai);}a1+=a6;let aa=function(){let am=Z['getUint32'](a1,!![]);a1+=0x4;for(let an=0x0;an<a4;an++){let ao={'nodeTreeOrderID':-0x1,'hasColor':![],'color':[],'cacheidx':-0x1,'hasLayerNumber':![],'layerNum':-0x1,'attrCount':-0x1,'attrType':[],'volume':0x0,'area':0x0,'centroid':[],'desbyteLength':-0x1,'fdensity':-0x1,'edgeStartidx':-0x1,'edgeIdxNum':-0x1};ao['nodeTreeOrderID']=Z['getInt32'](a1,!![]),a1+=0x4,ao['hasColor']=Z['getUint8'](a1,!![]),a1+=0x4;for(let ap=0x0;ap<0x4;ap++){ao['color'][ap]=Z['getFloat32'](a1,!![]),a1+=0x4;}ao['cacheidx']=Z['getInt32'](a1,!![]),a1+=0x4,ao['hasLayerNumber']=Z['getUint8'](a1,!![]),a1+=0x4,ao['layerNum']=Z['getInt32'](a1,!![]),a1+=0x4,ao['attrCount']=Z['getInt32'](a1,!![]),a1+=0x4;for(let aq=0x0;aq<0x2;aq++){ao['attrType'][aq]=Z['getInt32'](a1,!![]),a1+=0x4;}ao['volume']=u(Z,a1,!![]),a1+=0x8,ao['area']=u(Z,a1,!![]),a1+=0x8;for(let ar=0x0;ar<0x3;ar++){ao['centroid'][ar]=u(Z,a1,!![]),a1+=0x8;}ao['desbyteLength']=Z['getInt32'](a1,!![]),a1+=0x4,ao['fdensity']=Z['getInt32'](a1,!![]),a1+=0x4,ao['edgeStartidx']=Z['getInt32'](a1,!![]),a1+=0x4,ao['edgeIdxNum']=Z['getInt32'](a1,!![]),a1+=0x4;}};}function T(Z,a0){let a1=0x8,a2=Z['getUint32'](a1,!![]);a1+=0x4;let a3=0x0;for(let a4=0x0;a4<a2;a4++){let a5=Z['getUint32'](a1,!![]);if(a3<a5)a3=a5;a1+=0x20;if(C['version']<0x12e)a1+=0x8;}return a3;}let U=J(d['CTNodePropTableIndices']),V=E[U],W=L(V);function X(Z,a0){let a1=0x0,a2=Z['getUint32'](a1,!![]);a1+=0x4;let a3=[];for(let a5=0x0;a5<a2;a5++){let a6=Z['getUint32'](a1,!![]);a1+=0x4;let a7={'tableTocIdx':a6,'nLoadedNodes':0x0};a3['push'](a7);}for(let a8=0x0;a8<a3['length'];a8++){let a9=a3[a8],aa=E[a9['tableTocIdx']];if(aa===undefined){setTimeout(function(){l(null,g);},0x1);return;}else{let ab=L(aa,A['buffer']);a4(ab,aa,a9);}}function a4(ac,ad,ae){let af=0x0,ag=ac['getUint32'](af,!![]);af+=0x4;if(ae['nLoadedNodes']===ag)return![];let ah=[];for(let ai=0x0;ai<ag;ai++){let aj={'nodeId':-0x1,'nNodeProps':0x0,'items':[]};ah['push'](aj),aj['nodeId']=ac['getUint32'](af,!![]),aj['nodeId']+=m,af+=0x4,aj['nNodeProps']=ac['getInt16'](af,!![]),af+=0x2;let ak=function(am){return unescape(encodeURIComponent(am));},al=function(am){return decodeURIComponent(escape(am));};for(let am=0x0;am<aj['nNodeProps'];am++){let an={'key':null,'value':null},ao=ac['getUint32'](af,!![]);af+=0x4;let ap=new Uint8Array(ao);for(let ar=0x0;ar<ao;ar++){ap[ar]=ac['getUint8'](af+ar,!![]);}an['key']=String['fromCharCode']['apply'](null,ap),an['key']=al(an['key']),af+=ao,ao=ac['getUint16'](af,!![]),af+=0x2,ao=ac['getUint32'](af,!![]),af+=0x4;let aq=new Uint8Array(ao);for(let as=0x0;as<ao;as++){aq[as]=ac['getUint8'](af+as,!![]);}an['value']=String['fromCharCode']['apply'](null,aq),an['value']=al(an['value']),af+=ao,af+=0x2,aj['items']['push'](an);}}ac['Data']['AddUserProperty'](ah),setTimeout(function(){l(null,g);},0x1);}}if(N===undefined){if(!a['useFramebuffer'])i(0x1,0x1);z=null,Q===undefined?setTimeout(function(){l(null,g);},0x1):setTimeout(function(){S(R,Q),V===undefined?setTimeout(function(){l(null,g);},0x1):setTimeout(function(){X(W,V);},0x1);},0x1);}else{let Z=T(R,Q);a['Data']['SetStartID'](n['Key'],Z);let a0=L(N);B=0x0;let a1=a0['getInt32'](B,!![]);B+=0x4;let a2=0x0,a3=function(){for(let a4=a2;a4<a1;a4++){let a5=a2/a1;if(a5===Infinity)a5=0x0;if(!a['useFramebuffer'])i(0x1,a5);console['log']('ReadMeshBlock\x20:\x20'+a4);let a6=0x0;a6=a['getInt32'](B,!![]),B+=0x4;let a7=E[a6],a8=L(a7);O(a8,a6),a2++;if(a2!==a1){setTimeout(function(){if(!a['useFramebuffer'])i(0x1,a5);a3();},0x1);break;}else setTimeout(function(){if(!a['useFramebuffer'])i(0x1,0x1);z=null,Q===undefined?setTimeout(function(){l(null,g);},0x1):setTimeout(function(){S(R,Q),V===undefined?setTimeout(function(){l(null,g);},0x1):setTimeout(function(){X(W,V);},0x1);},0x1);},0x1);}};setTimeout(function(){if(!a['useFramebuffer'])i(0x1,0x0);a3();},0x1);}}function w(z,A){let B=![],C=![],D=![],E=0x0,F=new DataView(z),G=0x0,H={'typeStr':null,'version':null,'sizeTocItem':null,'nToc':null,'tocPos':null},I=new Uint8Array(z,G,0x10);H['typeStr']=String['fromCharCode']['apply'](null,I),G+=0x10,H['version']=F['getInt32'](G,!![]),G+=0x4,H['sizeTocItem']=F['getInt32'](G,!![]),G+=0x4,H['nToc']=F['getInt32'](G,!![]),G+=0x4,H['tocPos']=u(F,G,!![]),G+=0x8;let J=[],K=0x0,L=0x0,M=H['tocPos'];K=F['getInt32'](M,!![]),M+=0x4,L=u(F,M,!![]),M+=0x8;for(let ab=0x0;ab<K;ab++){N(ab);}function N(ac){let ad=H['tocPos']+0xc+ac*H['sizeTocItem'],ae=F['getInt32'](ad,!![]);ad+=0x8;let af=u(F,ad,!![]);ad+=0x8;let ag=F['getUint32'](ad,!![]);ad+=0x4;let ah=F['getUint32'](ad,!![]);ad+=0x4;let ai=0x0;a['Loader']['parsetype']===0x1&&(ai=F['getUint32'](ad,!![]),ad+=0x4);let aj={'itemType':ae,'position':af,'datasize':ag,'uncompsize':ah,'parsetype':ai};J['push'](aj);}function O(ac){let ad=-0x1;for(let ae=J['length']-0x1;ae>=0x0;ae--){if(J[ae]['itemType']===ac){ad=ae;break;}}return ad;}function P(ac){let ad=-0x1;for(let ae=0x0;ae<J['length'];ae++){if(J[ae]['itemType']===ac){ad=ae;break;}}return ad;}function Q(ac,ad){try{if(ac===undefined)return undefined;let ae=ac['position'],af;return ad===undefined?(af=new DataView(z,ae,ac['datasize']),af):(af=new DataView(ad,ae,ac['datasize']),af);}catch(ag){return undefined;}}function R(ac,ad){let ae=0x0,af;af=ac['getInt32'](ae,!![]),ae+=0x4;let ag=![];(H['version']>=0x131||n['headerVersion']!==undefined&&n['headerVersion']>=0x10011)&&(ag=!![]);for(let ah=0x0;ah<af;ah++){let ai=![];if(n['headerVersion']!==undefined&&n['headerVersion']>=0x10011){let aB=ac['getInt32'](ae,!![]);if(aB===0x1)ai=!![];ae+=0x4;}let aj=-0x1,ak=new b['Color']();if(ai){ak['set'](0xff,0xff,0xff,0xff);let aC=ac['getUint8'](ae,!![]),aD=ac['getUint8'](ae+0x1,!![]),aE=ac['getUint8'](ae+0x2,!![]),aF=ac['getUint8'](ae+0x3,!![]);aj=aF+(aE<<0x8)+(aD<<0x10)+aC*0x1000000;}else ak['r']=ac['getUint8'](ae,!![]),ak['g']=ac['getUint8'](ae+0x1,!![]),ak['b']=ac['getUint8'](ae+0x2,!![]),ak['a']=ac['getUint8'](ae+0x3,!![]);ae+=0x4;let al=ac['getUint32'](ae,!![]);ae+=0x4;let am=ac['getUint32'](ae,!![]);ae+=0x4;let an=ac['getUint32'](ae,!![]);ae+=0x4;let ao=0x0;ag&&(ao=ac['getUint32'](ae,!![]),ae+=0x4);let ap,aq=0.5,ar=0x0;if(a['DemoType']===0x4&&ap===undefined){ap=a['Data']['MaterialGLItem'](b['Enum']['SHADER_TYPES']['PBR']);if(ao>0x0){let aG=-0x1;if(ak['r']===0xff)aG=0x64,aq=0.8,ar=0x0,ap['tiling']['x']=0xa,ap['tiling']['y']=-0xa,ap['offset']['x']=-0x2,ap['offset']['y']=0x2,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0xff;else{if(ak['r']===0xfe)aG=0x65,aq=0.3,ar=0.05,ap['tiling']['x']=0x3,ap['tiling']['y']=-0x3,ap['offset']['x']=-0x4,ap['offset']['y']=-0x4,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0xff;else{if(ak['r']===0xfd)aG=0x66,aq=0.3,ar=0.05,ap['tiling']['x']=0x1e,ap['tiling']['y']=-0x1e,ap['offset']['x']=0x0,ap['offset']['y']=0x0,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0xff;else{if(ak['r']===0xfc)aG=0x67,aq=0.3,ar=0.4,ap['tiling']['x']=0x14,ap['tiling']['y']=-0x14,ap['offset']['x']=-4.5,ap['offset']['y']=-4.5,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0xff;else{if(ak['r']===0x96)aG=0x68,aq=0.3,ar=0.05,ap['tiling']['x']=0xa,ap['tiling']['y']=-0xa,ap['offset']['x']=0x0,ap['offset']['y']=0x0,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0xff;else{if(ak['r']===0xcc)aG=0x69,aq=0x0,ar=0x0,ap['tiling']['x']=0x1,ap['tiling']['y']=-0x1,ap['offset']['x']=0x0,ap['offset']['y']=0x0,ak['r']=0xff,ak['g']=0xff,ak['b']=0xff,ak['a']=0x64;else{}}}}}}ap['color']['copy'](ak),ap['tag']['u_Roughness']['value']=aq,ap['tag']['u_Metallic']['value']=ar;let aH=a['Util']['GetTESTTextureData64Src'](aG),aI=a['Util']['GetTESTTextureData64Src'](aG+0x64);if(aH['localeCompare']('')!==0x0){let aJ=new Image();aJ['src']=aH,aJ['onload']=function(){ap['diffuseSrc']=aJ,ap['diffuseWidth']=aJ['width'],ap['diffuseHeight']=aJ['height'],setTimeout(function(){a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0xa);};}if(aI['localeCompare']('')!==0x0){let aK=new Image();aK['src']=aI,aK['onload']=function(){ap['normalSrc']=aK,ap['normalWidth']=aK['width'],ap['normalHeight']=aK['height'],setTimeout(function(){a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0xa);};}}if(materialId===0x0)a['Shader']['AddMaterial'](ap);else ap=a['Shader']['GetMaterial'](materialId);}else{if(a['DemoType']===0x3){}else{if(a['UV_DEBUG']){}}}if(a['Loader']['parsetype']===0x1){let aL=ac['getUint32'](ae,!![]);ae+=0x4;}let as=new Float32Array(z,ae+ac['byteOffset'],al);ae+=al*0x4;let at=new Float32Array(z,ae+ac['byteOffset'],am);ae+=am*0x4;let au=new Uint32Array(z,ae+ac['byteOffset'],an);ae+=an*0x4;let av;ao>0x0&&(av=new Float32Array(z,ae+ac['byteOffset'],ao),ae+=ao*0x4);let aw=a['Data']['Object3D']();aw['index']=E,aw['id_file']=n['Key'],aw['link']=n['Url'],aw['attribs']['a_index']['array']=au,aw['numElements']=aw['attribs']['a_index']['array']['length'],aw['attribs']['a_position']['array']=as,aw['attribs']['a_normal']['array']=at;if(a['DemoType']===0x2){let aM=new Uint16Array(at['length']);for(let aN=0x0;aN<at['length'];aN++){aM[aN]=0x0;}aw['attribs']['a_matrixIndex']['array']=aM;}ao>0x0&&a['UV_DEBUG']&&(aw['attribs']['a_uv']['array']=av);let ax=ac['getUint32'](ae,!![]);ae+=0x4;let ay=[],az=[],aA=0x0;for(let aO=0x0;aO<ax;aO++){let aP=ac['getUint32'](ae,!![]);ae+=0x4;let aQ=ac['getUint32'](ae,!![]);ae+=0x4;let aR=aQ,aS=ac['getUint32'](ae,!![]);ae+=0x4;let aT=ac['getUint32'](ae,!![]);ae+=0x4;let aU=0x0;ag&&(aU=ac['getUint32'](ae,!![]),ae+=0x4);let aV=ac['getUint16'](ae,!![]);ae+=0x2;let aW=ac['getUint16'](ae,!![]);ae+=0x2;let aX=0x0;ag&&(aX=ac['getUint32'](ae,!![]),ae+=0x4);let aY=new Float32Array(ac['buffer'],ae+ac['byteOffset'],0x6);ae+=0x18;let aZ,b0;if(a['UV_DEBUG']){let b2=new b['BBox'](aY);aZ={'partId':aP+a['Data']['GetStartID'](n['Key']),'bodyId':aQ+a['Data']['GetStartID'](n['Key']),'origin_id':aR,'color':ak,'material':-0x1,'m_vnIdx':aS*0x3,'m_triIdx':aT*0x3,'m_uvIdx':aU*0x2,'m_nVtx':aV*0x3,'m_nTris':aW*0x3,'m_nUV':aX*0x2,'BBox':b2,'colorIdx':null,'object':null},b0=a['Data']['ShapeAction']['GetAction'](n['Key'],aR),b0===undefined&&(b0=a['Data']['ActionItem']()),b0['material']=aj;}else{if(a['DemoType']===0x3){let b3=new b['BBox'](aY);if(n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0){}aZ={'partId':aP+a['Data']['GetStartID'](n['Key']),'bodyId':aQ+a['Data']['GetStartID'](n['Key']),'origin_id':aR,'color':ak,'material':-0x1,'m_vnIdx':aS*0x3,'m_triIdx':aT*0x3,'m_nVtx':aV*0x3,'m_nTris':aW*0x3,'BBox':b3,'colorIdx':null,'object':null},b0=a['Data']['ShapeAction']['GetAction'](n['Key'],aR),b0===undefined&&(b0=a['Data']['ActionItem']());}else aZ={'partId':aP+a['Data']['GetStartID'](n['Key']),'bodyId':aQ+a['Data']['GetStartID'](n['Key']),'origin_id':aR,'color':ak,'m_vnIdx':aS*0x3,'m_triIdx':aT*0x3,'m_nVtx':aV*0x3,'m_nTris':aW*0x3,'BBox':new b['BBox'](aY),'colorIdx':null,'object':null},b0=a['Data']['ShapeAction']['GetAction'](n['Key'],aR),b0===undefined&&(b0=a['Data']['ActionItem']());}b0!==undefined&&b0['customColor']&&(b0['color']!==undefined&&(b0['color']['r']===undefined&&(b0['color']['r']=ak['r']),b0['color']['g']===undefined&&(b0['color']['g']=ak['g']),b0['color']['b']===undefined&&(b0['color']['b']=ak['b']),b0['color']['a']===undefined&&(b0['color']['a']=ak['a'])));if(n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0)aZ['partid']=a['Animation']['GetAnimationBodyID'](n['Url']),aZ['bodyId']=a['Animation']['GetAnimationBodyID'](n['Url']);else{if(n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0)aZ['partid']=a['Animation']['GetAnimationBodyID'](n['Url']),aZ['bodyId']=a['Animation']['GetAnimationBodyID'](n['Url']);else{if(n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0){aZ['partid']=a['Animation']['GetAnimationBodyID'](n['Url']),aZ['bodyId']=a['Animation']['GetAnimationBodyID'](n['Url']);if(aZ['bodyId']<0x30d54)console['log']('');}else n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0&&(aZ['partid']=a['Animation']['GetAnimationBodyID'](n['Url']),aZ['bodyId']=a['Animation']['GetAnimationBodyID'](n['Url']));}}a['Data']['IDColor']['new'](),aZ['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let b1=aZ['m_nVtx']/0x3*0x4;for(let b4=0x0;b4<b1;b4=b4+0x4){az[aA+b4+0x0]=a['Data']['IDColor']['r'],az[aA+b4+0x1]=a['Data']['IDColor']['g'],az[aA+b4+0x2]=a['Data']['IDColor']['b'],az[aA+b4+0x3]=a['Data']['IDColor']['a'];}aA+=b1,aZ['object']=aw,ay['push'](aZ),a['Data']['AddBody'](aZ);{a['Data']['ShapeAction']['SetAction'](n['Key'],aR,b0);}if(a['DemoType']===0x2){let b5=a['MeshProcess']['GetAABBFromMatrix']([aZ]);aZ['BBox']=b5;}}aw['attribs']['a_color']['array']=new Uint8Array(az,0x0,aA),a['Data']['Objects']['push'](aw),aw['tag']=ay;if(a['DataSplit']!==0x0){let b6=a['Data']['ModelFileManager']['GetFileAreaData'](n['Key'],n['Url']);b6['objects']['push'](aw);}E++;}}function S(ac,ad){n['ID']+=ad;let ae=0x0,af;af=ac['getInt32'](ae,!![]),ae+=0x4;for(let ag=0x0;ag<af;ag++){let ah=new b['Color']();ah['r']=ac['getUint8'](ae,!![]),ah['g']=ac['getUint8'](ae+0x1,!![]),ah['b']=ac['getUint8'](ae+0x2,!![]),ah['a']=ac['getUint8'](ae+0x3,!![]),ae+=0x4;let ai=ac['getUint32'](ae,!![]);ae+=0x4;let aj=ac['getUint32'](ae,!![]);ae+=0x4;let ak=ac['getUint32'](ae,!![]);ae+=0x4;let al=0x0;H['version']>=0x131&&(al=ac['getUint32'](ae,!![]),ae+=0x4);let am,an=0.5,ao=0x0,ap=0x0;if(a['Loader']['parsetype']===0x1){let az=ac['getUint32'](ae,!![]);ae+=0x4;}let aq=new Float32Array(z,ae+ac['byteOffset'],ai);ae+=ai*0x4;let ar=new Float32Array(z,ae+ac['byteOffset'],aj);ae+=aj*0x4;let as=new Uint32Array(z,ae+ac['byteOffset'],ak);ae+=ak*0x4;let at;H['version']>=0x131&&al>0x0&&(at=new Float32Array(z,ae+ac['byteOffset'],al),ae+=al*0x4);let au=a['Data']['Object3D']();au['index']=E,au['attribs']['a_index']['array']=as,au['numElements']=au['attribs']['a_index']['array']['length'],au['attribs']['a_position']['array']=aq,au['attribs']['a_normal']['array']=ar;al>0x0&&a['UV_DEBUG']&&(au['attribs']['a_uv']['array']=at);let av=ac['getUint32'](ae,!![]);ae+=0x4;let aw=[],ax=[],ay=0x0;for(let aA=0x0;aA<av;aA++){let aB=ac['getUint32'](ae,!![]);ae+=0x4;let aC=ac['getUint32'](ae,!![]);ae+=0x4;let aD=ac['getUint32'](ae,!![]);ae+=0x4;let aE=ac['getUint32'](ae,!![]);ae+=0x4;let aF=0x0;H['version']>=0x131&&(aF=ac['getUint32'](ae,!![]),ae+=0x4);let aG=ac['getUint16'](ae,!![]);ae+=0x2;let aH=ac['getUint16'](ae,!![]);ae+=0x2;let aI=0x0;H['version']>=0x131&&(aI=ac['getUint32'](ae,!![]),ae+=0x4);let aJ=new Float32Array(ac['buffer'],ae+ac['byteOffset'],0x6);ae+=0x18;if(a['UV_DEBUG']){let aK={'partId':aB+a['Data']['GetStartID'](n['Key']),'bodyId':aC+a['Data']['GetStartID'](n['Key']),'color':ah,'material':am['id'],'m_vnIdx':aD*0x3,'m_triIdx':aE*0x3,'m_uvIdx':aF*0x2,'m_nVtx':aG*0x3,'m_nTris':aH*0x3,'m_nUV':aI*0x2,'BBox':new b['BBox'](aJ),'colorIdx':null,'object':null};a['Data']['IDColor']['new'](),aK['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let aL=aK['m_nVtx']/0x3*0x4;for(let aM=0x0;aM<aL;aM=aM+0x4){ax[ay+aM+0x0]=a['Data']['IDColor']['r'],ax[ay+aM+0x1]=a['Data']['IDColor']['g'],ax[ay+aM+0x2]=a['Data']['IDColor']['b'],ax[ay+aM+0x3]=a['Data']['IDColor']['a'];}ay+=aL,aK['object']=au,aw['push'](aK),a['Data']['AddBody'](aK);}else{let aN={'partId':aB+a['Data']['GetStartID'](n['Key'])+ad*0x2710,'bodyId':aC+a['Data']['GetStartID'](n['Key'])+ad*0x2710,'color':ah,'m_vnIdx':aD*0x3,'m_triIdx':aE*0x3,'m_nVtx':aG*0x3,'m_nTris':aH*0x3,'BBox':new b['BBox'](aJ),'colorIdx':null,'object':null};a['Data']['IDColor']['new']();let aO,aP=0x0,aQ=0x0,aR=0x1,aS=0x1;ad<0x5?(aP=0x4e20,aQ=0x0,aR=ad,aS=0x1):(aP=0x4e20,aQ=0x15f90,aR=ad%0x5,aS=0x1);aO=new b['Vector3'](aP*aR,aQ*aS,0x0),aN['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let aT=aN['m_nVtx']/0x3*0x4;for(let aU=0x0;aU<aT;aU=aU+0x4){ax[ay+aU+0x0]=a['Data']['IDColor']['r'],ax[ay+aU+0x1]=a['Data']['IDColor']['g'],ax[ay+aU+0x2]=a['Data']['IDColor']['b'],ax[ay+aU+0x3]=a['Data']['IDColor']['a'];}ay+=aT,aN['object']=au,aw['push'](aN),a['Data']['AddBody'](aN);if(a['DemoType']===0x2){let aV=a['MeshProcess']['GetAABBFormMatrix']([aN]);aN['BBox']=aV;}}}au['attribs']['a_color']['array']=new Uint8Array(ax,0x0,ay),a['Data']['Objects']['push'](au),au['tag']=aw;if(a['DataSplit']!==0x0){let aW=a['Data']['ModelFileManager']['GetFileAreaData'](n['Key'],n['Url']);aW['objects']['push'](au);}E++;}}function T(ac,ad){let ae=0x0,af=ac['getUint32'](ae,!![]);ae+=0x4;let ag=ac['getUint32'](ae,!![]);ae+=0x4;let ah=ac['getUint32'](ae,!![]);ae+=0x4;let ai=[],aj=[];for(let ap=0x0;ap<ah;ap++){let aq=a['Data']['NodeItem'](),ar=ac['getUint32'](ae,!![]);aq['origin_id']=ar,aq['index']=ar===-0x1?ar:ar+a['Data']['GetStartID'](n['Key']),ae+=0x4,aq['itemType']=ac['getInt32'](ae,!![]),ae+=0x4,ae+=0x4;let as=ac['getInt32'](ae,!![]);ae+=0x4,ae+=0x4;for(let au=0x0;au<0x10;au++){ae+=0x4;}for(let av=0x0;av<0x6;av++){ae+=0x4;}ae+=0x4;let at=ac['getInt32'](ae,!![]);aq['origin_pid']=at,aq['pIndex']=at===-0x1?at:at+a['Data']['GetStartID'](n['Key']),ae+=0x4,ae+=0x4;if(H['version']<0x12e)ae+=0x8;ae+=0x4,ae+=0x4;if(aq['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&aq['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&aq['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody']){ag--;continue;}ai['push'](aq),aj['push'](as);}let ak=ac['getInt32'](ae,!![]);ae+=0x4;let al=function(aw){try{return decodeURIComponent(escape(aw));}catch(ax){return aw;}},am=[],an=ae,ao=0x0;for(let aw=0x0;aw<ag;aw++){if(aj[aw]<=0x0)continue;let ax={'nStringNum':0x0,'pos':0x0,'name':null};ax['pos']=ao,ax['nStringNum']=aj[aw];let ay=new Uint8Array(ax['nStringNum']);for(let aA=0x0;aA<ax['nStringNum'];aA++){ay[aA]=ac['getUint8'](ao+an+aA,!![]);}let az=String['fromCharCode']['apply'](null,ay);az=al(az),ai[aw]['name']=az['replace'](/\0/gi,''),ax['name']=az['replace'](/\0/gi,''),ao+=aj[aw],am[aw]=ax;}ae+=ak;{let aB=function(){let aQ={'readIdx':-0x1,'index':-0x1,'offset':-0x1,'parentOffset':-0x1,'lastOffset':-0x1,'siblingOffset':-0x1,'level':0x0,'expand':0x0,'nameOffset':0x0,'nameLength':0x0,'node_id':0x0,'node_type':0x0,'parent':undefined,'child':[]};return aQ;},aC=[],aD=[],aE=0x8,aF=0x20,aG=new Map(),aH=[];for(let aQ=0x0;aQ<ah;aQ++){let aR=ai[aQ];if(aR===undefined)continue;let aS=aB();aS['readIdx']=aQ,aS['node_id']=aR['origin_id'],aS['node_type']=aR['itemType'],aH[aQ]=aS,aG['set'](aS['node_id'],aQ);}for(let aT=0x0;aT<ah;aT++){let aU=ai[aT];if(aU===undefined)continue;let aV=aH[aT];if(aG['has'](aU['origin_pid'])){let aW=aH[aG['get'](aU['origin_pid'])];aV['parent']=aW,aW['child']['push'](aV);}}{let aX=[],aY=function(aZ){aX['push'](aZ);for(let b0=0x0;b0<aZ['child']['length'];b0++)aY(aZ['child'][b0]);};for(let aZ=0x0;aZ<aH['length'];aZ++){let b0=aH[aZ];if(b0['parent']!==undefined)continue;aY(b0);}aH=aX;}for(let b1=0x0;b1<aH['length'];b1++){let b2=aH[b1];b2['index']=b1,b2['offset']=b1*aF;}let aI=function(b3,b4){if(b4['parent']===undefined)return;b3['level']++,aI(b3,b4['parent']);},aJ=function(b3){return b3['child']['length']>0x0?aJ(b3['child'][b3['child']['length']-0x1]):b3['offset'];};for(let b3=0x0;b3<aH['length'];b3++){let b4=aH[b3];if(b4['parent']!==undefined)b4['parentOffset']=b4['parent']['offset'];aI(b4,b4),b4['child']['length']>0x0?(b4['siblingOffset']=b4['child'][b4['child']['length']-0x1]['offset'],b4['lastOffset']=aJ(b4)):(b4['siblingOffset']=b4['offset'],b4['lastOffset']=b4['offset']);}let aK=0x0,aL=0x0,aM=new ArrayBuffer(ah*aF),aN=new Int32Array(aM,0x0,ah*aE);aK=0x0;let aO=new ArrayBuffer(ak),aP=new Uint8Array(aO,0x0,ak);for(let b5=0x0;b5<aH['length'];b5++){let b6=aH[b5];if(am[b6['readIdx']]!==undefined){let b7=am[b6['readIdx']],b8=unescape(encodeURIComponent(b7['name'])),b9=new ArrayBuffer(b8['length']),ba=new Uint8Array(b9);for(let bb=0x0,bc=b8['length'];bb<bc;bb++){ba[bb]=b8['charCodeAt'](bb);}b6['nameOffset']=aK,b6['nameLength']=b8['length'],aP['set'](ba,aK),aK+=b6['nameLength'];}aN['set']([b6['parentOffset'],b6['lastOffset'],b6['siblingOffset'],b6['level'],b6['nameOffset'],b6['nameLength'],b6['node_id'],b6['node_type']],aL),aL+=aE,aC[b5]=b6['node_id'],aD[b6['node_id']]=b5;}{let bd=a['Data']['ModelFileManager']['GetFileInfo'](n['Key']),be=a['Data']['ModelFileManager']['AddFileDataInfo'](bd,n['Key'],b['Enum']['FILEINFOTYPE']['STRUCTURE']);if(be!==undefined){let bf=a['Data']['TreeBinaryInfoItem']();bf['key']=n['Key'],bf['idx_start']=0x0,bf['idx_end']=ah,bf['offset_start']=0x0,bf['structure']=new DataView(aM),bf['name']=new DataView(aO),bf['size']=aF,bf['listNodeID']=aC,bf['listIndexByID']=aD,be['tag']=bf,bd['listNodeID']=aC,bd['listIndexByID']=aD,be['Download']=!![];}}}B=!![],aa();}function U(ac,ad){let ae=0x0,af=ac['getUint32'](ae,!![]);ae+=0x4;let ag=function(ai){try{return decodeURIComponent(escape(ai));}catch(aj){return ai;}},ah=[];switch(a['DataSplit']){case 0x2:{for(let ai=0x0;ai<af;ai++){let aj=a['Data']['NodeItem'](),ak=ac['getUint32'](ae,!![]);aj['index']=ak===-0x1?ak:ak+a['Data']['GetStartID'](n['Key']),ae+=0x4,aj['itemType']=ac['getInt32'](ae,!![]),ae+=0x4;let al=ac['getInt32'](ae,!![]);aj['pIndex']=al===-0x1?al:al+a['Data']['GetStartID'](n['Key']),ae+=0x4;if(aj['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&aj['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&aj['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody'])continue;a['Data']['AddNode'](aj);}}break;default:{for(let am=0x0;am<af;am++){let an=a['Data']['NodeItem'](),ao=ac['getUint32'](ae,!![]);an['index']=ao===-0x1?ao:ao+a['Data']['GetStartID'](n['Key']),ae+=0x4,an['itemType']=ac['getInt32'](ae,!![]),ae+=0x4,ae+=0x2;let ap=ac['getInt32'](ae,!![]);ae+=0x4;if(ap>0x0){let ar=new Uint8Array(ap);for(let at=0x0;at<ap;at++){ar[at]=ac['getUint8'](ae+at,!![]);}let as=String['fromCharCode']['apply'](null,ar);as=ag(as),an['name']=as['replace'](/\0/gi,'');}ae+=ap,ae+=0x2;for(let au=0x0;au<0x10;au++){ae+=0x4;}for(let av=0x0;av<0x6;av++){ae+=0x4;}ae+=0x4;let aq=ac['getInt32'](ae,!![]);an['pIndex']=aq===-0x1?aq:aq+a['Data']['GetStartID'](n['Key']),ae+=0x4,ae+=0x4;if(H['version']<0x12e)ae+=0x8;ae+=0x4,ae+=0x4;if(an['itemType']!==b['Enum']['ENTITY_TYPES']['EntAssembly']&&an['itemType']!==b['Enum']['ENTITY_TYPES']['EntPart']&&an['itemType']!==b['Enum']['ENTITY_TYPES']['EntBody'])continue;a['Data']['AddNode'](an);}}break;}B=!![],aa();}function V(ac,ad){let ae=0x0,af=ac['getInt32'](ae,!![]);ae+=0x4;let ag=ac['getInt32'](ae,!![]);ae+=0x4;let ah=ac['getInt32'](ae,!![]);ae+=0x4;let ai=ac['getInt32'](ae,!![]);ae+=0x4;let aj=ac['getInt32'](ae,!![]);ae+=0x4;let ak=ac['getInt32'](ae,!![]);return ae+=0x4,[ag,ah,ai,aj,ak];}function W(ac,ad){let ae=0x0,af=ac['getInt32'](ae,!![]);ae+=0x4;let ag=[];for(let ah=0x0;ah<af;ah++){let ai=new Float32Array(ac['buffer'],ae+a['byteOffset'],0x6);ae+=0x18;let aj=ac['getInt32'](ae,!![]);ae+=0x4;let ak=new Int32Array(ac['buffer'],ae+a['byteOffset'],aj);ae+=0x4*aj;let al={'bbox':new b['BBox'](ai),'list':ak};ag[ah]=al;}a['Data']['AddAreaListMap'](n['Url'],ag);}function X(ac,ad){let ae=0x8,af=ac['getUint32'](ae,!![]);ae+=0x4;let ag=0x0;for(let ah=0x0;ah<af;ah++){let ai=ac['getUint32'](ae,!![]);if(ag<ai)ag=ai;ae+=0x4,ae+=0x4,ae+=0x4,ae+=0x4,ae+=0x4;for(let aj=0x0;aj<0x10;aj++){ae+=0x4;}for(let ak=0x0;ak<0x6;ak++){ae+=0x4;}ae+=0x4,ae+=0x4,ae+=0x4;if(H['version']<0x12e)ae+=0x8;ae+=0x4,ae+=0x4;}return ag;}function Y(ac,ad){let ae=0x0,af=ac['getUint32'](ae,!![]);ae+=0x4;let ag=0x0;switch(a['DataSplit']){case 0x2:{for(let ah=0x0;ah<af;ah++){let ai=ac['getUint32'](ae,!![]);if(ag<ai)ag=ai;ae+=0xc;}}break;default:{for(let aj=0x0;aj<af;aj++){let ak=ac['getUint32'](ae,!![]);if(ag<ak)ag=ak;ae+=0xa;let al=ac['getInt32'](ae,!![]);ae+=0x4,ae+=al,ae+=0x6e;if(H['version']<0x12e)ae+=0x8;}}break;}return ag;}function Z(ac,ad){let ae=0x0,af=ac['getUint32'](ae,!![]);ae+=0x4;let ag=[];for(let ai=0x0;ai<af;ai++){let aj=ac['getUint32'](ae,!![]);ae+=0x4;let ak={'tableTocIdx':aj,'nLoadedNodes':0x0};ag['push'](ak);}for(let al=0x0;al<ag['length'];al++){let am=ag[al],an=J[am['tableTocIdx']];if(an===undefined){setTimeout(function(){l(null,A);},0x1);return;}else{let ao=Q(an,ac['buffer']);ah(ao,an,am);}}function ah(ap,aq,ar){let as=0x0,at=ap['getUint32'](as,!![]);as+=0x4;if(ar['nLoadedNodes']===at)return![];let au=[];for(let av=0x0;av<at;av++){let aw={'nodeId':-0x1,'nNodeProps':0x0,'items':[],'key':n['ID'],'offset':-0x1,'id_file':n['Key']};au[av]=aw;let ax=ap['getUint32'](as,!![]);aw['nodeId']=ax+a['Data']['GetStartID'](n['Key']),as+=0x4,aw['nNodeProps']=ap['getInt16'](as,!![]),as+=0x2,aw['offset']=as;let ay=function(aA){return unescape(encodeURIComponent(aA));},az=function(aA){try{return decodeURIComponent(escape(aA));}catch(aB){return aA;}};if(a['Configuration']['Property']['UseArrayBuffer'])for(let aA=0x0;aA<aw['nNodeProps'];aA++){let aB=ap['getUint32'](as,!![]);as+=0x4,as+=aB,as+=0x2,aB=ap['getUint32'](as,!![]),as+=0x4,as+=aB,as+=0x2;}else for(let aC=0x0;aC<aw['nNodeProps'];aC++){let aD={'key':null,'value':null},aE=ap['getUint32'](as,!![]);as+=0x4;let aF=new Uint8Array(aE);for(let aH=0x0;aH<aE;aH++){aF[aH]=ap['getUint8'](as+aH,!![]);}aD['key']=String['fromCharCode']['apply'](null,aF),aD['key']=az(aD['key']),as+=aE,as+=0x2,aE=ap['getUint32'](as,!![]),as+=0x4;let aG=new Uint8Array(aE);for(let aI=0x0;aI<aE;aI++){aG[aI]=ap['getUint8'](as+aI,!![]);}aD['value']=String['fromCharCode']['apply'](null,aG),aD['value']=az(aD['value']),as+=aE,as+=0x2,aw['items']['push'](aD);}}a['Property']['Add'](au,n['ID'],ap,n);{let aJ=a['Data']['ModelFileManager']['GetFileInfo'](n['Key']),aK=a['Data']['ModelFileManager']['AddFileDataInfo'](aJ,b['Enum']['FILEINFOTYPE']['PROPERTY'],b['Enum']['FILEINFOTYPE']['PROPERTY']);aK['Download']=!![];}D=!![],aa();}}let a0=O(d['CTSplitStructureMeshBlockFile']);if(a0!==-0x1&&H['version']>=0x12f){let ac=J[a0],ad=Q(ac),ae=V(ad,ac),af=ae[0x0];if(af!==0x0){let ag=ae[0x1],ah=ae[0x2],ai=ae[0x3],aj=ae[0x4],ak=a['Data']['GetStringLeft'](n['Url'],0x0,n['Url']['length']-0x5),al=0x0,am=0x0,an=0x0,ao=0x0,ap=[],aq=Math['max'](Math['max'](ag,ah),ai);for(let ar=0x0;ar<aq;++ar){al<ag&&(ap[ao++]=ak+'_s_'+al+'.vizw',al++),an<ai&&(ap[ao++]=ak+'_u_'+an+'.vizw',an++),am<ah&&(ap[ao++]=ak+'_'+am+'.vizw',am++);}if(!a['useLOD']){let as=O(d['CTSplitAreaMeshBlockList']);if(as!==-0x1){let at=J[as],au=Q(at);W(au,at);}}a['DataSplit']=af,a['resizeGLWindowSkip']=!![],a['currentSplitDownloadCnt']=0x0,a['totalSplitDownloadCnt']=ag+ah+ai,a['Data']['ApplyStartID'](),a['Model']['SplitAdd'](ap),l(null,n);return;}}let a1=O(d['CTStructure']),a2=J[a1],a3=Q(a2),a4=O(d['CTMeshBlock']),a5=J[a4],a6=Q(a5),a7=O(d['CTNodePropTableIndices']),a8=J[a7],a9=Q(a8);{let av=a['Data']['ModelFileManager']['CreateFileInfoEmpty'](n);a['Data']['ModelFileManager']['AddFileInfo'](n['Key'],av);}if(a2!==undefined){if(a['DataSplit']===0x0){let aw=X(a3,a2);a['Data']['SetStartID'](n['Key'],aw);}else{let ax=Y(a3,a2);a['Data']['SetCurrentStartID'](ax);}}if(a2===undefined&&a5===undefined&&a8===undefined){if(!a['useFramebuffer'])i(0x1,0x1);z=null,l(null,n);}else a2!==undefined?setTimeout(function(){a['DataSplit']===0x0?T(a3,a2):U(a3,a2);},0x1):(B=!![],aa()),a5!==undefined?setTimeout(function(){G=0x0;let ay=a6['getInt32'](G,!![]);G+=0x4;let az=0x0,aA=function(){for(let aB=az;aB<ay;aB++){let aC=az/ay;if(aC===Infinity)aC=0x0;let aD=0x0;aD=a6['getInt32'](G,!![]),G+=0x4;let aE=J[aD],aF=Q(aE);R(aF,aD);if(a['DemoType']===0x3){if(n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BIKE.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/BUS.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_A.vizw')===0x0||n['Url']['localeCompare'](a['Configuration']['Default']['Path']+'Model/Sejong/Transportation/CAR_B.vizw')===0x0)for(let aG=0x1;aG<0x14;aG++){a['Animation']['BackupUrl']='',R(aF,aD);}}if(a['DemoType']==0x2)for(let aH=0x1;aH<0xa;aH++){a['MeshProcess']['Copy'](aF,aH,z,n,H,E);}az++;if(az!==ay){setTimeout(function(){if(!a['useFramebuffer'])i(0x1,aC);aA();},0x1);break;}else setTimeout(function(){if(!a['useFramebuffer'])i(0x1,0x1);C=!![],aa();},0x1);}};setTimeout(function(){if(!a['useFramebuffer'])i(0x1,0x0);aA();},0x1);},0x1):(C=!![],aa()),a8!==undefined?setTimeout(function(){Z(a9,a8);},0x1):(D=!![],aa());function aa(){if(B&&C&&D)l(null,n);}}function x(z,A){let B=a['Configuration']['Default']['EncodeURI']['Enable']===!![]?e(z):z,C='';if(a['Configuration']['Default']['File']!==undefined&&a['Configuration']['Default']['File']['EnableCache']===!![]){if(A===undefined||A===![])C=a['Configuration']['Default']['File']['RequestParam']+new Date()['getTime']();}return B+C;};let y=function(z){let A=new Date();if(g['Header']!==undefined&&g['Header']['compressed']){let B=(C,D)=>{let E=new Date(),F=new Uint8Array(C);const G=F['byteLength'],H=a['ShdCore']['_malloc'](G);var I=new Uint8Array(F);a['ShdCore']['HEAPU8']['set'](I,H);const J=a['ShdCore']['ccall']('GetDecompressedSize','BigInt',['number','number'],[H,G]),K=a['ShdCore']['_malloc'](J),L=a['ShdCore']['ccall']('Decompress','number',['number','number','number','number'],[H,G,K,J]);try{var M=new Uint8Array(L);M['set'](new Uint8Array(a['ShdCore']['asm']['memory']['buffer'],K,L),0x0),C=M['buffer'];}catch(N){console['log']('allocation\x20::\x20',N),a['ShdCore']['_free'](H),a['ShdCore']['_free'](K),D(undefined,g);return;}a['ShdCore']['_free'](H),a['ShdCore']['_free'](K),D(C,g);};if(k!==undefined){let C=(D,E)=>{j(D,E),f=null;};setTimeout(()=>{B(f,C);},0x1),k(g,undefined);}else B(f,j);}else{let D=new Date(),E=D['getTime']()-A['getTime']();k!==undefined&&k(g,undefined),o(z,g,undefined);}if(k===undefined)z=null;};y(f);};};export default VIZWLoader;