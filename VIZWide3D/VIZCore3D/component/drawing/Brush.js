class Brush{constructor(a,b){let c=this;this['Mode']='Brush';let d=undefined,e=[],f=[],g=a['canvas'],h={'x':0x0,'y':0x0},i=![],j=undefined,k=undefined;this['Size']=function(p){k=p;},this['Color']=function(p){j=p;};function l(p){return h={'x':p['offsetX'],'y':p['offsetY']},h['x']=(h['x']-a['pointX'])/a['_Scale'],h['y']=(h['y']-a['pointY'])/a['_Scale'],h;}function m(){i=![];if(a['PanMode'])return;d=undefined,f=[],e=[];}function n(p){if(i)return;i=!![],e=[],a['_Scale']!==0x1?h={'x':p['offsetX']/a['_Scale']-a['pointX'],'y':p['offsetY']/a['_Scale']-a['pointY']}:h={'x':p['offsetX'],'y':p['offsetY']},f['push']({'x':h['x']/g['width'],'y':h['y']/g['height']}),e['push'](l(p)),d=a['SketchItem'](),d['src']=a['Navigator']['currentSrc'],d['brush']['color']=j?j:a['setting']['color'],d['brush']['size']=k?k:a['setting']['size'],d['brush']['position'][0x0]=e,d['brush']['pXY'][0x0]=f,a['SketchItems']['push'](d),d['id']=a['SketchItems']['length']-0x1;}function o(p){if(a['PanMode'])return;if(!i)return;a['_Scale']!==0x1?h={'x':p['offsetX']/a['_Scale']-a['pointX'],'y':p['offsetY']/a['_Scale']-a['pointY']}:h={'x':p['offsetX'],'y':p['offsetY']},f['push']({'x':h['x']/g['width'],'y':h['y']/g['height']}),e['push'](l(p)),a['DrawSketch']();}this['Draw']=function(){a['PanMode']&&(a['PanMode']=![]),a['oldMode']!==undefined&&a['oldMode']['Mode']!==this['Mode']&&a['oldMode']['DrawEnd'](),a['oldMode']=c,g&&(g['style']['cursor']='crosshair',g['addEventListener']('mousemove',o),g['addEventListener']('mousedown',n),g['addEventListener']('mouseup',m),g['addEventListener']('mouseout',m)),a['SetMode'](a['Enum']['Mode']['Brush']);},this['DrawEnd']=function(){g['style']['cursor']='default',g['removeEventListener']('mousemove',o),g['removeEventListener']('mousedown',n),g['removeEventListener']('mouseup',m),g['removeEventListener']('mouseout',m);};}};export default Brush;