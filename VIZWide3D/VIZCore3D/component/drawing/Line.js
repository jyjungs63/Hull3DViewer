class Line{constructor(a){let b=this,c=undefined,d=[],e=[],f=a['canvas'];this['Mode']='Line';let g={'x':0x0,'y':0x0},h=![],i=undefined,j=undefined;this['Size']=function(q){j=q;},this['Color']=function(q){i=q;};function k(q){return g={'x':q['offsetX'],'y':q['offsetY']},g['x']=(g['x']-a['pointX'])/a['_Scale'],g['y']=(g['y']-a['pointY'])/a['_Scale'],g;}function l(q){h=![];if(a['PanMode'])return;d['push'](k(q)),e['push']({'x':g['x']/f['width'],'y':g['y']/f['height']}),c=undefined,e=[],d=[];}function m(q){if(h)return;h=!![],d=[];const r=q['offsetX']-(f['clientWidth']-f['width']);a['_Scale']!==0x1?g={'x':r/a['_Scale']-a['pointX'],'y':q['offsetY']/a['_Scale']-a['pointY']}:g={'x':r,'y':q['offsetY']},e['push']({'x':g['x']/f['width'],'y':g['y']/f['height']}),d['push'](k(q)),d['push'](k(q)),c=a['SketchItem'](),c['src']=a['Navigator']['currentSrc'],c['brush']['color']=i?i:a['setting']['color'],c['brush']['size']=j?j:a['setting']['size'],c['line']['position'][0x0]=d,c['line']['pXY'][0x0]=e,a['SketchItems']['push'](c),c['id']=a['SketchItems']['length']-0x1;}function n(q){if(a['PanMode'])return;if(!h)return;const r=q['offsetX']-(f['clientWidth']-f['width']);a['_Scale']!==0x1?g={'x':r/a['_Scale']-a['pointX'],'y':q['offsetY']/a['_Scale']-a['pointY']}:g={'x':r,'y':q['offsetY']},d[d['length']-0x1]=k(q),a['DrawSketch']();}function o(q){let r=[],s=[];q['forEach'](y=>{r['push'](y['x']),s['push'](y['y']);});let t=Math['min'](...r),u=Math['max'](...r),v=Math['min'](...s),w=Math['max'](...s);const x={'min':{'x':t,'y':v},'max':{'x':u,'y':w}};return x;}function p(q,r){for(let s=0x1;s<q['length'];s++){const t=q[s];t['line']['min']=r['min'],t['line']['max']=r['max'];}}this['Draw']=function(){a['PanMode']&&(a['PanMode']=![]),a['oldMode']!==undefined&&a['oldMode']['Mode']!==this['Mode']&&a['oldMode']['DrawEnd'](),a['oldMode']=b,f&&(f['style']['cursor']='crosshair',f['addEventListener']('mousemove',n),f['addEventListener']('mousedown',m),f['addEventListener']('mouseup',l)),a['SetMode'](a['Enum']['Mode']['Line']);},this['DrawEnd']=function(){f['style']['cursor']='default',f['removeEventListener']('mousemove',n),f['removeEventListener']('mousedown',m),f['removeEventListener']('mouseup',l);};}};export default Line;