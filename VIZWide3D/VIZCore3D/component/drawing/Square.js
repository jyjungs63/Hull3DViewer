class Square{constructor(a,b){let c=this,d=undefined,e=[],f=[],g=a['canvas'];this['Mode']='Square';let h=![],i=undefined,j=undefined,k={'x':0x0,'y':0x0};this['Size']=function(p){j=p;},this['Color']=function(p){i=p;};function l(p){return k={'x':p['offsetX'],'y':p['offsetY']},k['x']=(k['x']-a['pointX'])/a['_Scale'],k['y']=(k['y']-a['pointY'])/a['_Scale'],k;}function m(p){h=![];if(a['PanMode'])return;e['push'](l(p)),f['push']({'x':k['x']/g['width'],'y':k['y']/g['height']}),d=undefined,f=[],e=[];}function n(p){if(h)return;h=!![],e=[],a['_Scale']!==0x1?k={'x':p['offsetX']/a['_Scale']-a['pointX'],'y':p['offsetY']/a['_Scale']-a['pointY']}:k={'x':p['offsetX'],'y':p['offsetY']},f['push']({'x':k['x']/g['width'],'y':k['y']/g['height']}),e['push'](l(p)),e['push'](l(p)),d=a['SketchItem'](),d['src']=a['Navigator']['currentSrc'],d['brush']['color']=i?i:a['setting']['color'],d['brush']['size']=j?j:a['setting']['size'],d['square']['position'][0x0]=e,d['square']['pXY'][0x0]=f,a['SketchItems']['push'](d),d['id']=a['SketchItems']['length']-0x1;}function o(p){if(a['PanMode'])return;if(!h)return;a['_Scale']!==0x1?k={'x':p['offsetX']/a['_Scale']-a['pointX'],'y':p['offsetY']/a['_Scale']-a['pointY']}:k={'x':p['offsetX'],'y':p['offsetY']},e[e['length']-0x1]=l(p),a['DrawSketch']();}this['Draw']=function(){a['PanMode']&&(a['PanMode']=![]),a['oldMode']!==undefined&&a['oldMode']['Mode']!==this['Mode']&&a['oldMode']['DrawEnd'](),a['oldMode']=c,g&&(g['style']['cursor']='crosshair',g['addEventListener']('mousemove',o),g['addEventListener']('mousedown',n),g['addEventListener']('mouseup',m),g['addEventListener']('mouseout',m)),a['SetMode'](a['Enum']['Mode']['Square']);},this['DrawEnd']=function(){g['style']['cursor']='default',g['removeEventListener']('mousemove',o),g['removeEventListener']('mousedown',n),g['removeEventListener']('mouseup',m),g['removeEventListener']('mouseout',m);};}};export default Square;