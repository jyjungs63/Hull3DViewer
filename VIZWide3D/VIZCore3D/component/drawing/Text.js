class Text{constructor(a){let b=this,c=undefined,d=a['canvas'];this['Mode']='Text';let e={'x':0x0,'y':0x0},f=0x14,g='Arial',h='',i=![],j=undefined;this['Color']=function(o){j=o;},this['FontSize']=function(o){f=o;},this['Bold']=function(){h='Bold';},this['Italic']=function(){h='italic';};function k(o){return e={'x':o['offsetX'],'y':o['offsetY']},e['x']=(e['x']-a['pointX'])/a['_Scale'],e['y']=(e['y']-a['pointY'])/a['_Scale'],e;}function l(o){if(a['PanMode'])return;if(i)return;a['_Scale']!==0x1?e={'x':o['offsetX']/a['_Scale']-a['pointX'],'y':o['offsetY']/a['_Scale']-a['pointY']}:e={'x':o['offsetX'],'y':o['offsetY']},e=k(o),m(o['clientX'],o['clientY']);}function m(o,p){var q=document['createElement']('textarea');const {left:r}=d['getBoundingClientRect']();q['id']='input',q['autocomplete']='off',q['style']['position']='fixed',q['style']['left']=o-0x4+'px',q['style']['top']=p-0x4+'px',q['style']['fontSize']=f*a['_Scale']+'pt',q['style']['width']=0x96*a['_Scale']+'px',q['style']['height']=0x64*a['_Scale']+'px',d['addEventListener']('click',function(s){if(a['PanMode'])return;s['target']===d&&(d['onclick']=n);}),document['body']['appendChild'](q),q['focus'](),i=!![];}function n(o){let p=document['getElementById']('input');const {left:q,top:r}=d['getBoundingClientRect']();if(p!==null){let s=p['value']['replace'](/(.{11})/g,'$1\x0a')['split']('\x0a');c=a['SketchItem'](),c['src']=a['Navigator']['currentSrc'],c['text']['value']=s,c['text']['setting']['push']({'fontSize':f,'face':g,'textBaseline':'top','textAlign':'left','color':j?j:a['setting']['color'],'style':h,'fieldWidth':parseInt(p['style']['width']),'spacing':1.2}),c['text']['x']=e['x'],c['text']['y']=e['y'],c['text']['pX']=e['x']/d['width'],c['text']['pY']=e['y']/d['height'],a['SketchItems']['push'](c),c['id']=a['SketchItems']['length']-0x1,a['DrawSketch'](),document['body']['removeChild'](p),i=![];}}this['Draw']=function(){a['PanMode']&&(a['PanMode']=![]),a['oldMode']!==undefined&&a['oldMode']['Mode']!==this['Mode']&&a['oldMode']['DrawEnd'](),a['oldMode']=b,d&&(d['style']['cursor']='text',d['addEventListener']('mousedown',l)),a['SetMode'](a['Enum']['Mode']['Text']);},this['DrawEnd']=function(){d['style']['cursor']='default',d['removeEventListener']('mousedown',l);};}};export default Text;