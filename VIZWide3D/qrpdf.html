<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>PDFì— QR ì½”ë“œ ì‚½ì… ì˜ˆì œ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    #qrcode {
      margin: 20px auto;
    }
    input {
      width: 250px;
      padding: 8px;
      font-size: 16px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>ğŸ“„ PDFì— QR ì½”ë“œ ì‚½ì… ì˜ˆì œ</h2>
  <input type="text" id="textInput" placeholder="QR ì½”ë“œì— ë„£ì„ í…ìŠ¤íŠ¸ ì…ë ¥">
  <button onclick="generateQRCode()">QR ì½”ë“œ ìƒì„±</button>
  <div id="qrcode"></div>
  <button onclick="downloadPDF()">ğŸ“¥ PDF ë‹¤ìš´ë¡œë“œ</button>

  <script>
    let qrCodeInstance = null;

    function generateQRCode() {
      const text = document.getElementById("textInput").value || "https://example.com";

      // ê¸°ì¡´ QR ì´ˆê¸°í™”
      document.getElementById("qrcode").innerHTML = "";

      // QR ìƒì„±
      qrCodeInstance = new QRCode(document.getElementById("qrcode"), {
        text: text,
        width: 200,
        height: 200,
      });
    }

    async function downloadPDF() {
      if (!qrCodeInstance) {
        alert("ë¨¼ì € QR ì½”ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”!");
        return;
      }

      const qrCanvas = document.querySelector("#qrcode canvas");
      const qrDataUrl = qrCanvas.toDataURL("image/png");

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("QR ì½”ë“œ PDF ì˜ˆì œ", 20, 20);

      // QR ì½”ë“œ ì´ë¯¸ì§€ ì‚½ì… (x, y, width, height)
      doc.addImage(qrDataUrl, "PNG", 20, 40, 100, 100);

      // PDF ë‹¤ìš´ë¡œë“œ
      doc.save("qrcode.pdf");
    }
  </script>
</body>
</html>
